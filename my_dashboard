kiosk_mode:
  non_admin_settings:
    hide_header: true
    hide_menubutton: true
    ignore_entity_settings: true
  entity_settings:
    - entity:
        input_boolean.kiosk_mode: 'on'
      hide_header: true
    - entity:
        input_boolean.kiosk_mode: 'off'
      hide_header: false
decluttering_templates:
  light_slider:
    card:
      type: custom:big-slider-card
      entity: '[[entity]]'
      name: '[[name]]'
      attribute: brightness
      transition: 0.3
      height: 75
      background_color: '[[background]]'
      color: '#ffd4c1'
      icon_color: var(--black)
      icon: '[[icon]]'
      show_percentage: true
      min: 0
      max: 100
      hold_time: 600
      settle_time: 3000
      tap_action:
        action: toggle
      hold_action:
        action: more-info
      card_mod:
        style: |
          {% if is_state('[[entity]]', 'on') %}
            #container{background:[[background]]!important;margin-bottom: 12px;}
            #name {color:var(--black)!important;font-size:14px!important;font-weight: 300!important;opacity:0.7}
            #percentage {font-size:16px!important;color: black!important;font-weight:500!important;}
            #slider {opacity: 1!important;background: var(--active-light)!important}
          {% else %}
            #container {background:[[background]]!important;margin-bottom: 12px;}
            #name {color:var(--gray800)!important;font-size:14px!important;font-weight: 300!important;opacity:0.7}
            #percentage {color:var(--gray800)!important;font-size:16px!important;font-weight:500!important;}
            #icon {color: var(--gray800)!important; opacity: 1!important;filter: none;}
          {% endif %}
  light_toggle:
    card:
      type: custom:button-card
      entity: '[[entity]]'
      name: '[[name]]'
      icon: '[[icon]]'
      show_label: true
      state:
        - value: 'on'
          label: Acceso
          styles:
            card:
              - background: var(--active-light)
        - value: 'off'
          label: Spento
          styles:
            card:
              - background: '[[background]]'
            name:
              - color: var(--gray800)
            label:
              - color: var(--gray800)
            icon:
              - color: var(--gray800)
        - value: unavailable
          label: Non Disponibile
          styles:
            card:
              - background: '[[background]]'
            name:
              - color: var(--gray800)
            label:
              - color: var(--gray800)
            icon:
              - color: var(--gray800)
      styles:
        grid:
          - grid-template-columns: 54px 1fr
          - grid-template-areas: '"i n" "i l"'
        icon:
          - width: 24px
          - color: var(--black)
        img_cell:
          - justify-self: start
          - width: 24px
          - height: 24px
          - padding: 0 6px
        label:
          - justify-self: start
          - font-size: 16px
          - font-weight: 500
          - padding-top: 2px
          - color: var(--black)
        card:
          - padding: 18px
          - height: 75px
          - margin-bottom: 12px
        name:
          - justify-self: start
          - font-size: 14px
          - color: var(--black)
          - opacity: 0.7
          - padding-bottom: 2px
button_card_templates:
  room_conditions:
    variables:
      background: var(--popupBG)
      entity: null
      temp: >
        [[[ return Math.round((states['sensor.temperatura_media_interna'].state)
        * 10)/10 + '°' + '<span style="font-size:0.3em">' +
        Math.round((states['sensor.umidita_media_interna'].state) * 10)/10 +
        '%']]]
    show_icon: false
    show_name: false
    show_label: true
    custom_fields:
      temp: '[[[ return variables.temp ]]]'
      graph:
        card:
          type: custom:mini-graph-card
          entities:
            - entity: '[[[ return variables.entity ]]]'
              color: var(--red)
          line_width: 0
          height: 100
          show:
            icon: false
            name: false
            state: false
            legend: false
            labels: false
          card_mod:
            style: |
              ha-card {
                border-style: none;
                background: none;
              }    
    styles:
      grid:
        - grid-template-areas: '"temp"'
        - grid-template-columns: 1fr
        - grid-template-rows: min-content
      card:
        - padding: 24px
        - background: '[[[ return variables.background ]]]'
      custom_fields:
        temp:
          - justify-self: start
          - text-align: left
          - font-size: 66px
          - color: var(--gray800)
          - line-height: 66px
          - font-weight: 300
          - padding: 12px 0 0 0
        graph:
          - position: absolute
          - width: 100%
          - left: 0
          - bottom: 0
  sensor_big_percentage:
    variables:
      entity: var_entity
      name: var_name
      icon: var_icon
      background: var(--popupBG)
      label: var_label
      bar: var_bar
    entity: '[[[ return variables.entity ]]]'
    name: '[[[ return variables.name ]]]'
    label: '[[[ return variables.label ]]]'
    show_icon: true
    show_label: true
    icon: '[[[ return variables.icon ]]]'
    styles:
      card:
        - padding: 0
        - height: 180px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-areas: '"i" "l" "n" "bar"'
      label:
        - justify-self: start
        - font-size: 40px
        - font-weight: 300
        - padding-left: 20px
        - color: var(--gray800)
      name:
        - justify-self: start
        - align-self: start
        - font-size: 14px
        - color: var(--gray800)
        - padding-left: 20px
        - opacity: '0.7'
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
        - margin: 4px 4px 0 0
        - width: 30px
        - height: 30px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray800)
      custom_fields:
        bar:
          - justify-self: start
          - width: 100%
          - background: rgba(var(--highlight))
          - height: 30px
          - margin-top: 6px
    custom_fields:
      bar: '[[[ return variables.bar ]]]'
  sensor_big_graph:
    variables:
      name: null
      icon: null
      label: null
      background: var(--popupBG)
      text: var(--gray800)
      graph: null
    name: '[[[ return variables.name ]]]'
    label: '[[[ return variables.label ]]]'
    show_label: true
    show_icon: true
    icon: '[[[ return variables.icon ]]]'
    styles:
      card:
        - padding: 4px 4px 20px 20px
        - height: 180px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-areas: '"i" "l" "n"'
      label:
        - justify-self: start
        - font-size: 40px
        - font-weight: 300
        - color: var(--gray800)
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray800)
        - opacity: '0.7'
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
        - width: 30px
        - height: 30px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray800)
      custom_fields:
        graph:
          - position: absolute
          - width: 100%
          - left: 0
          - bottom: 0
    custom_fields:
      graph:
        card:
          type: custom:mini-graph-card
          entities:
            - entity: '[[[ return variables.graph ]]]'
              color: var(--red)
          line_width: 0
          height: 200
          show:
            icon: false
            name: false
            state: false
            legend: false
            labels: false
          card_mod:
            style: |
              ha-card {
                border-style: none;
                background: none;
              }
  button_trigger:
    variables:
      name: null
      icon: null
      entity: null
      background: var(--red)
      text: var(--black)
    icon: '[[[ return variables.icon ]]]'
    entity: '[[[ return variables.entity ]]]'
    name: '[[[ return variables.name ]]]'
    styles:
      grid:
        - grid-template-areas: '"i" "n"'
      img_cell:
        - justify-self: start
        - align-self: start
        - width: 24px
        - height: 24px
      icon:
        - width: 24px
        - height: 24px
        - color: '[[[ return variables.text ]]]'
      name:
        - justify-self: start
        - text-align: left
        - font-size: 16px
        - font-weight: 500
        - color: '[[[ return variables.text ]]]'
      card:
        - padding: 20px
        - background: '[[[ return variables.background ]]]'
        - height: 130px
  sensor_big:
    variables:
      name: var_name
      label: var_label
      icon: var_icon
      background: var(--popupBG)
    icon: '[[[ return variables.icon ]]]'
    label: >
      [[[  return '<marquee behavior="alternate" scrollamount="2">' +
      variables.label + '<\marquee>' ]]]
    name: '[[[ return variables.name ]]]'
    show_label: true
    styles:
      card:
        - padding: 20px
        - height: 180px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-areas: '"i" "l" "n"'
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
        - margin: '-16px -16px 0 0'
        - width: 30px
        - height: 30px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray800)
      label:
        - justify-self: start
        - font-size: 2em
        - font-weight: 300
        - color: var(--gray800)
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray800)
        - opacity: '0.7'
  sensor_big_2columns:
    variables:
      name: var_name
      label: var_label
      icon: var_icon
      background: var(--popupBG)
      state: var_state
    icon: '[[[ return variables.icon ]]]'
    label: >
      [[[  return '<marquee behavior="alternate" scrollamount="2">' +
      variables.label + '<\marquee>' ]]]
    name: '[[[ return variables.name ]]]'
    show_label: true
    custom_fields:
      state: '[[[ return variables.state ]]]'
    styles:
      card:
        - padding: 20px
        - height: 180px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-areas: '"i i" "l state" "n n"'
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
        - margin: '-16px -16px 0 0'
        - width: 30px
        - height: 30px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray800)
      label:
        - justify-self: start
        - font-size: 2em
        - font-weight: 300
        - color: var(--gray800)
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray800)
        - opacity: '0.7'
      custom_fields:
        state:
          - font-size: 14px
          - color: var(--gray800)
          - opacity: '0.7'
          - margin-bottom: '-5px'
  button_toggle:
    variables:
      name: null
      icon: null
      entity: null
      background: var(--popupBG)
    icon: '[[[ return variables.icon ]]]'
    entity: '[[[ return variables.entity ]]]'
    name: '[[[ return variables.name ]]]'
    tap_action:
      action: toggle
    state:
      - value: 'off'
        styles:
          card:
            - background: var(--gray800)
          img_cell:
            - background: rgba(var(--highlight_active))
          icon:
            - color: var(--gray000)
          name:
            - color: var(--gray000)
          custom_fields:
            state:
              - color: var(--gray000)
    styles:
      card:
        - padding: 4px 4px 20px 20px
        - height: 180px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-areas: '"i i" "state icon" "n icon"'
        - grid-template-columns: 1fr min-content
        - grid-template-rows: 1fr min-content min-content
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
        - width: 30px
        - height: 30px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray800)
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray800)
        - opacity: '0.7'
      custom_fields:
        icon:
          - justify-self: end
        state:
          - justify-self: start
          - font-size: 40px
          - font-weight: 300
          - color: var(--gray800)
          - margin-right: 16px
    custom_fields:
      icon: |
        [[[
         var state = entity.state;
         if(state == "on")
          return `<ha-icon
          icon="mdi:toggle-switch"
          style="color: var(--green); width:60px; height:60px;">
          </ha-icon>
          `;
         else 
          return `<ha-icon
          icon="mdi:toggle-switch-off"
          style="color: var(--gray000); width:60px; height:60px;">
          </ha-icon>
          `;
        ]]]
      state: |
        [[[
          var state = entity.state
         if(state == "on")
          return `<span>Acceso</san>
          `;
         else 
          return `<span>Spento</san>
          `;
        ]]] 
  button_toggle_small:
    variables:
      name: null
      icon: null
      entity: null
      background: var(--popupBG)
    icon: '[[[ return variables.icon ]]]'
    entity: '[[[ return variables.entity ]]]'
    name: |
      [[[ return variables.name ]]]
    tap_action:
      action: toggle
    state:
      - value: 'off'
        styles:
          card:
            - background: var(--gray800)
          icon:
            - color: var(--gray000)
          img_cell:
            - background: rgba(var(--highlight_active))
          name:
            - color: var(--gray000)
          custom_fields:
            state:
              - color: var(--gray000)
    styles:
      card:
        - height: 66px
        - border-radius: 75px
        - padding: 4px 20px 4px 4px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-columns: 76px 1fr min-content
        - grid-template-areas: '"i state icon" "i n icon"'
      icon:
        - width: 30px
        - color: var(--gray800)
      img_cell:
        - justify-self: start
        - width: 30px
        - height: 30px
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray800)
        - opacity: 0.7
        - padding-bottom: 7px
      custom_fields:
        icon: null
        state:
          - justify-self: start
          - font-size: 16px
          - padding-top: 4px
          - font-weight: 500
          - color: var(--gray800)
    custom_fields:
      icon: |
        [[[
         var state = entity.state;
         if(state == "on")
          return `<ha-icon
          icon="mdi:toggle-switch"
          style="color: var(--green); width:50px; height:40px;">
          </ha-icon>
          `;
         else 
          return `<ha-icon
          icon="mdi:toggle-switch-off"
          style="color: var(--gray000); width:50px; height:40px;">
          </ha-icon>
          `;
        ]]]
      state: |
        [[[
          var state = entity.state
         if(state == "on")
          return `<span>Acceso</san>
          `;
         else 
          return `<span>Spento</san>
          `;
        ]]] 
  chips_big_active:
    variables:
      name: null
      entity: null
      icon: null
    entity: '[[[ return variables.entity ]]]'
    icon: '[[[ return variables.icon ]]]'
    name: '[[[ return variables.name ]]]'
    styles:
      card:
        - padding: 4px
        - background: var(--active-big)
      grid:
        - grid-template-areas: |
            "i n"        
      img_cell:
        - width: 22px
        - height: 22px
        - padding: 9px
        - background: var(--white)
        - border-radius: 100%
      icon:
        - width: 22px
        - height: 22px
        - color: var(--black)
      name:
        - padding: 0 10px
        - font-size: 14px
        - color: var(--black)
  chips_big:
    variables:
      name: null
      entity: null
      icon: null
    entity: '[[[ return variables.entity ]]]'
    icon: '[[[ return variables.icon ]]]'
    name: '[[[ return variables.name ]]]'
    styles:
      card:
        - padding: 4px
        - background: var(--gray800)
      grid:
        - grid-template-areas: |
            "i n"        
        - grid-template-columns: min-content 1fr
      img_cell:
        - justify-self: start
        - width: 22px
        - height: 22px
        - padding: 9px
        - background: var(--gray000)
        - border-radius: 100%
      icon:
        - width: 22px
        - height: 22px
        - color: var(--gray800)
      name:
        - justify-self: start
        - padding: 0 10px
        - font-size: 14px
        - color: var(--gray000)
  chips_medium_active:
    variables:
      name: null
      icon: null
    icon: '[[[ return variables.icon ]]]'
    name: '[[[ return variables.name ]]]'
    styles:
      card:
        - padding: 10px 16px 10px 12px
        - background: var(--active-small)
      grid:
        - grid-template-areas: '"i n"'
        - grid-template-columns: min-content 1fr
      img_cell:
        - justify-self: start
        - align-self: center
        - width: 20px
        - height: 20px
        - background: none
      icon:
        - width: 20px
        - height: 20px
        - margin-top: '-1px'
        - color: var(--black)
      name:
        - justify-self: start
        - font-size: 14px
        - padding-left: 4px
        - color: var(--black)
  chips_medium:
    variables:
      name: null
      icon: null
    icon: '[[[ return variables.icon ]]]'
    name: '[[[ return variables.name ]]]'
    styles:
      card:
        - padding: 10px 16px 10px 12px
        - background: var(--gray800)
      grid:
        - grid-template-areas: '"i n"'
        - grid-template-columns: min-content 1fr
      img_cell:
        - justify-self: start
        - align-self: center
        - width: 20px
        - height: 20px
        - background: none
      icon:
        - width: 20px
        - height: 20px
        - margin-top: '-1px'
        - color: var(--gray000)
      name:
        - justify-self: start
        - font-size: 14px
        - padding-left: 4px
        - color: var(--gray000)
  chips_small:
    variables:
      icon: null
    icon: '[[[ return variables.icon ]]]'
    show_name: false
    styles:
      card:
        - padding: 13px
        - border-radius: 50%
        - background: var(--gray800)
      img_cell:
        - width: 22px
        - height: 22px
      icon:
        - width: 22px
        - height: 22px
        - color: var(--gray000)
  chips_small_active:
    variables:
      icon: null
    icon: '[[[ return variables.icon ]]]'
    show_name: false
    styles:
      card:
        - padding: 13px
        - border-radius: 50%
        - background: var(--active-small)
      img_cell:
        - width: 22px
        - height: 22px
      icon:
        - width: 22px
        - height: 22px
        - color: var(--black)
  room_card:
    variables:
      name: Stue
      icon: mdi:unicorn
      path: '#stue_nede'
      state: null
      background: var(--gray000)
      color: var(--green)
      text: var(--gray800)
      radius: 36px 36px 6px 36px
    icon: '[[[ return variables.icon ]]]'
    name: '[[[ return variables.name ]]]'
    tap_action:
      action: navigate
      navigation_path: '[[[ return variables.path ]]]'
    custom_fields:
      temp: '[[[ return variables.state ]]]'
    styles:
      card:
        - padding: 8px
        - height: 100%
        - border-radius: '[[[ return variables.radius ]]]'
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-areas: '"n i" "temp temp"'
        - grid-template-rows: 1fr min-content
        - grid-template-columns: min-content 1fr
      icon:
        - width: 28px
        - color: var(--black)
      img_cell:
        - justify-self: end
        - background: '[[[ return variables.color ]]]'
        - border-radius: 100%
        - align-self: start
        - width: 60px
        - height: 60px
      name:
        - justify-self: start
        - align-self: start
        - text-align: left
        - font-size: 1em
        - font-weight: 500
        - color: '[[[ return variables.text ]]]'
        - padding: 14px
      custom_fields:
        temp:
          - justify-self: start
          - font-size: 3em
          - line-height: 1em
          - font-weight: 300
          - color: '[[[ return variables.text ]]]'
          - padding: 0 0 6px 14px
  sensor_small:
    variables:
      name: var_name
      label: var_label
      icon: var_icon
      background: var(--popupBG)
      text: var(--gray800)
    name: '[[[ return variables.name ]]]'
    label: '[[[ return variables.label ]]]'
    show_label: true
    icon: '[[[ return variables.icon ]]]'
    styles:
      grid:
        - grid-template-columns: 76px 1fr
        - grid-template-areas: '"i l" "i n"'
      icon:
        - width: 30px
        - color: var(--gray800)
      img_cell:
        - justify-self: start
        - width: 30px
        - height: 30px
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
      label:
        - justify-self: start
        - font-size: 16px
        - padding-top: 4px
        - font-weight: 500
        - color: var(--gray800)
      card:
        - height: 66px
        - border-radius: 75px
        - padding: 4px 20px 4px 4px
        - background: '[[[ return variables.background ]]]'
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray800)
        - opacity: 0.7
        - padding-bottom: 7px
views:
  - icon: mdi:home
    subview: false
    cards:
      - type: vertical-stack
        cards:
          - type: custom:gap-card
            height: 12px
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: min-content 1fr max-content
              grid-template-rows: min-content
              grid-template-areas: |
                "button . weather"
            cards:
              - type: custom:button-card
                view_layout:
                  grid-area: button
                show_name: false
                show_label: false
                icon: mdi:menu
                entity: input_boolean.kiosk_mode
                hold_action:
                  action: toggle
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      this.dispatchEvent(new Event('hass-toggle-menu', { bubbles: true, composed: true}));
                      return none;
                    ]]]          
                styles:
                  icon:
                    - width: 24px
                    - color: var(--contrast20)
                  img_cell:
                    - width: 30px
                    - height: 30px
                    - padding: 6px
                    - justify-self: start
                  card:
                    - height: 100%
                    - background: none
                    - padding: 6px 0
                    - '--mdc-ripple-press-opacity': 0
              - type: custom:button-card
                view_layout:
                  grid-area: weather
                entity: weather.forecast_ronchi_dei_legionari
                show_icon: false
                styles:
                  custom_fields:
                    icon:
                      - justify-self: end
                      - padding-right: 10px
                    desc: null
                  grid:
                    - grid-template-areas: '"icon l" "icon n"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: 10px 40px
                  card:
                    - background: none
                    - padding: 6px 0
                    - overflow: visible
                  name:
                    - justify-self: end
                    - font-size: 14px
                    - color: var(--contrast20)
                  label:
                    - justify-self: end
                    - font-size: 26px
                    - color: var(--contrast20)
                name: |
                  [[[ 
                    // Mappa delle traduzioni degli stati meteo in italiano
                    const conditionsMap = {
                      'partlycloudy': 'Parzialmente nuvoloso',
                      'cloudy': 'Nuvoloso',
                      'rainy': 'Pioggia',
                      'pouring': 'Pioggia intensa',
                      'clear-night': 'Sereno',
                      'sunny': 'Soleggiato',
                      'fog': 'Nebbia',
                      'snowy': 'Neve',
                      'windy': 'Ventoso',
                      'hail': 'Grandine',
                      'lightning': 'Fulmini',
                      'lightning-rainy': 'Fulmini con pioggia',
                      'snowy-rainy': 'Neve mista a pioggia',
                      // Aggiungi altre condizioni se necessario
                    };

                    // Stato meteo dell'entità
                    const state = states['weather.forecast_ronchi_dei_legionari'].state;
                    // Traduci lo stato usando la mappa, o ritorna lo stato originale se non è tradotto
                    return conditionsMap[state] || state;
                  ]]]
                label: |
                  [[[ 
                    return `${parseFloat(entity.attributes.temperature).toFixed(1)}°`
                  ]]]
                show_label: true
                custom_fields:
                  icon: |
                    [[[
                      return '<img src = "/local/icons/meteo/' + entity.state + '.svg" width="100" height="100" />'
                    ]]] 
                tap_action:
                  action: navigate
                  navigation_path: '#weather'
          - type: custom:paper-buttons-row
            styles:
              gap: 8px
              overflow-x: scroll
              margin: 24px 8px 0 8px
            buttons:
              - icon: mdi:folder-key
                layout: icon
                name: Pedonale
                entity: cover.pedonale
                tap_action:
                  action: toggle
                state_styles:
                  close:
                    button:
                      background: var(--active-big)
                    name:
                      color: var(--black)
                    icon:
                      background-color: var(--white)
                      color: var(--black)
                  open:
                    button:
                      background: var(--active-big)
                    name:
                      color: var(--black)
                    icon:
                      background-color: var(--white)
                      color: var(--black)
                  opening:
                    button:
                      background: var(--active-big)
                    name:
                      color: var(--black)
                    icon:
                      background-color: var(--yellow)
                      color: var(--black)
                      animation: blink 1s infinite
                styles:
                  name:
                    padding: 0 10px
                    color: var(--gray000)
                  button:
                    display: flex
                    background-color: var(--gray800)
                    border-radius: 24px
                    color: var(--white)
                    height: 34px
                    margin-right: 100px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:email
                layout: icon
                name: Posta
                entity: binary_sensor.posta
                tap_action:
                  action: navigate
                  navigation_path: '#posta'
                state_styles:
                  'on':
                    button:
                      background: var(--active-big)
                    name:
                      color: var(--black)
                    icon:
                      background-color: var(--yellow)
                      color: var(--black)
                      animation: blink 1s infinite
                  'off':
                    button:
                      background: var(--gray800)
                    name:
                      color: var(--gray000)
                    icon:
                      background-color: var(--gray000)
                      color: var(--gray800)
                styles:
                  name:
                    padding: 0 10px
                  button:
                    display: flex
                    background-color: var(--gray800)
                    border-radius: 50%
                    color: var(--black)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:dishwasher
                layout: icon
                entity: binary_sensor.ac_elettrodomestici_1
                tap_action:
                  action: navigate
                  navigation_path: '#lavastoviglie'
                state_styles:
                  'on':
                    button:
                      background: var(--active-big)
                    name:
                      color: var(--black)
                    icon:
                      background-color: var(--yellow)
                      color: var(--black)
                      animation: blink 1s infinite
                  'off':
                    button:
                      background: var(--gray800)
                    name:
                      color: var(--gray000)
                    icon:
                      background-color: var(--gray000)
                      color: var(--gray800)
                styles:
                  state:
                    padding: 0 10px
                    color: var(--black)
                  button:
                    display: '{{ ''flex'' if is_state(config.entity, ''on'') else ''none'' }}'
                    background: var(--active-big)
                    border-radius: 24px
                    color: var(--black)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:washing-machine
                layout: icon
                entity: binary_sensor.ac_elettrodomestici_2
                tap_action:
                  action: navigate
                  navigation_path: '#lavatrice'
                state_styles:
                  'on':
                    button:
                      background: var(--active-big)
                    name:
                      color: var(--black)
                    icon:
                      background-color: var(--yellow)
                      color: var(--black)
                      animation: blink 1s infinite
                  'off':
                    button:
                      background: var(--gray800)
                    name:
                      color: var(--gray000)
                    icon:
                      background-color: var(--gray000)
                      color: var(--gray800)
                styles:
                  state:
                    padding: 0 10px
                    color: var(--black)
                  button:
                    display: '{{ ''flex'' if is_state(config.entity, ''on'') else ''none'' }}'
                    background: var(--active-big)
                    border-radius: 24px
                    color: var(--black)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:fridge
                layout: icon
                entity: binary_sensor.ac_elettrodomestici_3
                tap_action:
                  action: navigate
                  navigation_path: '#frigorifero'
                state_styles:
                  'on':
                    button:
                      background: var(--active-big)
                    name:
                      color: var(--black)
                    icon:
                      background-color: var(--yellow)
                      color: var(--black)
                      animation: blink 1s infinite
                  'off':
                    button:
                      background: var(--gray800)
                    name:
                      color: var(--gray000)
                    icon:
                      background-color: var(--gray000)
                      color: var(--gray800)
                styles:
                  state:
                    padding: 0 10px
                    color: var(--black)
                  button:
                    display: '{{ ''flex'' if is_state(config.entity, ''on'') else ''none'' }}'
                    background: var(--active-big)
                    border-radius: 24px
                    color: var(--black)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:toaster-oven
                layout: icon
                entity: binary_sensor.ac_elettrodomestici_4
                state_styles:
                  'on':
                    button:
                      background: var(--active-big)
                    name:
                      color: var(--black)
                    icon:
                      background-color: var(--yellow)
                      color: var(--black)
                      animation: blink 1s infinite
                  'off':
                    button:
                      background: var(--gray800)
                    name:
                      color: var(--gray000)
                    icon:
                      background-color: var(--gray000)
                      color: var(--gray800)
                styles:
                  state:
                    padding: 0 10px
                    color: var(--black)
                  button:
                    display: '{{ ''flex'' if is_state(config.entity, ''on'') else ''none'' }}'
                    background: var(--active-big)
                    border-radius: 24px
                    color: var(--black)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:washing-machine
                layout: icon
                entity: binary_sensor.ac_elettrodomestici_5
                state_styles:
                  'on':
                    button:
                      background: var(--active-big)
                    name:
                      color: var(--black)
                    icon:
                      background-color: var(--yellow)
                      color: var(--black)
                      animation: blink 1s infinite
                  'off':
                    button:
                      background: var(--gray800)
                    name:
                      color: var(--gray000)
                    icon:
                      background-color: var(--gray000)
                      color: var(--gray800)
                styles:
                  state:
                    padding: 0 10px
                    color: var(--black)
                  button:
                    display: '{{ ''flex'' if is_state(config.entity, ''on'') else ''none'' }}'
                    background: var(--active-big)
                    border-radius: 24px
                    color: var(--black)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:soundbar
                layout: icon
                name: Soundbar on
                tap_action:
                  action: call-service
                  service: shell_command.soundbar
                  data:
                    transition: 1
                styles:
                  name:
                    padding: 0 10px
                    color: var(--gray000)
                  button:
                    display: flex
                    background-color: var(--gray800)
                    border-radius: 24px
                    color: var(--white)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:sleep
                layout: icon
                name: OFF Luci
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.spegni_tutte_le_luci
                  data:
                    transition: 1
                styles:
                  name:
                    padding: 0 10px
                    color: var(--gray000)
                  button:
                    display: flex
                    background-color: var(--gray800)
                    border-radius: 24px
                    color: var(--white)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:wifi
                layout: icon
                name: Wifi
                ripple: none
                tap_action:
                  action: navigate
                  navigation_path: '#wifi'
                styles:
                  name:
                    padding: 0 10px
                  button:
                    display: flex
                    background-color: var(--gray800)
                    border-radius: 50%
                    color: white
                    height: 34px
                  icon:
                    '--mdc-icon-size': 24px
                    color: var(--gray000)
                    width: 34px
                    height: 34px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
        view_layout:
          grid-area: header
      - type: vertical-stack
        cards:
          - type: custom:gap-card
            height: 48
          - type: custom:local-conditional-card
            id: home
            default: show
            card:
              type: vertical-stack
              cards:
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr max-content max-content max-content
                    grid-template-rows: min-content
                    grid-template-areas: |
                      "one two three four five"  
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: TEMPERATURE
                      styles:
                        card:
                          - background: none
                          - padding: 14px 0 15px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: center
                          - align-self: center
                    - type: custom:button-card
                      template: chips_big
                      view_layout:
                        grid-area: five
                      variables:
                        icon: mdi:shield-account
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: hide
                            - tapparelle: hide
                            - clima: hide
                            - allarme: show
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: four
                      variables:
                        icon: mdi:home-thermometer
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: hide
                            - tapparelle: hide
                            - allarme: hide
                            - clima: show
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: two
                      variables:
                        icon: mdi:home-flood
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: show
                            - tapparelle: hide
                            - allarme: hide
                            - clima: hide
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: three
                      variables:
                        icon: mdi:roller-shade
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: hide
                            - tapparelle: show
                            - allarme: hide
                            - clima: hide
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr 1fr
                    grid-template-rows: 146px 70px 146px
                    grid-template-areas: |
                      "stue kjokken"
                      "stue sensori"
                      "gang sensori"    
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: stue
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Temperatura<br>Media In Casa']]]
                        icon: mdi:thermometer
                        path: '#temperature_medie'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatura_media_interna'].state;
                            var hum = states['sensor.umidita_media_interna'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--green)
                        text: var(--gray800)
                        radius: 36px 36px 6px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: kjokken
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Cucina']]]
                        icon: mdi:silverware-variant
                        path: '#cucina'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatura_media_interna'].state;
                            var hum = states['sensor.umidita_media_interna'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--blue)
                        text: var(--gray800)
                        radius: 36px 36px 36px 6px
                    - type: custom:button-card
                      view_layout:
                        grid-area: sensori
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Salone']]]
                        icon: mdi:sofa
                        path: '#salone'
                        state: |
                          [[[ 
                              var temp = states['sensor.temperatura_vindriktning'].state;
                              var hum = states['sensor.umidita_vindriktning'].state;
                              var aqi = states['sensor.qualita_aria_aqi'].state;
                              var pm25 = states['sensor.concentrazione_di_particolato_25_um'].state;

                              return `
                               <span style="font-size: 1.2em;">${parseFloat(temp).toFixed(0)}°</span>
                               <span style="font-size: 0.8em; opacity: 0.7;"> ${parseFloat(hum).toFixed(0)}%</span><br>
                               <span style="font-size: 0.3em;">AQI: ${aqi}</span> 
                               <span style="font-size: 0.3em;">${pm25}µm</span>
                               `;
                            ]]]
                        background: var(--gray000)
                        color: var(--orange)
                        text: var(--gray800)
                        radius: 6px 36px 36px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: gang
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Ingresso']]]
                        icon: mdi:door
                        path: '#gang'
                        state: |
                          [[[ 
                            var temp = states['sensor.temperatura_vindriktning'].state;
                            var hum = states['sensor.umidita_vindriktning'].state;
                            var aqi = states['sensor.concentrazione_di_particolato_25_um'].state;
                            
                            return `
                            ${parseFloat(temp).toFixed(0)}°
                            <span style="font-size:0.3em;opacity:0.7">
                            ${parseFloat(hum).toFixed(0)}% 
                            ${parseFloat(aqi).toFixed(0)}µm AQI</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--yellow)
                        text: var(--gray800)
                        radius: 36px 6px 36px 36px
              columns: 1
          - type: custom:local-conditional-card
            id: allagamento
            default: hide
            card:
              type: vertical-stack
              cards:
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr max-content max-content max-content
                    grid-template-rows: min-content
                    grid-template-areas: |
                      "one two three four five"  
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: ALLAGAMENTO
                      styles:
                        card:
                          - background: none
                          - padding: 14px 0 15px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: center
                          - align-self: center
                    - type: custom:button-card
                      template: chips_big
                      view_layout:
                        grid-area: five
                      variables:
                        icon: mdi:shield-account
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: hide
                            - tapparelle: hide
                            - allarme: show
                            - clima: hide
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: four
                      variables:
                        icon: mdi:home-thermometer
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: hide
                            - tapparelle: hide
                            - allarme: hide
                            - clima: show
                    - type: custom:button-card
                      template: chips_small_active
                      view_layout:
                        grid-area: two
                      variables:
                        icon: mdi:home-flood
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: show
                            - allagamento: hide
                            - tapparelle: hide
                            - allarme: hide
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: three
                      variables:
                        icon: mdi:roller-shade
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: hide
                            - tapparelle: show
                            - allarme: hide
                            - clima: hide
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr 1fr
                    grid-template-rows: 146px 70px 146px
                    grid-template-areas: |
                      "stue kjokken"
                      "stue badn"
                      "gang badn"    
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: stue
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Bagno<br>Verde']]]
                        icon: mdi:shower-head
                        path: '#bagni'
                        state: >
                          [[[ 

                          return
                          states['binary_sensor.bagno_verde_allagamento_umidita'].state
                          === 'on' 

                          ? 'Allagato' 

                          : 'Asciutto';
                           ]]]
                        background: var(--gray000)
                        color: var(--green)
                        text: var(--gray800)
                        radius: 36px 36px 6px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: kjokken
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Bagno Rosa']]]
                        icon: mdi:bathtub-outline
                        path: '#bagni'
                        state: >
                          [[[ 

                          return
                          states['binary_sensor.bagno_rosa_antiallagamento_umidita'].state
                          === 'on' 

                          ? 'Allagato' 

                          : 'Asciutto';
                           ]]]
                        background: var(--gray000)
                        color: var(--blue)
                        text: var(--gray800)
                        radius: 36px 36px 36px 6px
                    - type: custom:button-card
                      view_layout:
                        grid-area: badn
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Cucina']]]
                        icon: mdi:silverware
                        path: '#cucina'
                        state: >
                          [[[ 

                          return
                          states['binary_sensor.cucina_antiallagamento_umidita'].state
                          === 'on' 

                          ? 'Allagato' 

                          : 'Asciutto';
                           ]]]
                        background: var(--gray000)
                        color: var(--blue-dark)
                        text: var(--gray800)
                        radius: 6px 36px 36px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: gang
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Garage']]]
                        icon: mdi:garage-alert
                        path: '#garage'
                        state: >
                          [[[ 


                          return
                          states['binary_sensor.cucina_antiallagamento_umidita'].state

                          === 'on' 


                          ? 'Allagato' 


                          : 'Asciutto';
                           ]]]
                        background: var(--gray000)
                        color: var(--yellow)
                        text: var(--gray800)
                        radius: 36px 6px 36px 36px
              columns: 1
          - type: custom:local-conditional-card
            id: tapparelle
            default: hide
            card:
              type: vertical-stack
              cards:
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr max-content max-content max-content
                    grid-template-rows: min-content
                    grid-template-areas: |
                      "one two three four five"  
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: TAPPARELLE
                      styles:
                        card:
                          - background: none
                          - padding: 14px 0 15px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: center
                          - align-self: center
                    - type: custom:button-card
                      template: chips_big
                      view_layout:
                        grid-area: five
                      variables:
                        icon: mdi:shield-account
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: hide
                            - tapparelle: hide
                            - allarme: show
                            - clima: hide
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: four
                      variables:
                        icon: mdi:home-thermometer
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: hide
                            - tapparelle: hide
                            - allarme: hide
                            - clima: show
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: two
                      variables:
                        icon: mdi:home-flood
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: show
                            - tapparelle: hide
                            - allarme: hide
                            - clima: hide
                    - type: custom:button-card
                      template: chips_small_active
                      view_layout:
                        grid-area: three
                      variables:
                        icon: mdi:roller-shade
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: show
                            - allagamento: hide
                            - tapparelle: hide
                            - allarme: hide
                            - clima: hide
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr 1fr
                    grid-template-rows: 146px 70px 146px
                    grid-template-areas: |
                      "sensori sov"
                      "sensori bado"
                      "barn bado"    
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: sensori
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Salone']]]
                        icon: mdi:roller-shade
                        path: '#tapparellasalone'
                        state: |
                          [[[    
                            const entitycover = states['cover.tapparella_salone'];
                            if (entitycover && entitycover.attributes && entitycover.attributes.current_position !== undefined) {
                              const position = entitycover.attributes.current_position;


                                  if (position === 0) {
                                    return 'Chiusa';
                                  }
                                  if (position === 100) {
                                    return 'Aperta';
                                  }
                                  
                                  // Restituisce la percentuale di apertura per valori intermedi
                                  return position + '% aperta';
                                } else {
                                  // Restituisce un valore predefinito se l'entità non esiste o 'current_position' non è disponibile
                                  return 'Informazione non disponibile';
                                }
                          ]]]
                        background: var(--gray000)
                        color: var(--orange)
                        text: var(--gray800)
                        radius: 36px 36px 6px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: barn
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Cucina']]]
                        icon: mdi:roller-shade
                        path: '#tapparella_cucina'
                        state: |
                          [[[    
                            const entitycover = states['cover.tapparella_cucina'];
                            if (entitycover && entitycover.attributes && entitycover.attributes.current_position !== undefined) {
                              const position = entitycover.attributes.current_position;


                                  if (position === 0) {
                                    return 'Chiusa';
                                  }
                                  if (position === 100) {
                                    return 'Aperta';
                                  }
                                  
                                  // Restituisce la percentuale di apertura per valori intermedi
                                  return position + '% aperta';
                                } else {
                                  // Restituisce un valore predefinito se l'entità non esiste o 'current_position' non è disponibile
                                  return 'Informazione non disponibile';
                                }
                          ]]]
                        background: var(--gray000)
                        color: var(--pink)
                        text: var(--gray800)
                        radius: 36px 6px 36px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: sov
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Camera da Letto']]]
                        icon: mdi:roller-shade
                        path: '#tapparella_camera'
                        state: |
                          [[[    
                            const entitycover = states['cover.tapparella_camera_da_letto'];
                            if (entitycover && entitycover.attributes && entitycover.attributes.current_position !== undefined) {
                              const position = entitycover.attributes.current_position;


                                  if (position === 0) {
                                    return 'Chiusa';
                                  }
                                  if (position === 100) {
                                    return 'Aperta';
                                  }
                                  
                                  // Restituisce la percentuale di apertura per valori intermedi
                                  return position + '% aperta';
                                } else {
                                  // Restituisce un valore predefinito se l'entità non esiste o 'current_position' non è disponibile
                                  return 'Informazione non disponibile';
                                }
                          ]]]
                        background: var(--gray000)
                        color: var(--purple)
                        text: var(--gray800)
                        radius: 36px 36px 36px 6px
                    - type: custom:button-card
                      view_layout:
                        grid-area: bado
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Cameretta']]]
                        icon: mdi:roller-shade
                        path: '#tapparella_cameretta'
                        state: |
                          [[[    
                            const entitycover = states['cover.cameretta'];
                            if (entitycover && entitycover.attributes && entitycover.attributes.current_position !== undefined) {
                              const position = entitycover.attributes.current_position;

                                  if (position === 0) {
                                    return 'Chiusa';
                                  }
                                  if (position === 100) {
                                    return 'Aperta';
                                  }
                                  
                                  // Restituisce la percentuale di apertura per valori intermedi
                                  return position + '% aperta';
                                } else {
                                  // Restituisce un valore predefinito se l'entità non esiste o 'current_position' non è disponibile
                                  return 'Informazione non disponibile';
                                }
                          ]]]
                        background: var(--gray000)
                        color: var(--red)
                        text: var(--gray800)
                        radius: 6px 36px 36px 36px
              columns: 1
          - type: custom:local-conditional-card
            id: clima
            default: hide
            card:
              type: vertical-stack
              cards:
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr max-content max-content max-content
                    grid-template-rows: min-content
                    grid-template-areas: |
                      "one two three four five"  
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: CLIMA
                      styles:
                        card:
                          - background: none
                          - padding: 14px 0 15px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: center
                          - align-self: center
                    - type: custom:button-card
                      template: chips_small_active
                      view_layout:
                        grid-area: four
                      variables:
                        icon: mdi:home-thermometer
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: show
                            - allagamento: hide
                            - tapparelle: hide
                            - allarme: hide
                            - clima: hide
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: five
                      variables:
                        icon: mdi:shield-account
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: hide
                            - tapparelle: hide
                            - allarme: show
                            - clima: hide
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: two
                      variables:
                        icon: mdi:home-flood
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: show
                            - tapparelle: hide
                            - allarme: hide
                            - clima: hide
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: three
                      variables:
                        icon: mdi:roller-shade
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: hide
                            - tapparelle: show
                            - allarme: hide
                            - clima: hide
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr 1fr
                    grid-template-rows: 146px 70px 146px
                    grid-template-areas: |
                      "stue kjokken"
                      "stue sensori"
                      "gang sensori"    
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: stue
                      template: room_card
                      entity: climate.raffreddamento
                      tap_action:
                        action: more-info
                      variables:
                        name: |
                          [[[ return 'Climatizzatore' ]]]
                        icon: mdi:snowflake
                        state: |
                          [[[ 
                             var climate_state = states['climate.raffreddamento'].state;

                             switch (climate_state) {
                               case 'off':
                                 return 'Spento';
                               case 'cool':
                                 return 'Freddo';
                               case 'heat':
                                 return 'Caldo';
                               case 'fan_only':
                                 return 'Solo Ventola';
                               case 'dry':
                                 return 'Deumidificatore';
                               case 'auto':
                                 return 'Auto';
                               case 'idle':
                                 return 'Inattivo';
                               case 'heat_cool':
                                 return 'Caldo/Freddo';
                               default:
                                 return 'Stato Sconosciuto';
                             }
                          ]]]
                      styles:
                        card:
                          - animation: |
                              [[[ 
                                var climate_state = states['climate.raffreddamento'].state;
                                if (climate_state === 'dry' || climate_state === 'cool' || climate_state === 'heat') {
                                  return 'pulse 1s infinite';  // Lampeggia per gli stati attivi
                                } else {
                                  return 'none';
                                }
                              ]]]
                          - box-shadow: |
                              [[[ 
                                var climate_state = states['climate.raffreddamento'].state;

                                switch (climate_state) {
                                  case 'cool':
                                    return '0 0 15px 5px rgba(0, 0, 255, 0.7)';  // Blur blu per raffreddamento
                                  case 'heat':
                                    return '0 0 15px 5px rgba(255, 0, 0, 0.7)';  // Blur rosso per riscaldamento
                                  case 'dry':
                                    return '0 0 15px 5px rgba(255, 165, 0, 0.7)';  // Blur arancione per deumidificatore
                                  case 'auto':
                                    return '0 0 15px 5px rgba(0, 255, 0, 0.7)';  // Blur verde per modalità automatica
                                  default:
                                    return 'none';  // Nessun effetto per stato off o idle
                                }
                              ]]]
                      background: |
                        [[[ 
                          var climate_state = states['climate.raffreddamento'].state;

                          switch (climate_state) {
                            case 'cool':
                              return 'blue';  // Colore blu per raffreddamento
                            case 'heat':
                              return 'red';  // Colore rosso per riscaldamento
                            case 'dry':
                              return 'orange';  // Colore arancione per deumidificatore
                            case 'auto':
                              return 'green';  // Colore verde per modalità automatica
                            default:
                              return 'var(--gray000)';  // Colore di default
                          }
                        ]]]
                      extra_styles: |
                        @keyframes pulse {
                          0% {
                            box-shadow: 0 0 15px 5px rgba(255, 0, 0, 0.7);  /* Rosso per "heat" */
                          }
                          50% {
                            box-shadow: 0 0 20px 10px rgba(255, 0, 0, 0.4); /* Effetto più debole */
                          }
                          100% {
                            box-shadow: 0 0 15px 5px rgba(255, 0, 0, 0.7); /* Torna alla condizione originale */
                          }
                        }
                    - type: custom:button-card
                      view_layout:
                        grid-area: kjokken
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Temperatura<br> Interna']]]
                        icon: mdi:thermometer
                        path: '#kjokken'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatura_media_interna'].state;
                            var hum = states['sensor.umidita_media_interna'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--blue)
                        text: var(--gray800)
                        radius: 36px 36px 36px 6px
                      card_mod:
                        style: |
                          ha-card {
                            border: 0px solid white;
                            background: rgba(255, 255, 255, 0);
                            padding: 0;
                            box-shadow: 
                              0 0 5px rgba(255, 255, 255, 0.3), 
                              0 0 5px rgba(255, 255, 255, 0.3), 
                              0 0 10px rgba(255, 255, 255, 0.3), 
                              0 0 10px rgba(255, 255, 255, 0.3);
                            position: relative;
                            animation: neon-animation 5s infinite linear;
                            --neon-color: 
                              {% if states('sensor.temperatura_media_interna') | float <= 10 %}
                                lightgreen
                              {% elif states('sensor.temperatura_media_interna') | float <= 20 %}
                                orange
                              {% else %}
                               gold
                              {% endif %};
                          }

                          @keyframes neon-animation {
                            0% {
                              box-shadow: 
                                0 0 5px var(--neon-color), 
                                0 0 5px var(--neon-color), 
                                0 0 10px var(--neon-color), 
                                0 0 10px var(--neon-color);
                            }
                            25% {
                              box-shadow: 
                                5px 0 5px var(--neon-color), 
                                5px 0 5px var(--neon-color), 
                                10px 0 10px var(--neon-color), 
                                10px 0 10px var(--neon-color);
                            }
                            50% {
                              box-shadow: 
                                0 5px 5px var(--neon-color), 
                                0 5px 5px var(--neon-color), 
                                0 10px 10px var(--neon-color), 
                                0 10px 10px var(--neon-color);
                            }
                            75% {
                              box-shadow: 
                                -5px 0 5px var(--neon-color), 
                                -5px 0 5px var(--neon-color), 
                                -10px 0 10px var(--neon-color), 
                                -10px 0 10px var(--neon-color);
                            }
                            100% {
                              box-shadow: 
                                0 -5px 5px var(--neon-color), 
                                0 -5px 5px var(--neon-color), 
                                0 -10px 10px var(--neon-color), 
                                0 -10px 10px var(--neon-color);
                            }
                          }
                    - type: custom:button-card
                      view_layout:
                        grid-area: sensori
                      template: room_card
                      entity: climate.riscaldamento
                      tap_action:
                        action: more-info
                      variables:
                        name: |
                          [[[ return 'Riscaldamento<br>Gas Metano' ]]]
                        icon: mdi:fire
                        state: |
                          [[[ 
                             var climate_state = states['climate.riscaldamento'].state;

                             switch (climate_state) {
                               case 'off':
                                 return 'Spento';
                               case 'cool':
                                 return 'Freddo';
                               case 'heat':
                                 return 'Caldo';
                               case 'fan_only':
                                 return 'Solo Ventola';
                               case 'dry':
                                 return 'Deumidificatore';
                               case 'auto':
                                 return 'Automatica';
                               case 'idle':
                                 return 'Inattivo';
                               case 'heat_cool':
                                 return 'Caldo/Freddo';
                               default:
                                 return 'Stato Sconosciuto';
                             }
                          ]]]
                      styles:
                        card:
                          - animation: |
                              [[[ 
                                var climate_state = states['climate.riscaldamento'].state;
                                if (climate_state === 'heat') {
                                  return 'pulse 1s infinite';  // Lampeggia per il riscaldamento
                                } else {
                                  return 'none';
                                }
                              ]]]
                          - box-shadow: |
                              [[[ 
                                var climate_state = states['climate.riscaldamento'].state;

                                switch (climate_state) {
                                  case 'cool':
                                    return '0 0 15px 5px rgba(0, 0, 255, 0.7)';  // Blur blu per raffreddamento
                                  case 'heat':
                                    return '0 0 15px 5px rgba(255, 0, 0, 0.7)';  // Blur rosso per riscaldamento
                                  case 'dry':
                                    return '0 0 15px 5px rgba(255, 165, 0, 0.7)';  // Blur arancione per deumidificatore
                                  case 'auto':
                                    return '0 0 15px 5px rgba(0, 255, 0, 0.7)';  // Blur verde per modalità automatica
                                  default:
                                    return 'none';  // Nessun effetto per stato off o idle
                                }
                              ]]]
                      background: |
                        [[[ 
                          var climate_state = states['climate.riscaldamento'].state;

                          switch (climate_state) {
                            case 'cool':
                              return 'blue';  // Colore blu per raffreddamento
                            case 'heat':
                              return 'red';  // Colore rosso per riscaldamento
                            case 'dry':
                              return 'orange';  // Colore arancione per deumidificatore
                            case 'auto':
                              return 'green';  // Colore verde per modalità automatica
                            default:
                              return 'var(--gray000)';  // Colore di default
                          }
                        ]]]
                      extra_styles: |
                        @keyframes pulse {
                          0% {
                            box-shadow: 0 0 15px 5px rgba(255, 0, 0, 0.7);  /* Rosso per "heat" */
                          }
                          50% {
                            box-shadow: 0 0 20px 10px rgba(255, 0, 0, 0.4); /* Effetto più debole */
                          }
                          100% {
                            box-shadow: 0 0 15px 5px rgba(255, 0, 0, 0.7); /* Torna alla condizione originale */
                          }
                        }
                    - type: custom:button-card
                      view_layout:
                        grid-area: gang
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Temperatura<br>Esterna']]]
                        icon: mdi:home-thermometer
                        path: '#gang'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatura_esterna'].state;
                            var hum = states['sensor.umidita_esterna'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--yellow)
                        text: var(--gray800)
                        radius: 36px 6px 36px 36px
                      card_mod:
                        style: |
                          ha-card {
                            border: 0px solid white;
                            background: rgba(255, 255, 255, 0);
                            padding: 0;
                            box-shadow: 
                              0 0 5px rgba(255, 255, 255, 0.3), 
                              0 0 5px rgba(255, 255, 255, 0.3), 
                              0 0 10px rgba(255, 255, 255, 0.3), 
                              0 0 10px rgba(255, 255, 255, 0.3);
                            position: relative;
                            animation: neon-animation 5s infinite linear;
                            --neon-color: 
                              {% if states('sensor.temperatura_esterna') | float <= 10 %}
                                lightgreen
                              {% elif states('sensor.temperatura_esterna') | float <= 20 %}
                                orange
                              {% else %}
                               gold
                              {% endif %};
                          }

                          @keyframes neon-animation {
                            0% {
                              box-shadow: 
                                0 0 5px var(--neon-color), 
                                0 0 5px var(--neon-color), 
                                0 0 10px var(--neon-color), 
                                0 0 10px var(--neon-color);
                            }
                            25% {
                              box-shadow: 
                                5px 0 5px var(--neon-color), 
                                5px 0 5px var(--neon-color), 
                                10px 0 10px var(--neon-color), 
                                10px 0 10px var(--neon-color);
                            }
                            50% {
                              box-shadow: 
                                0 5px 5px var(--neon-color), 
                                0 5px 5px var(--neon-color), 
                                0 10px 10px var(--neon-color), 
                                0 10px 10px var(--neon-color);
                            }
                            75% {
                              box-shadow: 
                                -5px 0 5px var(--neon-color), 
                                -5px 0 5px var(--neon-color), 
                                -10px 0 10px var(--neon-color), 
                                -10px 0 10px var(--neon-color);
                            }
                            100% {
                              box-shadow: 
                                0 -5px 5px var(--neon-color), 
                                0 -5px 5px var(--neon-color), 
                                0 -10px 10px var(--neon-color), 
                                0 -10px 10px var(--neon-color);
                            }
                          }
              theme: Mushroom Square Shadow
              columns: 1
            persist_state: false
          - type: custom:local-conditional-card
            id: allarme
            default: hide
            card:
              type: vertical-stack
              cards:
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr max-content max-content max-content
                    grid-template-rows: min-content
                    grid-template-areas: |
                      "one two three four five"  
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: ALLARME
                      styles:
                        card:
                          - background: none
                          - padding: 14px 0 15px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: center
                          - align-self: center
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: four
                      variables:
                        icon: mdi:home-thermometer
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: hide
                            - tapparelle: hide
                            - allarme: hide
                            - clima: show
                    - type: custom:button-card
                      template: chips_small_active
                      view_layout:
                        grid-area: five
                      variables:
                        icon: mdi:shield-account
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: show
                            - allagamento: hide
                            - tapparelle: hide
                            - allarme: hide
                            - clima: hide
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: two
                      variables:
                        icon: mdi:home-flood
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: show
                            - tapparelle: hide
                            - allarme: hide
                            - clima: hide
                    - type: custom:button-card
                      template: chips_small
                      view_layout:
                        grid-area: three
                      variables:
                        icon: mdi:roller-shade
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - home: hide
                            - allagamento: hide
                            - tapparelle: show
                            - allarme: hide
                            - clima: hide
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr 1fr
                    grid-template-rows: 146px 70px 146px
                    grid-template-areas: |
                      "stue kjokken"
                      "stue badn"
                      "gang badn"    
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: stue
                      template: room_card
                      entity: alarm_control_panel.alarmo
                      tap_action:
                        action: navigate
                        navigation_path: '#allarme'
                      variables:
                        name: |
                          [[[ return 'ALLARME' ]]]
                        icon: mdi:shield-account
                        state: |
                          [[[ 
                            var alarm_state = states['alarm_control_panel.alarmo'].state;

                            switch (alarm_state) {
                              case 'disarmed':
                                return 'OFF';
                              case 'armed_home':
                              case 'armed_away':
                              case 'armed_night':
                              case 'armed_vacation':
                              case 'armed_custom_bypass':
                                return 'Attivo';
                              case 'pending':
                                return 'In attesa';
                              case 'arming':
                                return 'In attivazione';
                              case 'disarming':
                                return 'In disattivazione';
                              case 'triggered':
                                return 'Allarme<br>Incorso';
                              default:
                                return 'Stato Sconosciuto';
                            }
                          ]]]
                      styles:
                        card:
                          - border-radius: 36px 36px 6px 36px
                          - animation: |
                              [[[
                                var alarm_state = states['alarm_control_panel.alarmo'].state;
                                if (alarm_state === 'triggered') {
                                  return 'pulse-red 1s infinite';  // Effetto di pulsazione rossa per allarme scattato
                                } else if (alarm_state.startsWith('armed')) {
                                  return 'neon-green 3s infinite';  // Effetto neon verde per allarme attivo
                                } else {
                                  return 'none';  // Nessun effetto per gli altri stati
                                }
                              ]]]
                      card_mod:
                        style: |
                          ha-card {
                            position: relative;
                            background: var(--gray000);
                            color: var(--green);
                            text-align: center;
                          }

                          @keyframes pulse-red {
                            0% {
                              box-shadow: 0 0 10px 5px rgba(255, 0, 0, 0.7);  /* Inizio pulsazione rossa */
                            }
                            50% {
                              box-shadow: 0 0 15px 10px rgba(255, 0, 0, 0.5); /* Effetto massimo */
                            }
                            100% {
                              box-shadow: 0 0 10px 5px rgba(255, 0, 0, 0.7);  /* Fine pulsazione */
                            }
                          }

                          @keyframes neon-green {
                            0% {
                              box-shadow: 0 0 5px rgba(0, 255, 0, 0.7), 0 0 10px rgba(0, 255, 0, 0.7);
                            }
                            50% {
                              box-shadow: 0 0 15px rgba(0, 255, 0, 0.4), 0 0 30px rgba(0, 255, 0, 0.4);
                            }
                            100% {
                              box-shadow: 0 0 5px rgba(0, 255, 0, 0.7), 0 0 10px rgba(0, 255, 0, 0.7);
                            }
                          }
                    - type: custom:button-card
                      view_layout:
                        grid-area: kjokken
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Rilevamento<br>Fulmini' ]]]
                        icon: mdi:weather-lightning
                        path: '#lightning_alerts'
                        state: |
                          [[[ 
                            var lightning_count = states['sensor.blitzortung_lightning_counter'].state;
                            var lightning_distance = states['sensor.blitzortung_lightning_distance'].state;
                            return `
                              <div style="text-align: left;">
                                <div style="font-size: 0.6em;">${lightning_count}</div>
                                <div style="font-size: 0.3em;">: ${parseFloat(lightning_distance).toFixed(1)} km</div>
                              </div>
                            `;
                          ]]]
                      styles:
                        card:
                          - border-radius: 36px 36px 36px 6px
                          - animation: |
                              [[[
                                var lightning_count = states['sensor.blitzortung_lightning_counter'].state;
                                if (parseInt(lightning_count, 10) >= 1) {
                                  return 'pulse-blue 1.5s infinite';  // Lampeggiamento blu elettrico
                                } else {
                                  return 'none';  // Nessun effetto se non ci sono fulmini
                                }
                              ]]]
                      card_mod:
                        style: |
                          ha-card {
                            position: relative;
                            background: var(--gray000);
                            color: var(--blue);
                            text-align: center;
                          }

                          @keyframes pulse-blue {
                            0% {
                              box-shadow: 0 0 10px 5px rgba(0, 0, 255, 0.7);  /* Inizio pulsazione blu elettrico */
                            }
                            50% {
                              box-shadow: 0 0 15px 10px rgba(0, 0, 255, 0.5); /* Effetto massimo */
                            }
                            100% {
                              box-shadow: 0 0 10px 5px rgba(0, 0, 255, 0.7);  /* Fine pulsazione */
                            }
                          }
                    - type: custom:button-card
                      view_layout:
                        grid-area: badn
                      template: room_card
                      tap_action:
                        action: navigate
                        navigation_path: '#pir'
                      variables:
                        name: |
                          [[[ return 'Movimento']]]
                        icon: mdi:motion-sensor
                        state: |
                          [[[ 
                            var pirs = [
                              'binary_sensor.pir_disimpegno',
                              'binary_sensor.pir_soggiorno',
                              'binary_sensor.cucina_pir_apertura',
                              'binary_sensor.cameretta_pir_movimento',
                              'binary_sensor.camera_da_letto_pir_movimento'
                            ];
                           var states_list = pirs.map(function(pir) {
                              return states[pir] ? states[pir].state : 'unknown';
                            });
                           var on_count = states_list.filter(function(state) {
                              return state === 'on';
                            }).length;
                            return on_count > 0 ? 'Rilevato' : 'Libero';
                          ]]]   
                        background: var(--gray000)
                        color: var(--green)
                        text: var(--gray800)
                        radius: 36px 36px 6px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: gang
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Porte/Finestre<br>Aperte' ]]]
                        icon: |
                          [[[ 
                            var countf = states['sensor.finestre_aperte'].state;
                            switch (parseInt(countf)) {
                              case 1:
                                return 'mdi:numeric-1-circle-outline';
                              case 2:
                                return 'mdi:numeric-2-circle-outline';
                              case 3:
                                return 'mdi:numeric-3-circle-outline';
                              case 4:
                                return 'mdi:numeric-4-circle-outline';
                              case 5:
                                return 'mdi:numeric-5-circle-outline';
                              case 6:
                                return 'mdi:numeric-6-circle-outline';
                              case 7:
                                return 'mdi:numeric-7-circle-outline';
                              default:
                                return 'mdi:numeric-0-circle-outline';
                            }
                          ]]]
                        path: '#portefinestre'
                        state: |
                          [[[ 
                            var countf = states['sensor.finestre_aperte'].state;
                            return `
                              <div style="text-align: left;">
                                <div>${countf}</div>
                              </div>
                            `;
                          ]]]
                      background: var(--gray000)
                      color: var(--yellow)
                      text: var(--gray800)
                      radius: 36px 6px 36px 36px
            persist_state: false
          - type: custom:gap-card
            height: 48
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: separator
                styles: |
                  .separator-container div:last-child {
                    opacity: 1!important;
                  }
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    name: Salone
                    icon: mdi:sofa
                    entity: sensor.temperatura_vindriktning
                    tap_action:
                      action: navigate
                      navigation_path: '#salone'
                    show_label: false
                    show_state: true
                    styles:
                      grid:
                        - grid-template-areas: '"i n arrow" "i s arrow"'
                        - grid-template-columns: 40px 1fr 40px
                      icon:
                        - width: 24px
                        - color: black
                      img_cell:
                        - border_radius: 515px
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - font-size: 20px
                        - font-weight: 500
                        - padding-left: 0px
                      card:
                        - margin: 10
                        - border-radius: 15px
                        - padding: 10px 10px 10px 4px
                      state:
                        - justify-self: start
                        - font-size: 20px
                        - color: null
                        - opacity: '0.8'
                        - padding-left: 10px
                    card_mod:
                      style: |
                        ha-card {
                          border: 0px solid white;
                          background: rgba(255, 255, 255, 0);
                          padding: 0;
                          box-shadow: 
                            0 0 5px rgba(255, 255, 255, 0.3), 
                            0 0 5px rgba(255, 255, 255, 0.3), 
                            0 0 10px rgba(255, 255, 255, 0.3), 
                            0 0 10px rgba(255, 255, 255, 0.3);
                          position: relative;
                          animation: neon-animation 5s infinite linear;
                          --neon-color: 
                            {% if states('switch.salone_2') == 'on' %}
                              lightgreen
                            {% else %}
                             gray
                            {% endif %};
                        }

                        @keyframes neon-animation {
                          0% {
                            box-shadow: 
                              0 0 5px var(--neon-color), 
                              0 0 5px var(--neon-color), 
                              0 0 10px var(--neon-color), 
                              0 0 10px var(--neon-color);
                          }
                          25% {
                            box-shadow: 
                              5px 0 5px var(--neon-color), 
                              5px 0 5px var(--neon-color), 
                              10px 0 10px var(--neon-color), 
                              10px 0 10px var(--neon-color);
                          }
                          50% {
                            box-shadow: 
                              0 5px 5px var(--neon-color), 
                              0 5px 5px var(--neon-color), 
                              0 10px 10px var(--neon-color), 
                              0 10px 10px var(--neon-color);
                          }
                          75% {
                            box-shadow: 
                              -5px 0 5px var(--neon-color), 
                              -5px 0 5px var(--neon-color), 
                              -10px 0 10px var(--neon-color), 
                              -10px 0 10px var(--neon-color);
                          }
                          100% {
                            box-shadow: 
                              0 -5px 5px var(--neon-color), 
                              0 -5px 5px var(--neon-color), 
                              0 -10px 10px var(--neon-color), 
                              0 -10px 10px var(--neon-color);
                          }
                        }
                  - type: custom:button-card
                    name: Cucina
                    icon: mdi:silverware-fork-knife
                    entity: sensor.cucina_lywsd03mmc_temperatura
                    custom_field:
                      arrow: |
                        [[[
                          return '<ha-icon
                            icon="mdi:chevron-right"
                            style="width:16px; height: 16px;" >
                            </ha-icon>'
                        ]]]
                    tap_action:
                      action: navigate
                      navigation_path: '#cucina'
                    show_label: false
                    show_state: true
                    styles:
                      grid:
                        - grid-template-areas: '"i n arrow" "i s arrow"'
                        - grid-template-columns: 40px 1fr 40px
                      icon:
                        - width: 24px
                        - color: black
                      img_cell:
                        - border_radius: 515px
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - font-size: 11px
                        - font-weight: 500
                        - padding-left: 0px
                      card:
                        - margin: 10
                        - border-radius: 15px
                        - padding: 10px 10px 10px 4px
                      state:
                        - justify-self: start
                        - font-size: 14px
                        - color: null
                        - opacity: '0.8'
                        - padding-left: 10px
                      custom_fields:
                        arrow:
                          - justify-self: end
                          - font-size: 14px
                          - color: black
                          - opacity: '0.7'
                    card_mod:
                      style: |
                        ha-card {
                          border: 0px solid white;
                          background: rgba(255, 255, 255, 0);
                          padding: 0;
                          box-shadow: 
                            0 0 5px rgba(255, 255, 255, 0.3), 
                            0 0 5px rgba(255, 255, 255, 0.3), 
                            0 0 10px rgba(255, 255, 255, 0.3), 
                            0 0 10px rgba(255, 255, 255, 0.3);
                          position: relative;
                          animation: neon-animation 5s infinite linear;
                          --neon-color: 
                            {% if states('light.cucina') == 'on' %}
                              lightgreen
                            {% else %}
                             gray
                            {% endif %};
                        }

                        @keyframes neon-animation {
                          0% {
                            box-shadow: 
                              0 0 5px var(--neon-color), 
                              0 0 5px var(--neon-color), 
                              0 0 10px var(--neon-color), 
                              0 0 10px var(--neon-color);
                          }
                          25% {
                            box-shadow: 
                              5px 0 5px var(--neon-color), 
                              5px 0 5px var(--neon-color), 
                              10px 0 10px var(--neon-color), 
                              10px 0 10px var(--neon-color);
                          }
                          50% {
                            box-shadow: 
                              0 5px 5px var(--neon-color), 
                              0 5px 5px var(--neon-color), 
                              0 10px 10px var(--neon-color), 
                              0 10px 10px var(--neon-color);
                          }
                          75% {
                            box-shadow: 
                              -5px 0 5px var(--neon-color), 
                              -5px 0 5px var(--neon-color), 
                              -10px 0 10px var(--neon-color), 
                              -10px 0 10px var(--neon-color);
                          }
                          100% {
                            box-shadow: 
                              0 -5px 5px var(--neon-color), 
                              0 -5px 5px var(--neon-color), 
                              0 -10px 10px var(--neon-color), 
                              0 -10px 10px var(--neon-color);
                          }
                        }
              - type: custom:bubble-card
                card_type: separator
                styles: |
                  .separator-container div:last-child {
                    opacity: 1!important;
                  }
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    name: Camera
                    icon: mdi:bed
                    entity: sensor.camera_da_letto_lywsd03mmc_temperatura
                    custom_field:
                      arrow: |
                        [[[
                          return '<ha-icon
                            icon="mdi:chevron-right"
                            style="width:16px; height: 16px;" >
                            </ha-icon>'
                        ]]]
                    tap_action:
                      action: navigate
                      navigation_path: '#cameradaletto'
                    show_label: false
                    show_state: true
                    styles:
                      grid:
                        - grid-template-areas: '"i n arrow" "i s arrow"'
                        - grid-template-columns: 40px 1fr 40px
                      icon:
                        - width: 24px
                        - color: black
                      img_cell:
                        - border_radius: 515px
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - font-size: 11px
                        - font-weight: 500
                        - padding-left: 0px
                      card:
                        - margin: 0
                        - border-radius: 15px
                        - padding: 10px 10px 10px 4px
                      state:
                        - justify-self: start
                        - font-size: 14px
                        - color: null
                        - opacity: '0.8'
                        - padding-left: 10px
                      custom_fields:
                        arrow:
                          - justify-self: end
                          - font-size: 14px
                          - color: black
                          - opacity: '0.7'
                    card_mod:
                      style: |
                        ha-card {
                          border: 0px solid white;
                          background: rgba(255, 255, 255, 0);
                          padding: 0;
                          box-shadow: 
                            0 0 5px rgba(255, 255, 255, 0.3), 
                            0 0 5px rgba(255, 255, 255, 0.3), 
                            0 0 10px rgba(255, 255, 255, 0.3), 
                            0 0 10px rgba(255, 255, 255, 0.3);
                          position: relative;
                          animation: neon-animation 5s infinite linear;
                          --neon-color: 
                            {% if states('light.camera_da_letto') == 'on' %}
                              lightgreen
                            {% else %}
                             gray
                            {% endif %};
                        }

                        @keyframes neon-animation {
                          0% {
                            box-shadow: 
                              0 0 5px var(--neon-color), 
                              0 0 5px var(--neon-color), 
                              0 0 10px var(--neon-color), 
                              0 0 10px var(--neon-color);
                          }
                          25% {
                            box-shadow: 
                              5px 0 5px var(--neon-color), 
                              5px 0 5px var(--neon-color), 
                              10px 0 10px var(--neon-color), 
                              10px 0 10px var(--neon-color);
                          }
                          50% {
                            box-shadow: 
                              0 5px 5px var(--neon-color), 
                              0 5px 5px var(--neon-color), 
                              0 10px 10px var(--neon-color), 
                              0 10px 10px var(--neon-color);
                          }
                          75% {
                            box-shadow: 
                              -5px 0 5px var(--neon-color), 
                              -5px 0 5px var(--neon-color), 
                              -10px 0 10px var(--neon-color), 
                              -10px 0 10px var(--neon-color);
                          }
                          100% {
                            box-shadow: 
                              0 -5px 5px var(--neon-color), 
                              0 -5px 5px var(--neon-color), 
                              0 -10px 10px var(--neon-color), 
                              0 -10px 10px var(--neon-color);
                          }
                  - type: custom:button-card
                    name: Cameretta
                    icon: mdi:bed
                    entity: sensor.cameretta_lywsd03mmc_temperature
                    custom_field:
                      arrow: |
                        [[[
                          return '<ha-icon
                            icon="mdi:chevron-right"
                            style="width:16px; height: 16px;" >
                            </ha-icon>'
                        ]]]
                    tap_action:
                      action: navigate
                      navigation_path: '#cameretta'
                    show_label: false
                    show_state: true
                    styles:
                      grid:
                        - grid-template-areas: '"i n arrow" "i s arrow"'
                        - grid-template-columns: 40px 1fr 40px
                      icon:
                        - width: 24px
                        - color: black
                      img_cell:
                        - border_radius: 515px
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - font-size: 11px
                        - font-weight: 500
                        - padding-left: 0px
                      card:
                        - margin: 0
                        - border-radius: 15px
                        - padding: 10px 10px 10px 4px
                      state:
                        - justify-self: start
                        - font-size: 14px
                        - color: null
                        - opacity: '0.8'
                        - padding-left: 10px
                      custom_fields:
                        arrow:
                          - justify-self: end
                          - font-size: 14px
                          - color: black
                          - opacity: '0.7'
                    card_mod:
                      style: |
                        ha-card {
                          border: 0px solid white;
                          background: rgba(255, 255, 255, 0);
                          padding: 0;
                          box-shadow: 
                            0 0 5px rgba(255, 255, 255, 0.3), 
                            0 0 5px rgba(255, 255, 255, 0.3), 
                            0 0 10px rgba(255, 255, 255, 0.3), 
                            0 0 10px rgba(255, 255, 255, 0.3);
                          position: relative;
                          animation: neon-animation 5s infinite linear;
                          --neon-color: 
                            {% if states('light.cameretta') == 'on' %}
                              lightgreen
                            {% else %}
                             gray
                            {% endif %};
                        }

                        @keyframes neon-animation {
                          0% {
                            box-shadow: 
                              0 0 5px var(--neon-color), 
                              0 0 5px var(--neon-color), 
                              0 0 10px var(--neon-color), 
                              0 0 10px var(--neon-color);
                          }
                          25% {
                            box-shadow: 
                              5px 0 5px var(--neon-color), 
                              5px 0 5px var(--neon-color), 
                              10px 0 10px var(--neon-color), 
                              10px 0 10px var(--neon-color);
                          }
                          50% {
                            box-shadow: 
                              0 5px 5px var(--neon-color), 
                              0 5px 5px var(--neon-color), 
                              0 10px 10px var(--neon-color), 
                              0 10px 10px var(--neon-color);
                          }
                          75% {
                            box-shadow: 
                              -5px 0 5px var(--neon-color), 
                              -5px 0 5px var(--neon-color), 
                              -10px 0 10px var(--neon-color), 
                              -10px 0 10px var(--neon-color);
                          }
                          100% {
                            box-shadow: 
                              0 -5px 5px var(--neon-color), 
                              0 -5px 5px var(--neon-color), 
                              0 -10px 10px var(--neon-color), 
                              0 -10px 10px var(--neon-color);
                          }
              - type: custom:bubble-card
                card_type: separator
                styles: |
                  .separator-container div:last-child {
                    opacity: 1!important;
                  }
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    name: Bagni
                    icon: mdi:hand-wash
                    entity: sensor.bagno_rosa_xiaomi_lywsd03mmc_temperatura
                    custom_field:
                      arrow: |
                        [[[
                          return '<ha-icon
                            icon="mdi:chevron-right"
                            style="width:16px; height: 16px;" >
                            </ha-icon>'
                        ]]]
                    tap_action:
                      action: navigate
                      navigation_path: '#bagni'
                    show_label: false
                    show_state: true
                    styles:
                      grid:
                        - grid-template-areas: '"i n arrow" "i s arrow"'
                        - grid-template-columns: 40px 1fr 40px
                      icon:
                        - width: 24px
                        - color: black
                      img_cell:
                        - border_radius: 515px
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - font-size: 11px
                        - font-weight: 500
                        - padding-left: 0px
                      card:
                        - margin: 0
                        - border-radius: 15px
                        - padding: 10px 10px 10px 4px
                      state:
                        - justify-self: start
                        - font-size: 14px
                        - color: null
                        - opacity: '0.8'
                        - padding-left: 10px
                      custom_fields:
                        arrow:
                          - justify-self: end
                          - font-size: 14px
                          - color: black
                          - opacity: '0.7'
                    card_mod:
                      style: |
                        ha-card {
                          border: 0px solid white;
                          background: rgba(255, 255, 255, 0);
                          padding: 0;
                          box-shadow: 
                            0 0 5px rgba(255, 255, 255, 0.3), 
                            0 0 5px rgba(255, 255, 255, 0.3), 
                            0 0 10px rgba(255, 255, 255, 0.3), 
                            0 0 10px rgba(255, 255, 255, 0.3);
                          position: relative;
                          animation: neon-animation 5s infinite linear;
                          --neon-color: 
                            {% if states('light.bagno_verde') == 'on' %}
                              lightgreen
                            {% elif states('light.bagno_rosa') == 'on' %}
                              pink
                            {% else %}
                             gray
                            {% endif %};
                        }

                        @keyframes neon-animation {
                          0% {
                            box-shadow: 
                              0 0 5px var(--neon-color), 
                              0 0 5px var(--neon-color), 
                              0 0 10px var(--neon-color), 
                              0 0 10px var(--neon-color);
                          }
                          25% {
                            box-shadow: 
                              5px 0 5px var(--neon-color), 
                              5px 0 5px var(--neon-color), 
                              10px 0 10px var(--neon-color), 
                              10px 0 10px var(--neon-color);
                          }
                          50% {
                            box-shadow: 
                              0 5px 5px var(--neon-color), 
                              0 5px 5px var(--neon-color), 
                              0 10px 10px var(--neon-color), 
                              0 10px 10px var(--neon-color);
                          }
                          75% {
                            box-shadow: 
                              -5px 0 5px var(--neon-color), 
                              -5px 0 5px var(--neon-color), 
                              -10px 0 10px var(--neon-color), 
                              -10px 0 10px var(--neon-color);
                          }
                          100% {
                            box-shadow: 
                              0 -5px 5px var(--neon-color), 
                              0 -5px 5px var(--neon-color), 
                              0 -10px 10px var(--neon-color), 
                              0 -10px 10px var(--neon-color);
                          }
                        }
                  - type: custom:button-card
                    name: Garage
                    icon: mdi:car
                    entity: sensor.garage_garage_bmp180_temperature
                    custom_field:
                      arrow: |
                        [[[
                          return '<ha-icon
                            icon="mdi:chevron-right"
                            style="width:16px; height: 16px;" >
                            </ha-icon>'
                        ]]]
                    tap_action:
                      action: navigate
                      navigation_path: '#garage'
                    show_label: false
                    show_state: true
                    styles:
                      grid:
                        - grid-template-areas: '"i n arrow" "i s arrow"'
                        - grid-template-columns: 40px 1fr 40px
                      icon:
                        - width: 24px
                        - color: black
                      img_cell:
                        - border_radius: 515px
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - font-size: 11px
                        - font-weight: 500
                        - padding-left: 0px
                      card:
                        - margin: 0
                        - border-radius: 15px
                        - padding: 10px 10px 10px 4px
                      state:
                        - justify-self: start
                        - font-size: 14px
                        - color: null
                        - opacity: '0.8'
                        - padding-left: 10px
                      custom_fields:
                        arrow:
                          - justify-self: end
                          - font-size: 14px
                          - color: black
                          - opacity: '0.7'
                    card_mod:
                      style: |
                        ha-card {
                          border: 0px solid white;
                          background: rgba(255, 255, 255, 0);
                          padding: 0;
                          box-shadow: 
                            0 0 5px rgba(255, 255, 255, 0.3), 
                            0 0 5px rgba(255, 255, 255, 0.3), 
                            0 0 10px rgba(255, 255, 255, 0.3), 
                            0 0 10px rgba(255, 255, 255, 0.3);
                          position: relative;
                          animation: neon-animation 5s infinite linear;
                          --neon-color: 
                            {% if states('switch.garage_garage') == 'on' %}
                              lightgreen
                            {% elif states('binary_sensor.basculante') == 'on' %}
                              red
                            {% else %}
                             gray
                            {% endif %};
                        }

                        @keyframes neon-animation {
                          0% {
                            box-shadow: 
                              0 0 5px var(--neon-color), 
                              0 0 5px var(--neon-color), 
                              0 0 10px var(--neon-color), 
                              0 0 10px var(--neon-color);
                          }
                          25% {
                            box-shadow: 
                              5px 0 5px var(--neon-color), 
                              5px 0 5px var(--neon-color), 
                              10px 0 10px var(--neon-color), 
                              10px 0 10px var(--neon-color);
                          }
                          50% {
                            box-shadow: 
                              0 5px 5px var(--neon-color), 
                              0 5px 5px var(--neon-color), 
                              0 10px 10px var(--neon-color), 
                              0 10px 10px var(--neon-color);
                          }
                          75% {
                            box-shadow: 
                              -5px 0 5px var(--neon-color), 
                              -5px 0 5px var(--neon-color), 
                              -10px 0 10px var(--neon-color), 
                              -10px 0 10px var(--neon-color);
                          }
                          100% {
                            box-shadow: 
                              0 -5px 5px var(--neon-color), 
                              0 -5px 5px var(--neon-color), 
                              0 -10px 10px var(--neon-color), 
                              0 -10px 10px var(--neon-color);
                          }
            title: Stanze
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: separator
                styles: |
                  .separator-container div:last-child {
                    opacity: 1!important;
                  }
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    name: Frigorifero
                    icon: mdi:fridge
                    entity: sensor.frigorifero_power
                    custom_field:
                      arrow: |
                        [[[
                          return '<ha-icon
                            icon="mdi:chevron-right"
                            style="width:16px; height: 16px;" >
                            </ha-icon>'
                        ]]]
                    tap_action:
                      action: navigate
                      navigation_path: '#frigorifero'
                    show_label: false
                    show_state: true
                    styles:
                      grid:
                        - grid-template-areas: '"i n arrow" "i s arrow"'
                        - grid-template-columns: 40px 1fr 40px
                      icon:
                        - width: 24px
                        - color: black
                      img_cell:
                        - border_radius: 515px
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - font-size: 11px
                        - font-weight: 500
                        - padding-left: 0px
                      card:
                        - margin: 0
                        - border-radius: 15px
                        - padding: 10px 10px 10px 4px
                      state:
                        - justify-self: start
                        - font-size: 14px
                        - color: null
                        - opacity: '0.8'
                        - padding-left: 10px
                      custom_fields:
                        arrow:
                          - justify-self: end
                          - font-size: 14px
                          - color: black
                          - opacity: '0.7'
                  - type: custom:button-card
                    name: Forno
                    icon: mdi:toaster-oven
                    entity: sensor.forno_power
                    custom_field:
                      arrow: |
                        [[[
                          return '<ha-icon
                            icon="mdi:chevron-right"
                            style="width:16px; height: 16px;" >
                            </ha-icon>'
                        ]]]
                    tap_action:
                      action: navigate
                      navigation_path: '#forno'
                    show_label: false
                    show_state: true
                    styles:
                      grid:
                        - grid-template-areas: '"i n arrow" "i s arrow"'
                        - grid-template-columns: 40px 1fr 40px
                      icon:
                        - width: 24px
                        - color: black
                      img_cell:
                        - border_radius: 515px
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - font-size: 11px
                        - font-weight: 500
                        - padding-left: 0px
                      card:
                        - margin: 0
                        - border-radius: 15px
                        - padding: 10px 10px 10px 4px
                      state:
                        - justify-self: start
                        - font-size: 14px
                        - color: null
                        - opacity: '0.8'
                        - padding-left: 10px
                      custom_fields:
                        arrow:
                          - justify-self: end
                          - font-size: 14px
                          - color: black
                          - opacity: '0.7'
              - type: custom:bubble-card
                card_type: separator
                styles: |
                  .separator-container div:last-child {
                    opacity: 1!important;
                  }
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    name: Lavatrice
                    icon: mdi:washing-machine
                    entity: sensor.lavatrice_power
                    custom_field:
                      arrow: |
                        [[[
                          return '<ha-icon
                            icon="mdi:chevron-right"
                            style="width:16px; height: 16px;" >
                            </ha-icon>'
                        ]]]
                    tap_action:
                      action: navigate
                      navigation_path: '#lavatrice'
                    show_label: false
                    show_state: true
                    styles:
                      grid:
                        - grid-template-areas: '"i n arrow" "i s arrow"'
                        - grid-template-columns: 40px 1fr 40px
                      icon:
                        - width: 24px
                        - color: black
                      img_cell:
                        - border_radius: 515px
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - font-size: 11px
                        - font-weight: 500
                        - padding-left: 0px
                      card:
                        - margin: 0
                        - border-radius: 15px
                        - padding: 10px 10px 10px 4px
                      state:
                        - justify-self: start
                        - font-size: 14px
                        - color: null
                        - opacity: '0.8'
                        - padding-left: 10px
                      custom_fields:
                        arrow:
                          - justify-self: end
                          - font-size: 14px
                          - color: black
                          - opacity: '0.7'
                  - type: custom:button-card
                    name: Asciugatrice
                    icon: mdi:bed
                    entity: sensor.asciugatrice_power
                    custom_field:
                      arrow: |
                        [[[
                          return '<ha-icon
                            icon="mdi:chevron-right"
                            style="width:16px; height: 16px;" >
                            </ha-icon>'
                        ]]]
                    tap_action:
                      action: navigate
                      navigation_path: '#asciugatrice'
                    show_label: false
                    show_state: true
                    styles:
                      grid:
                        - grid-template-areas: '"i n arrow" "i s arrow"'
                        - grid-template-columns: 40px 1fr 40px
                      icon:
                        - width: 24px
                        - color: black
                      img_cell:
                        - border_radius: 515px
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - font-size: 11px
                        - font-weight: 500
                        - padding-left: 0px
                      card:
                        - margin: 0
                        - border-radius: 15px
                        - padding: 10px 10px 10px 4px
                      state:
                        - justify-self: start
                        - font-size: 14px
                        - color: null
                        - opacity: '0.8'
                        - padding-left: 10px
                      custom_fields:
                        arrow:
                          - justify-self: end
                          - font-size: 14px
                          - color: black
                          - opacity: '0.7'
              - type: custom:bubble-card
                card_type: separator
                styles: |
                  .separator-container div:last-child {
                    opacity: 1!important;
                  }
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    name: Lavastoviglie
                    icon: mdi:dishwasher
                    entity: sensor.lavastoviglie_power
                    custom_field:
                      arrow: |
                        [[[
                          return '<ha-icon
                            icon="mdi:chevron-right"
                            style="width:16px; height: 16px;" >
                            </ha-icon>'
                        ]]]
                    tap_action:
                      action: navigate
                      navigation_path: '#lavastoviglie'
                    show_label: false
                    show_state: true
                    styles:
                      grid:
                        - grid-template-areas: '"i n arrow" "i s arrow"'
                        - grid-template-columns: 40px 1fr 40px
                      icon:
                        - width: 24px
                        - color: black
                      img_cell:
                        - border_radius: 515px
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - font-size: 11px
                        - font-weight: 500
                        - padding-left: 0px
                      card:
                        - margin: 0
                        - border-radius: 15px
                        - padding: 10px 10px 10px 4px
                      state:
                        - justify-self: start
                        - font-size: 14px
                        - color: null
                        - opacity: '0.8'
                        - padding-left: 10px
                      custom_fields:
                        arrow:
                          - justify-self: end
                          - font-size: 14px
                          - color: black
                          - opacity: '0.7'
                  - type: custom:button-card
                    name: Ups 1
                    icon: mdi:power-plug-battery-outline
                    entity: sensor.riello_idg600_stato
                    custom_field:
                      arrow: |
                        [[[
                          return '<ha-icon
                            icon="mdi:chevron-right"
                            style="width:16px; height: 16px;" >
                            </ha-icon>'
                        ]]]
                    tap_action:
                      action: navigate
                      navigation_path: '#ups'
                    show_label: false
                    show_state: true
                    styles:
                      grid:
                        - grid-template-areas: '"i n arrow" "i s arrow"'
                        - grid-template-columns: 40px 1fr 40px
                      icon:
                        - width: 24px
                        - color: black
                      img_cell:
                        - border_radius: 515px
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - font-size: 11px
                        - font-weight: 500
                        - padding-left: 0px
                      card:
                        - margin: 0
                        - border-radius: 15px
                        - padding: 10px 10px 10px 4px
                      state:
                        - justify-self: start
                        - font-size: 14px
                        - color: null
                        - opacity: '0.8'
                        - padding-left: 10px
                      custom_fields:
                        arrow:
                          - justify-self: end
                          - font-size: 14px
                          - color: black
                          - opacity: '0.7'
            title: Elettrodomestici
        view_layout:
          grid-area: left
      - type: vertical-stack
        cards:
          - elements:
              - entity: raccolta_hp.secco
                hold_action:
                  action: none
                image: /local/immagini/lovelace/bidone.png
                state_filter:
                  'off': opacity(0.0)
                  'on': hue-rotate(90deg) brightness(0.7) saturate(0.8)
                style:
                  left: 20%
                  top: 66%
                  width: 15%
                tap_action:
                  action: none
                type: image
              - entity: input_text.vuoto
                hold_action:
                  action: none
                prefix: Secco
                style:
                  color: white
                  font-family: Trebuchet MS
                  font-size: 100%
                  font-weight: bold
                  left: 20%
                  opacity: 0.9
                  pointer-events: auto
                  text-align: center
                  text-shadow: '-1px -1px 1px black'
                  top: 95.6%
                tap_action:
                  action: none
                type: state-label
              - entity: raccolta_hp.umido
                hold_action:
                  action: none
                image: /local/immagini/lovelace/bidone.png
                state_filter:
                  'off': opacity(0.0)
                  'on': hue-rotate(-30deg) grayscale(50%) brightness(0.4)
                style:
                  left: 40%
                  top: 66%
                  width: 15%
                tap_action:
                  action: none
                type: image
              - entity: input_text.vuoto
                hold_action:
                  action: none
                prefix: Umido
                style:
                  color: white
                  font-family: Trebuchet MS
                  font-size: 100%
                  font-weight: bold
                  left: 40%
                  opacity: 0.9
                  pointer-events: auto
                  text-align: center
                  text-shadow: '-1px -1px 1px black'
                  top: 95.6%
                tap_action:
                  action: none
                type: state-label
              - entity: raccolta_hp.carta
                hold_action:
                  action: none
                image: /local/immagini/lovelace/bidone.png
                state_filter:
                  'off': opacity(0.0)
                  'on': hue-rotate(00deg)
                style:
                  left: 60%
                  top: 66%
                  width: 15%
                tap_action:
                  action: none
                type: image
              - entity: input_text.vuoto
                hold_action:
                  action: none
                prefix: Carta
                style:
                  color: white
                  font-family: Trebuchet MS
                  font-size: 100%
                  font-weight: bold
                  left: 60%
                  opacity: 0.9
                  pointer-events: auto
                  text-align: center
                  text-shadow: '-1px -1px 1px black'
                  top: 95.6%
                tap_action:
                  action: none
                type: state-label
              - entity: raccolta_hp.plastica
                hold_action:
                  action: none
                image: /local/immagini/lovelace/bidone.png
                state_filter:
                  'off': opacity(0.0)
                  'on': brightness(2) saturate(0)
                style:
                  left: 80%
                  top: 66%
                  width: 15%
                tap_action:
                  action: none
                type: image
              - entity: input_text.vuoto
                hold_action:
                  action: none
                prefix: Plastica
                style:
                  color: white
                  font-family: Trebuchet MS
                  font-size: 100%
                  font-weight: bold
                  left: 80%
                  opacity: 0.9
                  pointer-events: auto
                  text-align: center
                  text-shadow: '-1px -1px 1px black'
                  top: 95.6%
                tap_action:
                  action: none
                type: state-label
            image: /local/immagini/siepe.jpg
            type: picture-elements
          - type: custom:gap-card
            height: 16
          - event_grouping: true
            drop_todayevents_from: '22:00:00'
            next_days: 300
            pattern:
              - label: Organico Umido
                icon: mdi:flower
                pattern: Organico Umido
                color: brown
                type: organic
              - label: Carta e cartone
                icon: mdi:newspaper-variant-multiple-outline
                color: grey
                pattern: Carta e cartone
                type: paper
              - label: Plastica e Lattina
                pattern: Plastica e Lattine
                icon: mdi:recycle-variant
                color: orange
                type: recycle
              - pattern: secco residuo
                icon: mdi:trash-can
                label: Indifferenziata
                color: green
                type: waste
              - icon: mdi:dump-truck
                color: indigo
                type: others
              - label: Electric
                icon: mdi:electron-framework
                color: blue
                type: custom
                pattern: elettrico
            day_style: custom
            day_style_format: dd.MM.yy
            alignment_style: center
            items_per_row: 4
            refresh_rate: 60
            with_label: true
            type: custom:trash-card
            entities:
              - calendar.isontina_ambiente_ronchi_dei_legionari
            layout: vertical
            filter_events: false
            use_summary: true
            hide_time_range: false
          - type: vertical-stack
            cards:
              - show_state: false
                show_name: false
                camera_view: auto
                type: picture-entity
                entity: camera.birdseye
                camera_image: camera.camera_06
        view_layout:
          grid-area: right
      - type: custom:mod-card
        card_mod:
          style: |

            @media (min-width:180px) {
              ha-card {
                z-index:6;
                position: fixed;
                background: var(--gray800);
                bottom: 10px;
                left: 10px;
                padding: 10px;
                border-radius: 100px;
                width: calc(100% - 20px);
              }
            }

            @media (min-width:801px)  {
              ha-card {
                left: calc(20% + 43px);
                width: calc(60% - 30px);
              }
            }    
        card:
          type: grid
          square: false
          columns: 8
          cards:
            - type: custom:button-card
              icon: mdi:message
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#centronotifiche'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
            - type: custom:button-card
              icon: mdi:alarm
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#sveglia'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
            - type: custom:button-card
              icon: mdi:power-plug-outline
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#energia'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
            - type: custom:button-card
              icon: mdi:car-outline
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#bil'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
            - type: custom:button-card
              icon: mdi:server-outline
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#server'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
            - type: custom:button-card
              icon: mdi:tune-variant
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#settings'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
            - type: custom:button-card
              icon: mdi:sprinkler-variant
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#irrigazione'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Meteo
            icon: mdi:weather-partly-snowy-rainy
            state: null
            hash: '#weather'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: vertical-stack
            cards:
              - type: custom:gap-card
                height: 12
              - type: custom:gap-card
                height: 20
              - type: custom:gap-card
                height: 30
              - type: custom:local-conditional-card
                id: vaer_naa
                default: show
                card:
                  square: false
                  type: grid
                  cards:
                    - type: custom:weather-chart-card
                      entity: weather.forecast_ronchi_dei_legionari
                      show_main: true
                      show_temperature: true
                      show_current_condition: true
                      show_attributes: true
                      show_time: true
                      show_day: true
                      show_date: true
                      show_humidity: true
                      show_pressure: true
                      show_wind_direction: true
                      show_wind_speed: true
                      show_sun: true
                      show_feels_like: false
                      icons_size: '50'
                      animated_icons: true
                      icon_style: style1
                      forecast:
                        precipitation_type: rainfall
                        labels_font_size: '11'
                        precip_bar_size: '100'
                        style: style2
                        show_wind_forecast: true
                        condition_icons: true
                        round_temp: true
                        type: daily
                        use_12hour_format: false
                      units:
                        pressure: hPa
                        speed: km/h
                      temp: sensor.temperatura_esterna
                      press: sensor.garage_garage_bmp180_pressure
                      humid: sensor.umidita_esterna
                      locale: it
                      uv: sensor.ironch4_uv_index
                      winddir: sensor.ironch4_wind_direction_degrees
                      windspeed: sensor.ironch4_wind_speed
                      dew_point: sensor.ironch4_dewpoint
                      wind_gust_speed: sensor.ironch4_wind_gust
                      icons: /local/icons/meteo/
                  columns: 1
                persist_state: false
              - type: custom:local-conditional-card
                id: vaer_naa
                default: show
                card:
                  cards:
                    - aspect_ratio: 73%
                      type: iframe
                      url: >-
                        https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=mm&metricTemp=°C&metricWind=km/h&zoom=5&overlay=rain&product=ecmwf&level=surface&lat=44.672&lon=11.371&message=true"
                        frameborder="0
                    - hold_action:
                        action: none
                      image: http://neige.meteociel.fr/satellite/anim_ir.gif
                      tap_action:
                        action: none
                      type: picture
                  type: vertical-stack
                persist_state: false
              - type: custom:local-conditional-card
                id: criticita
                default: show
                card:
                  type: custom:vertical-stack-in-card
                  card_mod:
                    style: |
                      ha-card {
                          --ha-card-background: var(--card-background);
                          --primary-text-color: var(--primary-text-color);
                          border: 
                            1px solid {% if is_state('binary_sensor.global_natural_alert', 'on') %} 
                            {{state_attr('binary_sensor.global_natural_alert','level')}} {% else %} Green {% endif %};
                      }
                  cards:
                    - type: markdown
                      entity_id: binary_sensor.global_natural_alert
                      card_mod:
                        style: >
                          {% set global = 'binary_sensor.global_natural_alert'
                          %}

                          @keyframes blink {
                            30% {
                              background: {% if is_state(global, 'on') %} var(--ha-card-background) {% endif %};
                            }
                          }

                          ha-card {
                            border-radius: var(--ha-card-border-radius) var(--ha-card-border-radius) 0px 0px;
                            box-shadow: none; 
                            {% if is_state(global, 'on') %}
                            animation: blink 2s linear 2;
                            background: {{state_attr(global,'level')}};
                            color: {% if state_attr(global,'level') in ['White','Gold','Orange'] %} var(--dark-primary-color) {% else %} var(--light-primary-color) {% endif %};
                            {% else %}
                            background: Green; border-color: Green; color: var(--primary-text-color)
                            {% endif %}
                            }
                          }
                      content: >
                        {% set global = 'binary_sensor.global_natural_alert' %}

                        {% set summary = states('sensor.dark_sky_daily_summary')
                        %}

                        {% set risk = {'Green':'Verde', 'Yellow':'Gialla',
                        'Gold':'Gialla', 'Orange':'Arancione', 'Red':'Rossa'} %}

                        {% if is_state(global, 'on') %}

                        <center><b><ha-icon
                        icon="mdi:alarm-light"></ha-icon>&nbsp; EVENTI NATURALI
                        - 

                        MAX ALLERTA {{risk[state_attr(global,'level')]|upper}}
                        &nbsp;<ha-icon
                        icon="{{state_attr(global,'icon')}}"></ha-icon>

                        {% else %}

                        <center><ha-icon icon="mdi:shield-check"></ha-icon>
                        &nbsp; NESSUN EVENTO SEGNALATO

                        <center>{{'' if summary == 'unknown' else summary }}

                        {% endif %}
                    - type: conditional
                      conditions:
                        - entity: input_boolean.natural_events
                          state: 'on'
                      card:
                        type: vertical-stack
                        cards:
                          - type: entities
                            card_mod:
                              style: >
                                div#states.card-content {padding-block-end: 0;
                                padding-block-start: 0;}

                                ha-card {background:none; border-radius: 0px;
                                box-shadow: none;}
                            entities:
                              - type: custom:auto-entities
                                show_empty: false
                                sort:
                                  method: domain
                                filter:
                                  include:
                                    - attributes:
                                        package: Natural_events*
                                      options:
                                        state_color: true
                                  exclude:
                                    - entity_id: input_boolean.natural_events
                                    - entity_id: geo_location.*
                                    - domain: binary_sensor
                                    - domain: group
                                    - domain: sensor
                                    - domain: script
                                    - domain: zone
                                card:
                                  type: custom:fold-entity-row
                                  head:
                                    entity: input_boolean.natural_events
                                    tap_action:
                                      action: toggle
                                    card_mod:
                                      style: |
                                        :host {
                                          {% if is_state('input_boolean.natural_events', 'on') %} 
                                          --paper-item-icon-color: var(--paper-item-icon-active-color);
                                          {% endif %}
                                        }
                              - type: custom:fold-entity-row
                                card_mod:
                                  style: |
                                    #head { 
                                      {% if is_state('group.meteoalert', 'on') %}
                                      --paper-item-icon-color: var(--paper-item-icon-active-color);
                                      {% endif %}
                                    }
                                head:
                                  entity: group.meteoalert
                                  state_color: true
                                group_config:
                                  state_color: true
                                  secondary_info: last-updated
                                  card_mod:
                                    style: |
                                      :host {
                                        {% if 'meteoalarm_custom' in config.entity
                                          and states(config.entity) > '0' %} 
                                        --paper-item-icon-color: var(--paper-item-icon-active-color);
                                        {% endif %}
                                      }
                              - type: custom:fold-entity-row
                                card_mod:
                                  style: |
                                    #head { 
                                      {% if is_state('group.geoalert', 'on') %}
                                      --paper-item-icon-color: var(--paper-item-icon-active-color);
                                      {% endif %}
                                    }
                                head:
                                  entity: group.geoalert
                                  state_color: true
                                group_config:
                                  state_color: true
                                  secondary_info: last-updated
                                  card_mod:
                                    style: |
                                      :host {
                                          {% if 'gdacs' in config.entity and states(config.entity) > '0' %} --paper-item-icon-color: var(--paper-item-icon-active-color);{% endif %}
                                      }
                    - type: conditional
                      conditions:
                        - entity: input_boolean.natural_events
                          state: 'off'
                      card:
                        type: custom:auto-entities
                        card:
                          type: entities
                          show_empty: false
                          card_mod:
                            style: >
                              ha-card { background: none; border-radius: 0px;
                              box-shadow: none; }

                              div#states.card-content {padding-block-end: 0;
                              padding-block-start: 0;}
                          header:
                            type: custom:paper-buttons-row
                            buttons:
                              - entity: input_boolean.natural_events
                                layout: icon|name
                                name: Info
                              - entity: group.natural_events
                                layout: icon|name
                                name: Map
                                icon: mdi:image-off
                                style:
                                  button:
                                    color: var(--paper-item-icon-color)
                                  ripple:
                                    color: orange
                                tap_action:
                                  action: call-service
                                  service: input_select.select_option
                                  service_data:
                                    entity_id: >-
                                      input_select.geo_map,
                                      input_select.meteo_map,
                                      input_select.meteo_iframe
                                    option: Nessuna
                              - entity: input_select.geo_map
                                layout: icon|name
                                name: Geo
                                tap_action:
                                  action: call-service
                                  service: input_select.select_next
                                  service_data:
                                    entity_id: input_select.geo_map
                                double_tap_action:
                                  action: call-service
                                  service: input_select.select_option
                                  service_data:
                                    option: Nessuna
                                    entity_id: input_select.geo_map
                                style:
                                  button:
                                    color: var(--paper-item-icon-active-color)
                                state_styles:
                                  nessuna:
                                    button:
                                      color: var(--paper-item-icon-color)
                              - entity: input_select.meteo_map
                                layout: icon|state
                                style:
                                  button:
                                    color: var(--paper-item-icon-active-color)
                                state:
                                  case: first
                                state_styles:
                                  nessuna:
                                    button:
                                      color: var(--paper-item-icon-color)
                                state_text:
                                  nessuna: Meteo
                                  temperatura nuvole infrared: Infrared
                                  nuvole infrared: Notte
                                  nuvole e sole: Giorno
                                  pioggia: Pioggia
                                  neve: Neve
                                  il meteo: Il meteo
                                  burze: Burze
                                  burze nord ovest: Burze NO
                                  burze nord est: Burze NE
                                  burze sud ovest: Burze SO
                                  burze sud est: Burze SE
                                  wwwlln: WWLLN
                                tap_action:
                                  action: call-service
                                  service: input_select.select_next
                                  service_data:
                                    entity_id: input_select.meteo_map
                                double_tap_action:
                                  action: call-service
                                  service: input_select.select_option
                                  service_data:
                                    option: Nessuna
                                    entity_id: input_select.meteo_map
                              - entity: input_select.meteo_iframe
                                layout: icon|state
                                name: I-Frame
                                state:
                                  case: first
                                state_text:
                                  nessuna: I-Frame
                                  windy alert: Alert
                                  dpc radar: DPC Radar
                                  dpc bollettino criticità: Criticità
                                  dpc vigilanza meteo: Vigilanza
                                  blitzortung: Blitz
                                  radareu: Radareu
                                  volcanodiscovery: Vulcani
                                tap_action:
                                  action: call-service
                                  service: input_select.select_next
                                  service_data:
                                    entity_id: input_select.meteo_iframe
                                double_tap_action:
                                  action: call-service
                                  service: input_select.select_option
                                  service_data:
                                    option: Nessuna
                                    entity_id: input_select.meteo_iframe
                                style:
                                  button:
                                    color: var(--paper-item-icon-active-color)
                                state_styles:
                                  nessuna:
                                    button:
                                      color: var(--paper-item-icon-color)
                        entities:
                          - type: conditional
                            conditions:
                              - entity: binary_sensor.global_natural_alert
                                state: 'on'
                            row:
                              type: divider
                        unique: entity
                        filter:
                          exclude:
                            - entity_id: binary_sensor.global_natural_alert
                          include:
                            - entity_id: sensor.*
                              or:
                                - attributes:
                                    integration: dpc
                                    total_phenomena: '>0'
                                - attributes:
                                    integration: dpc
                                    total_alerts: '>0'
                              options:
                                entity: this.entity_id
                                secondary_info: last-updated
                                card_mod:
                                  style: |
                                    :host {
                                      --color:
                                        {% set color = {0:'White', 1:'Green', 2:'Gold', 3:'Orange', 4:'Red', 5:'BlueViolet'} %}
                                        {% if is_state_attr(config.entity, 'integration', 'dpc') %} {{color[state_attr(config.entity, 'max_level')|int]}}
                                        {% endif %};
                                      color: var(--color);
                                      --paper-item-icon-color: var(--paper-item-icon-active-color); ##var(--color);
                                    }
                            - entity_id: binary_sensor.*
                              state: 'on'
                              attributes:
                                package: Natural_events*
                              options:
                                entity: this.entity_id
                                secondary_info: last-updated
                                state_color: true
                                card_mod:
                                  style: |
                                    :host {
                                      --color:
                                        {% set color = {0:'White', 1:'Green', 2:'Gold', 3:'Orange', 4:'Red'} %}
                                        {% if is_state_attr(config.entity, 'integration', 'dpc') %} {{color[state_attr(config.entity, 'level')|int]}}
                                        {% elif 'meteoalarm' in config.entity %} {{state_attr('binary_sensor.global_natural_alert','meteoalarm_level')}}
                                        {% elif 'quake' in config.entity %} {{color[state_attr('binary_sensor.lastquake', 'level')|int]}}
                                        {% elif 'burze' in config.entity and states(config.entity) == 'on'%}
                                          {% set d = state_attr(config.entity,'distance') %}
                                          {% if d %}
                                            {% if d <= 1 %}Red{% elif 1 < d <= 5 %}Orange{% elif 5 < d <= 10 %}Gold{% else %}Green{% endif %}
                                          {% endif %}
                                        {% endif %};
                                      color: var(--color);
                                      {#--paper-item-icon-color: var(--color); #}
                                    }
                            - entity_id: sensor.m*
                              state: '> 0'
                              attributes:
                                package: Natural_events*
                              options:
                                entity: this.entity_id
                                secondary_info: last-updated
                                card_mod:
                                  style: |
                                    :host {
                                      {% set dict_code={'Green':'1','Yellow':'2','Orange':'3','Red':'4'} %}
                                      {% set color = {0:'White', 1:'Green', 2:'Gold', 3:'Orange', 4:'Red'} %}
                                      {% macro code() %}
                                      {%- for s  in ['today', 'tomorrow'] -%}
                                        {% set v = state_attr('sensor.meteoalarm_custom', s) -%}
                                          {% if v -%}
                                            {% for d  in v -%}
                                            {{dict_code[d['code']]}}
                                            {% endfor -%}
                                          {% endif -%}
                                      {%- endfor -%}
                                      {% endmacro -%}
                                      --color: {{color[code()|max|int]}};
                                      color: var(--color);
                                      --paper-item-icon-color: var(--paper-item-icon-active-color);
                                    }
                    - type: conditional
                      conditions:
                        - entity: input_boolean.natural_events
                          state: 'on'
                      card:
                        type: vertical-stack
                        cards:
                          - type: conditional
                            conditions:
                              - entity: binary_sensor.burze_storms_nearby
                                state: 'on'
                            card:
                              type: markdown
                              card_mod:
                                style: >
                                  ha-card {background: none; border-radius: 0px;
                                  box-shadow: none;}
                              content: >-
                                {%- set mycolor = 'var(--error-color)' -%} {%-
                                set color2 = 'Gold' -%} ___

                                #### TEMPORALI

                                <font
                                color="{{mycolor}}">{{state_attr('binary_sensor.burze_storms_nearby',
                                'number')}}</font> <font
                                color="{{color2}}"><ha-icon icon="mdi:flash"
                                style="width: 24px; height: 24px; transform:
                                rotate(35deg);"></ha-icon></font>  in <font
                                color="{{mycolor}}">
                                {{state_attr('binary_sensor.burze_storms_nearby',
                                'period')}}</font> minuti. Il più vicino è
                                caduto a <font color="{{mycolor}}">
                                {{state_attr('binary_sensor.burze_storms_nearby',
                                'distance')}} Km </font>  a <font
                                color="{{mycolor}}">
                                {{state_attr('binary_sensor.global_natural_alert','burze_direction')}}
                                </font> </font> da casa.


                                [Burze](https://burze.dzis.net) ~
                                [Blitzortung](http://map.blitzortung.org/#5.11/43.00/13.00)
                          - type: custom:auto-entities
                            show_empty: false
                            filter:
                              include:
                                - entity_id: sensor.*
                                  or:
                                    - attributes:
                                        integration: dpc
                                        total_phenomena: '>0'
                                    - attributes:
                                        integration: dpc
                                        total_alerts: '>0'
                            card:
                              type: markdown
                              card_mod:
                                style: >
                                  ha-card {background: none; border-radius: 0px;
                                  box-shadow: none;}
                              content: >-

                                ___


                                {% set entity = 'sensor.dpc_alert' %}


                                #### PROTEZIONE CIVILE -
                                [CRITICITA](https://mappe.protezionecivile.gov.it/it/mappe-rischi/bollettino-di-criticita)


                                ##### ZONA {{state_attr(entity, 'zone_name')}}



                                {% set color = {0:'White', 1:'Green', 2:'Gold',
                                3:'Orange', 4:'Red'} %}

                                {% set days_map = {'today':'Oggi.',
                                'tomorrow':'Domani.', 'aftertomorrow':
                                'Dopodomani.'} %} 

                                {%- for day in ['today', 'tomorrow'] %}

                                {% set d = state_attr(entity, day) %}

                                {%- set events = state_attr(entity,
                                'events_'+day) %}

                                {%- if d %} 

                                {%- if  d['level'] >= 1 %}


                                |   |   |

                                |:--|:--|

                                | <font color="{{ color.get(d['level']) }}"/>
                                <ha-icon icon="{{ 'mdi:numeric-' ~ d['level'] ~
                                '-box'}}"/></ha-icon> | {{ days_map[day] }}
                                {{d['info']}} {{d['alert']}}</font> |

                                {% endif %}

                                {%- endif %}

                                {%- if events %} 

                                {%- for ev in events %}


                                |   |   |   |

                                |:--|:--|:--|

                                | <font color="{{ color.get(ev['level']) }}"/>
                                <ha-icon icon="{{ 'mdi:numeric-' ~ ev['level']
                                }}"/> | <font color="{{ color.get(ev['level'])
                                }}"/> <ha-icon icon="{{ ev['icon'] }}"/> | {{
                                ev['alert'] }} {{ ev['info'] }} criticità per
                                rischio {{ ev['risk'] }} |


                                {%- endfor %} 

                                {%- endif %}

                                {%- endfor %}


                                ___


                                {% set entity = 'sensor.dpc_vigilance' %}


                                #### PROTEZIONE CIVILE - [VIGILANZA
                                METEO](https://mappe.protezionecivile.it/it/mappe-rischi/bollettino-di-vigilanza)


                                ##### ZONA {{state_attr(entity, 'zone_name')}}


                                {% set color = {0:'White', 1:'Green', 2:'Gold',
                                3:'Orange', 4:'Red', 5: 'BlueViolet'} %}

                                {# set color_vigilance = {0:'#FFFFFF',
                                1:'#008000', 2:'#C3FFFE', 3:'#50FFFF',
                                4:'#508BFF', 5: '#A040FF'} #}

                                {% set color_v = {0:'White', 1:'Green',
                                2:'LightCyan', 3:'BabyBlue', 4:'CornflowerBlue',
                                5: 'BlueViolet'} %}

                                {% set day = {'today':'Oggi.',
                                'tomorrow':'Domani.', 'aftertomorrow':
                                'Dopodomani.'} %} 

                                {%- for status in ['today',
                                'tomorrow','aftertomorrow'] %}

                                {% set v = state_attr(entity, status) %}

                                {%- if v %} 

                                {%- if v['level'] >= 1 %}

                                <font color="{{ color.get(v['level']) }}"/>
                                <ha-icon icon="{{ v['icon'] }}"/></ha-icon> {{
                                day[status] }} Quantitativi previsti {{
                                v['precipitation'] }} </font>

                                {%- endif %}

                                {%- if v.phenomena %} 

                                {% for d in v.phenomena %}


                                |   |   |

                                |:--|:--|

                                | <ha-icon icon="{{ d['icon'] }}"/> |{{
                                d['event'] }} {{ d['value'] }} [{{ d['distance']
                                }} Km {{ d['direction'] }}] |


                                {%- endfor %}

                                {%- endif %}

                                {%- endif %}

                                {%- endfor %}


                                [Sito Web Protezione
                                Civile](https://www.protezionecivile.gov.it/it/)
                                ~
                                [Radar](https://mappe.protezionecivile.it/it/mappe-rischi/piattaforma-radar)
                          - type: conditional
                            conditions:
                              - entity: binary_sensor.meteoalarm
                                state: 'on'
                            card:
                              type: markdown
                              card_mod:
                                style: >
                                  ha-card {background: none; border-radius: 0px;
                                  box-shadow: none;}
                              content: >
                                ___

                                #### METEOALARM

                                {% set mycolor = 'var(--primary-text-color)' %}

                                {% set global =
                                'binary_sensor.global_natural_alert' %} {% set l
                                = state_attr('binary_sensor.meteoalarm',
                                'awareness_level') %} {% set t =
                                state_attr('binary_sensor.meteoalarm',
                                'awareness_type') %} <font
                                color="{{state_attr(global,'meteoalarm_level')}}">
                                <ha-icon icon="{{state_attr(global,
                                'meteoalarm_level_icon')}}"></ha-icon></font>
                                <font
                                color="{{state_attr(global,'meteoalarm_level')}}">
                                <ha-icon icon="{{state_attr(global,
                                'meteoalarm_type_icon')}}"></ha-icon></font>
                                <font
                                color="{{state_attr(global,'meteoalarm_level')}}">
                                {{state_attr('binary_sensor.meteoalarm',
                                'event')}} <img
                                src="https://www.meteoalarm.eu/documents/rss/wflag-l{{'0'
                                if not l else l.split(';')[0]}}-t{{'0' if not t
                                else t.split(';')[0]}}.jpg"></font> <font
                                color="{{mycolor}}">
                                **{{state_attr('binary_sensor.meteoalarm',
                                'urgency')|upper}}**</font><br> {% set days =
                                ["Domenica", "Lunedì", "Martedì", "Mercoledì",
                                "Giovedì", "Venerdì", "Sabato"] %} {% set start
                                =
                                as_timestamp(state_attr('binary_sensor.meteoalarm',
                                'effective')) %} {% set end =
                                as_timestamp(state_attr('binary_sensor.meteoalarm',
                                'expires')) %} <font>Da
                                {{days[start|timestamp_custom('%w')|int]}}{{start|timestamp_custom('
                                %d alle %H:%M')}}</font> a
                                {{days[end|timestamp_custom('%w')|int]}}{{end|timestamp_custom('
                                %d alle %H:%M')}}</font><br><br> **Titolo**<br>
                                <font color="{{mycolor}}">
                                {{state_attr('binary_sensor.meteoalarm',
                                'headline')}} </font><br><br>
                                **Descrizione**<br> <font color="{{mycolor}}">
                                {{state_attr('binary_sensor.meteoalarm',
                                'description')}} </font><br><br>
                                **Istruzioni**<br> <font color="{{mycolor}}">
                                {{state_attr('binary_sensor.meteoalarm',
                                'instruction')}} </font><br><br>
                                [MeteoAlarm]({{state_attr('binary_sensor.meteoalarm',
                                'web')|replace('http://','https://')}})
                          - type: conditional
                            conditions:
                              - entity: sensor.meteoalarm_custom
                                state_not: '0'
                            card:
                              type: markdown
                              card_mod:
                                style: >
                                  ha-card {background: none; border-radius: 0px;
                                  box-shadow: none;}
                              content: >
                                ___

                                #### METEOALARM CUSTOM

                                {% set mycolor = 'var(--primary-text-color)' %}

                                {%set day = {'today':'Oggi',
                                'tomorrow':'Domani'} %} {%set color =
                                {'Green':'Verde', 'Yellow':'Gialla',
                                'Orange':'Arancione', 'Red':'Rossa'} %} {%set
                                dict_code={'Green':'1','Yellow':'2','Orange':'3','Red':'4'}%}
                                {% set dict_type={'No-warnings': 'Nessun
                                Avviso','Wind': 'Vento', 'Snow/Ice':
                                'Neve-Ghiaccio','Thunderstorms': 'Temporali',
                                'Fog': 'Nebbia','Extreme high temperature':
                                'Caldo intenso', 'Extreme low temperature':
                                'Freddo intenso', 'Coastal Event': 'Eventi
                                Costieri','Forestfire': 'Incendi bischivi',
                                'Avalanches': 'Valanghe','Rain': 'Pioggia',
                                'Unavailable': 'Non disponibile','Flood':
                                'Alluvione', 'Rain-Flood': 'Pioggia-Alluvione'}
                                %} {%set type={'No-warnings': '0','Wind': '1',
                                'Snow/Ice': '2','Thunderstorms': '3', 'Fog':
                                '4','Extreme high temperature': '5', 'Extreme
                                low temperature': '6', 'Coastal Event':
                                '7','Forestfire': '8', 'Avalanches': '9','Rain':
                                '10', 'Unavailable': '11','Flood': '12',
                                'Rain-Flood': '13'}%} {%- if not
                                is_state('sensor.meteoalarm_custom', '0') -%}
                                  {%- for s  in ['today', 'tomorrow'] -%}
                                    {%- set v = state_attr('sensor.meteoalarm_custom', s) -%}
                                      {%- if v -%}
                                        {%- for d  in v %}
                                        {% set l = dict_code[d['code']] %}
                                        {% set t = type[d['event']] %}
                                **{{day[s]}}:** <img
                                src="https://www.meteoalarm.eu/documents/rss/wflag-l{{'0'
                                if not l else l.split(';')[0]}}-t{{'0' if not t
                                else t.split(';')[0]}}.jpg"> <font
                                color="{{d['code']}}">**{{dict_type[d['event']]}}**
                                </font> **Allerta:** <font
                                color="{{d['code']}}"><ha-icon
                                icon="{{'mdi:numeric-'~dict_code[d['code']]~'-box'}}"
                                style="width: 36px; height:
                                36px;"></ha-icon>{{color[d['code']]}}</font><br>
                                Descrizione: <font
                                color="{{mycolor}}">{{d['italiano']}}</font><br>
                                Data: <font
                                color="{{mycolor}}">{{d['start']|trim("CEST")|replace('.','/')}}
                                -
                                {{d['end']|trim("CEST")|replace('.','/')}}</font><br>
                                        {%- endfor -%}
                                      {%- endif -%}
                                  {%- endfor -%}
                                {%- endif %}

                                [MeteoAlarm]({{state_attr('binary_sensor.meteoalarm',
                                'web')}})
                          - type: conditional
                            conditions:
                              - entity: binary_sensor.lastquake
                                state: 'on'
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  entity_id:
                                    - binary_sensor.lastquake
                                  card_mod:
                                    style: >
                                      ha-card {background: none; border-radius:
                                      0px; box-shadow: none;}

                                      ha-markdown {padding-bottom: 0
                                      !important;}
                                  content: >-
                                    ___

                                    #### TERREMOTI - ULTIME 24h  [<img
                                    src="https://www.hsit.it/images/favicon.png"/>
                                    Hai Sentito Il
                                    Terremoto](http://www.haisentitoilterremoto.it/)

                                    {%- set url =
                                    "http://shakemap.rm.ingv.it/shake4/data/{}/current/products/{}.jpg"
                                    -%} {%- set url2 =
                                    "http://shakemap.ingv.it/shake4/data/{}/current/products/{}.jpg"
                                    -%} {%- set entityid =
                                    'binary_sensor.lastquake' -%} {%- set id =
                                    state_attr(entityid, 'event_id') -%} {%- set
                                    data_utc = state_attr(entityid,
                                    'publication_date') -%} {%- set magnitudo =
                                    (state_attr(entityid, 'magnitude')|float) if
                                    not none else '0' -%} {%- set code =
                                    {0:'White', 1:'Green', 2:'Gold', 3:'Orange',
                                    4:'Red'} -%} {%- set color =
                                    code[state_attr('binary_sensor.lastquake',
                                    'level')|int] -%} {%- set lat =
                                    state_attr(entityid, 'lat') -%} {%- set long
                                    = state_attr(entityid, 'long') -%} <font>

                                    **<font
                                    color="{{color}}">{{as_timestamp(data_utc)|timestamp_custom
                                    ('%H:%M:%S del %d/%m/%Y')}}</font>**<br><br>
                                    Un terremoto di magnitudo **<font
                                    color="{{color}}">{{magnitudo}}</font>**<br>
                                    è avvenuto nella zona:
                                    [{{state_attr(entityid,
                                    'region')}}](https://www.openstreetmap.org/?mlat={{lat}}&mlon={{long}}#map=12/{{lat}}/{{long}})<br>
                                    a <font
                                    color="{{color}}">**{{state_attr(entityid,
                                    'distance')}}**</font> km da casa,<br> con
                                    coordinate epicentrali {{lat}}, {{long}}.

                                    {% set state_dict = {'home': 'casa',
                                    'not_home': 'fuori casa', 'unknown': '❓'} %}
                                    {% for person in expand(states.person) %} {%
                                    if 'latitude' in person.attributes %} {% set
                                    distanza = distance(lat|default(0),
                                    long|default(0),
                                    person.entity_id|default(0)) %} <br>{{"📍{}
                                    ({}) a circa {} km
                                    dall'epicentro.".format(person.name|upper,
                                    state_dict.get(person.state, person.state),
                                    distanza|round(1)) }} {% else %} <br>{{"📍{}
                                    ({})".format(person.name|upper,
                                    state_dict.get(person.state, person.state))
                                    }} {% endif %} {% endfor %}</font><br>

                                    {% if magnitudo >= 3 %}
                                    [Intensity]({{url.format(id,'intensity')}})
                                    ~  [PGA]({{url.format(id,'pga')}}) ~
                                    [PGV]({{url.format(id,'pgv')}}) ~
                                    [PSA0]({{url.format(id,'psa0p3')}}) ~
                                    [PSA1]({{url.format(id,'psa1p0')}}) ~ 
                                    [HSIT](http://eventi.haisentitoilterremoto.it/{{id}}/{{id}}_mcs.jpg)<br>

                                    <!-- Example 
                                      Markdown
                                      [![](/local/hassiohelp/downloads/lastquake.jpg)](http://shakemap.rm.ingv.it/shake4/viewLeaflet.html?eventid={{id}})
                                    -->

                                    {% if is_state('binary_sensor.check_url',
                                    'on') %} <a
                                    href="http://shakemap.rm.ingv.it/shake4/view.html?eventid={{id}}"><img
                                    src="/local/hassiohelp/downloads/lastquake.jpg?t='{{now().timestamp()}}'"></a>
                                    {% else %} <a
                                    href="http://shakemap.rm.ingv.it/shake4/view.html?eventid={{id}}"><img
                                    src="http://shakemap.rm.ingv.it/shake4/data/{{id}}/current/products/pga.jpg"></a>
                                    {% endif %}{% endif %}

                                    <center> <a
                                    href="http://terremoti.ingv.it/"> <img
                                    src="https://www.ingv.it/images/INGV_Acronimo_50.png"
                                    width="100" ></a>

                                    <!-- Examples
                                      Interactive Map
                                      http://shakemap.rm.ingv.it/shake4/viewLeaflet.html?eventid=
                                      Map Google
                                      [{{state_attr(entityid, 'region')}}](http://maps.google.com/maps?z=8&q=loc:{{lat}}+{{long}})
                                      Map Open Streat Map
                                      [{{state_attr(entityid, 'region')}}](https://www.openstreetmap.org/?mlat={{lat}}&mlon={{long}}#map=8/{{lat}}/{{long}})
                                    -->
                                - type: custom:auto-entities
                                  show_empty: false
                                  sort:
                                    attribute: publication_date
                                    method: attribute
                                    reverse: true
                                    count: 4
                                    first: 0
                                  filter:
                                    include:
                                      - entity_id: geo_location.*
                                        attributes:
                                          source: ingv_centro_nazionale_terremoti
                                  card:
                                    type: entities
                                    entity_id: this.entity_id
                                    card_mod:
                                      style: >
                                        ha-card {background: none;
                                        border-radius: 0px; box-shadow: none;}
                          - type: custom:auto-entities
                            show_empty: false
                            filter:
                              include:
                                - entity_id: geo_location.*
                                  attributes:
                                    source: gdacs
                                    alert_level: /^((?!Green).)*$/
                            card:
                              type: markdown
                              card_mod:
                                style: >
                                  ha-card {background: none; border-radius: 0px;
                                  box-shadow: none;}
                              content: >
                                ___


                                #### GDACS


                                {% set mycolor = 'var(--primary-text-color)' %}


                                {% for state in states.geo_location %}

                                {% if state.attributes.source=="gdacs" %}

                                <font color="{{ state.attributes.alert_level
                                }}"><ha-icon icon="{{ state.attributes.icon
                                }}"></ha-icon> **{{ state.name }}</font>**


                                Descrizione: <font color="{{mycolor}}">{{
                                state.attributes.description }}</font>


                                *Rilasciato: <font color="{{mycolor}}">{{
                                state.attributes.from_date.strftime("%d.%m.%Y
                                %H:%M") }}*</font>

                                *Fine: <font color="{{mycolor}}">{{
                                state.attributes.to_date.strftime("%d.%m.%Y
                                %H:%M") }}*</font>

                                {% endif %}

                                {% endfor %}
                    - type: conditional
                      conditions:
                        - entity: input_select.meteo_map
                          state_not: Nessuna
                      card:
                        type: picture-entity
                        card_mod:
                          style: |
                            ha-card {
                              border-radius: var(--ha-card-border-radius);
                              border: solid 1px var(--accent-color);
                              box-shadow: none;
                              margin: 16px;
                            }
                        title: Nuvole
                        entity: input_select.meteo_map
                        tap_action:
                          action: call-service
                          service: input_select.select_next
                          service_data:
                            entity_id: input_select.meteo_map
                        hold_action:
                          action: call-service
                          service: input_select.select_previous
                          service_data:
                            entity_id: input_select.meteo_map
                        state_image:
                          Nuvole e Sole: https://api.sat24.com/animated/IT/visual/3/
                          Nuvole Infrared: https://api.sat24.com/animated/IT/infraPolair/3/
                          Temperatura Nuvole Infrared: >-
                            https://www.meteo60.fr/satellites/animation-satellite-ir-france.gif
                          Pioggia: https://api.sat24.com/animated/IT/rainTMC/3/
                          Neve: https://api.sat24.com/animated/EU/snow/3/
                          Il Meteo: http://cdn-radar.ilmeteo.it/italy.gif
                          Burze: https://burze.dzis.net/italia_fulmine_lebhaft.gif
                          Burze Nord Ovest: >-
                            https://burze.dzis.net/italia_fulmine_lebhaft_gruppi_nw.gif
                          Burze Nord Est: >-
                            https://burze.dzis.net/italia_fulmine_lebhaft_gruppi_ne.gif
                          Burze Sud Ovest: >-
                            https://burze.dzis.net/italia_fulmine_lebhaft_gruppi_sw.gif
                          Burze Sud Est: >-
                            https://burze.dzis.net/italia_fulmine_lebhaft_gruppi_se.gif
                          WWLLN: >-
                            https://wwlln.net/WWLLN_movies/Movie_of_Lightning_in_EurAfrica_BIG.gif
                        entities:
                          - entity: input_select.meteo_map
                    - type: conditional
                      conditions:
                        - entity: input_select.geo_map
                          state: Posizione Geografica
                      card:
                        type: map
                        card_mod:
                          style: |
                            ha-card {
                              border-radius: var(--ha-card-border-radius);
                              border: solid 1px var(--accent-color); 
                              box-shadow: none;
                              margin: 16px;
                            }
                        geo_location_sources:
                          - all
                        dark_mode: true
                        default_zoom: 8
                        aspect_ratio: '16:9'
                        hours_to_show: 72
                    - type: conditional
                      conditions:
                        - entity: input_select.meteo_iframe
                          state: Windy Alert
                      card:
                        type: iframe
                        card_mod:
                          style: |
                            ha-card {
                              border-radius: var(--ha-card-border-radius);
                              margin-top: 8px;
                            }
                        aspect_ratio: 100%
                        url: >-
                          https://embed.windy.com/embed2.html?lat=42.000&lon=12.000&zoom=5
                          &level=surface&overlay=capAlerts&menu=&type=map&location=coordinates
                          &detail=&detailLat=42.000&detailLon=12.000
                    - type: conditional
                      conditions:
                        - entity: input_select.meteo_iframe
                          state: DPC Radar
                      card:
                        type: iframe
                        card_mod:
                          style: |
                            ha-card {
                              border-radius: var(--ha-card-border-radius);
                              margin-top: 8px;
                            }
                        aspect_ratio: 100%
                        url: >-
                          https://radar.protezionecivile.it/radar-dpc/#/pages/dashboard
                    - type: conditional
                      conditions:
                        - entity: input_select.meteo_iframe
                          state: DPC Bollettino Criticità
                      card:
                        type: custom:config-template-card
                        entities:
                          - sensor.date
                        card:
                          type: iframe
                          card_mod:
                            style: |
                              ha-card {
                                border-radius: var(--ha-card-border-radius);
                                margin-top: 8px;
                              }
                          aspect_ratio: 100%
                          url: >-
                            ${'https://servizio-mappe.protezionecivile.it/#/view/dashboard?x=11.756&y=41.495&
                            zoom=5.8&basemap=BING_AERIAL&appname=BollettinodiCriticità&file=
                            https://raw.githubusercontent.com/pcm-dpc/DPC-Bollettini-Criticita-Idrogeologica-Idraulica/master/files/'
                            +states['sensor.dpc_alert'].attributes.id+'.json&hidden=info,minimap&fase=today'}
                    - type: conditional
                      conditions:
                        - entity: input_select.meteo_iframe
                          state: DPC Vigilanza Meteo
                      card:
                        type: custom:config-template-card
                        entities:
                          - sensor.date
                        card:
                          type: iframe
                          card_mod:
                            style: |
                              ha-card {
                                border-radius: var(--ha-card-border-radius);
                                margin-top: 8px;
                              }
                          aspect_ratio: 100%
                          url: >-
                            ${'https://servizio-mappe.protezionecivile.it/#/view/dashboard?x=11.756&y=41.495&
                            zoom=5.8&basemap=OPEN_STREET_MAP&appname=Bollettino
                            di Vigilanza&file=
                            https://raw.githubusercontent.com/pcm-dpc/DPC-Bollettini-Vigilanza-Meteorologica/master/files/'
                            +states['sensor.dpc_vigilance'].attributes.id+'.json&hidden=minimap,info&fase=today'}
                    - type: conditional
                      conditions:
                        - entity: input_select.meteo_iframe
                          state: Blitzortung
                      card:
                        type: iframe
                        card_mod:
                          style: |
                            ha-card {
                              border-radius: var(--ha-card-border-radius);
                              margin-top: 8px;
                            }
                        aspect_ratio: 100%
                        url: https://map.blitzortung.org/#5.11/42.5/12.51
                    - type: conditional
                      conditions:
                        - entity: input_select.meteo_iframe
                          state: Radareu
                      card:
                        type: iframe
                        card_mod:
                          style: |
                            ha-card {
                              border-radius: var(--ha-card-border-radius);
                              margin-top: 8px;
                            }
                        aspect_ratio: 100%
                        url: http://www.radareu.cz/?lng=uk&core
                    - type: conditional
                      conditions:
                        - entity: input_select.meteo_iframe
                          state: Volcanodiscovery
                      card:
                        type: iframe
                        card_mod:
                          style: |
                            ha-card {
                              border-radius: var(--ha-card-border-radius);
                              margin-top: 8px;
                            }
                        aspect_ratio: 100%
                        url: >-
                          https://earthquakes.volcanodiscovery.com/?L=12&zoom=6&lat=41&lon=13&minMag=3
                persist_state: false
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Impostazioni
            icon: mdi:cog
            state: null
            hash: '#settings'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 12
          - type: custom:button-card
            template: button_toggle
            tap_action:
              action: toggle
            variables:
              name: Vacanza Mode
              icon: mdi:airplane-takeoff
              entity: input_boolean.modo_vacanza
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: automazioni
                default: show
                card:
                  square: false
                  type: grid
                  columns: 1
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: two
                          variables:
                            name: Automazioni
                            icon: mdi:home-automation
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - automazioni: show
                                - push: hide
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: three
                          variables:
                            name: Push varsler
                            icon: mdi:cellphone-information
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - automazioni: hide
                                - push: show
                    - square: false
                      columns: 2
                      type: grid
                      cards:
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Lys under trapp
                            icon: mdi:lamp
                            entity: automation.auto_off_salone
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Lys ute
                            icon: mdi:coach-lamp
                            entity: automation.auto_cameretta_on_off
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Magic Mirror
                            icon: mdi:mirror-rectangle
                            entity: automation.auto_off_aspiratore
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Rolf hver dag
                            icon: mdi:vacuum
                            entity: automation.auto_off_bajour
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Lys gang
                            icon: mdi:ceiling-light-multiple
                            entity: automation.auto_off_camera
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Nattlys
                            icon: mdi:sleep
                            entity: automation.auto_off_cameretta
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: NSPanel
                            icon: mdi:monitor-small
                            entity: automation.auto_off_cucina
              - type: custom:local-conditional-card
                id: push
                default: hide
                card:
                  square: false
                  type: grid
                  columns: 1
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: two
                          variables:
                            name: Automasjoner
                            icon: mdi:home-automation
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - automasjoner: show
                                - push: hide
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: three
                          variables:
                            name: Push varsler
                            icon: mdi:cellphone-information
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - automasjoner: hide
                                - push: show
                    - square: false
                      columns: 1
                      type: grid
                      visibility:
                        - condition: user
                          users:
                            - 9f7239064e9a433cba9661df0f0a602b
                      cards:
                        - type: custom:button-card
                          template: button_toggle
                          tap_action:
                            action: toggle
                          variables:
                            name: Alle varsler
                            icon: mdi:cellphone
                            entity: input_boolean.kiosk_mode
                    - square: false
                      columns: 1
                      type: grid
                      visibility:
                        - condition: user
                          users:
                            - ed472ae9f2ad4aa9a7d7e6864cd838b2
                      cards:
                        - type: custom:button-card
                          template: button_toggle
                          tap_action:
                            action: toggle
                          variables:
                            name: kioskmode
                            icon: mdi:cellphone
                            entity: input_boolean.kiosk_mode
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Wifi
            icon: mdi:wifi
            state: null
            hash: '#wifi'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: vertical-stack
            cards:
              - type: custom:gap-card
                height: 6
              - type: entities
                show_header_toggle: 'off'
                style: |
                  .card-header {
                    padding: 0px 0px 0px 0px !important;
                  }
                entities:
                  - type: section
                    label: FritzBox 7590 VDSL - FTTC
                  - type: custom:hui-element
                    card_type: vertical-stack
                    cards:
                      - type: horizontal-stack
                        cards:
                          - type: picture
                            style: |
                              ha-card {
                                  --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                                  --ha-card-background: "rgba(0, 0, 0, 0.0)";
                                  --ha-card-box-shadow: 'none';
                              }
                            image: /local/foto-pkg/fritz-box.png
                          - type: vertical-stack
                            cards:
                              - type: custom:button-card
                                layout: icon_name_state2nd
                                entity: sensor.fritzbox
                                name: Stato Connesione
                                show_icon: true
                                show_state: true
                                icon: mdi:connection
                                state_display: >
                                  [[[ return entity.state === 'on' ? 'Connesso'
                                  : entity.state === 'off' ? 'Disconnesso' :
                                  'Sconosciuto'; ]]]
                                styles:
                                  grid:
                                    - grid-template-columns: 50px auto
                                  icon:
                                    - padding: 0px 0px
                                    - height: 30px
                                    - width: 30px
                                  card:
                                    - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                    - '--ha-card-box-shadow': none
                                  state:
                                    - padding: 0px 10px
                                    - justify-self: start
                                    - font-family: Roboto, sans-serif
                                    - font-size: 15px
                                  name:
                                    - padding: 0px 10px
                                    - justify-self: start
                                    - color: var(--primary-text-color)
                              - type: custom:button-card
                                layout: icon_name_state2nd
                                label: >-
                                  [[[ return
                                  states['sensor.fritzbox'].attributes.vecchio_ip;
                                  ]]]
                                entity: script.fritz_box_riconnetti
                                name: Cambia IP
                                show_icon: true
                                show_state: false
                                show_label: true
                                icon: mdi:ip
                                styles:
                                  grid:
                                    - grid-template-columns: 50px auto
                                  icon:
                                    - padding: 0px 0px
                                    - height: 30px
                                    - width: 30px
                                  card:
                                    - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                    - '--ha-card-box-shadow': none
                                  state:
                                    - padding: 0px 10px
                                    - justify-self: start
                                    - font-family: Roboto, sans-serif
                                    - font-size: 15px
                                  label:
                                    - padding: 0px 10px
                                    - justify-self: start
                                    - font-family: Roboto, sans-serif
                                    - font-size: 15px
                                  name:
                                    - padding: 0px 10px
                                    - justify-self: start
                                    - color: var(--primary-text-color)
                                tap_action:
                                  confirmation:
                                    text: Vuoi Cambiare IP?
                                  action: toggle
                              - type: custom:button-card
                                layout: icon_name_state2nd
                                label: >-
                                  [[[ return
                                  states['sensor.ultimo_riavvio_fritz'].state;
                                  ]]]
                                entity: script.fritz_box_reboot
                                name: Riavvia
                                show_icon: true
                                show_state: false
                                show_label: true
                                icon: mdi:restart
                                styles:
                                  grid:
                                    - grid-template-columns: 50px auto
                                  icon:
                                    - padding: 0px 0px
                                    - height: 30px
                                    - width: 30px
                                  card:
                                    - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                    - '--ha-card-box-shadow': none
                                  state:
                                    - padding: 0px 10px
                                    - justify-self: start
                                    - font-family: Roboto, sans-serif
                                    - font-size: 15px
                                  label:
                                    - padding: 0px 10px
                                    - justify-self: start
                                    - font-family: Roboto, sans-serif
                                    - font-size: 15px
                                  name:
                                    - padding: 0px 10px
                                    - justify-self: start
                                    - color: var(--primary-text-color)
                                tap_action:
                                  confirmation:
                                    text: Vuoi Riavviare Il FritzBox?
                                  action: toggle
                      - type: vertical-stack
                        cards:
                          - type: custom:bar-card
                            show_icon: true
                            align: split
                            max: 100
                            positions:
                              icon: inside
                              indicator: inside
                              name: inside
                              value: inside
                            unit_of_measurement: Mbps
                            severity:
                              - color: lightgreen
                                from: 0
                                to: 100
                            style: |
                              ha-card {
                                --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                                --ha-card-background: "rgba(0, 0, 0, 0.0)";
                                --paper-item-icon-color: 'var(--text-primary-color';
                                --ha-card-box-shadow: 'none';
                              }
                            entity: sensor.portante_download_agganciata
                            name: Portante Download
                            entity_row: true
                          - type: custom:bar-card
                            show_icon: true
                            align: split
                            columns: 1
                            max: 20
                            positions:
                              icon: inside
                              indicator: inside
                              name: inside
                              value: inside
                            unit_of_measurement: Mbps
                            severity:
                              - color: lightgreen
                                from: 0
                                to: 20
                            style: |
                              ha-card {
                                --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                                --ha-card-background: "rgba(0, 0, 0, 0.0)";
                                --paper-item-icon-color: 'var(--text-primary-color';
                                --ha-card-box-shadow: 'none';
                              }
                            entity: sensor.portante_upload_agganciata
                            name: Portante Upload
                            entity_row: true
                      - type: vertical-stack
                        cards:
                          - type: custom:bar-card
                            show_icon: true
                            align: split
                            columns: 1
                            max: 50
                            positions:
                              icon: inside
                              indicator: inside
                              name: inside
                              value: inside
                            unit_of_measurement: Mbps
                            severity:
                              - color: lightgreen
                                from: '0'
                                to: 24
                              - color: lightorange
                                from: 25
                                to: 29
                              - from: 30
                                to: 50
                                color: lightred
                            style: |
                              ha-card {
                                --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                                --ha-card-background: "rgba(0, 0, 0, 0.0)";
                                --paper-item-icon-color: 'var(--text-primary-color';
                                --ha-card-box-shadow: 'none';
                              }
                            entity: sensor.download_mbps
                            name: Banda Usata Download
                            entity_row: true
                          - type: custom:bar-card
                            show_icon: true
                            align: split
                            columns: 1
                            max: 20
                            positions:
                              icon: inside
                              indicator: inside
                              name: inside
                              value: inside
                            unit_of_measurement: Mbps
                            severity:
                              - color: lightgreen
                                from: '0'
                                to: 13
                              - color: orange
                                from: 14
                                to: 17
                              - from: 18
                                to: 20
                                color: lightred
                            style: |
                              ha-card {
                                --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                                --ha-card-background: "rgba(0, 0, 0, 0.0)";
                                --paper-item-icon-color: 'var(--text-primary-color';
                                --ha-card-box-shadow: 'none';
                              }
                            entity: sensor.upload_mbps
                            name: Banda Usata Upload
                            entity_row: true
                  - type: custom:paper-buttons-row
                    buttons:
                      - icon: hass:cog-outline
                        state: '{{ states(''group.notifiche_fritz_box'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Impostazioni
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.time
                                    name: Orologio
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: input_datetime.orario_fine_notifiche_fritz
                                    icon: mdi:timer
                                    name: Notifiche
                                    state_header: FINE
                                    entities:
                                      - entity: >-
                                          input_datetime.orario_inizio_notifiche_fritz
                                        name: INIZIO
                                  - type: divider
                                  - entity: input_boolean.notify_push_fritz
                                    type: custom:multiple-entity-row
                                    name: Notifica Online
                                    icon: mdi:cellphone-message
                                    state_header: PUSH
                                    toggle: true
                                    entities:
                                      - entity: input_boolean.notify_google_fritz
                                        name: GOOGLE
                                        toggle: true
                                      - entity: input_boolean.notify_alexa_fritz
                                        name: ALEXA
                                        toggle: true
                                  - type: divider
                                  - entity: input_boolean.notify_ip_push
                                    type: custom:multiple-entity-row
                                    name: Notifica Cambio IP
                                    icon: mdi:cellphone-message
                                    state_header: PUSH
                                    toggle: true
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: script.fritz_box_reboot
                                    state_header: RIAVVIA
                                    type: custom:multiple-entity-row
                                    name: Tools
                                    icon: mdi:hexagon-multiple-outline
                                    toggle: true
                                    entities:
                                      - entity: script.fritz_box_riconnetti
                                        name: CAMBIA IP
                                        icon: false
                                        toggle: true
                                      - entity: script.fritz_box_clean
                                        name: PULIZIA
                                        icon: false
                                        toggle: true
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                      - icon: hass:speedometer
                        state: '{{ states(''null'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Statistiche
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.portante_upload_agganciata
                                    state_header: UPLOAD
                                    type: custom:multiple-entity-row
                                    icon: mdi:connection
                                    name: Portante
                                    entities:
                                      - entity: sensor.portante_download_agganciata
                                        name: DOWNLOAD
                                        icon: false
                                  - type: divider
                                  - entity: sensor.upload_mbps
                                    state_header: UPLOAD
                                    type: custom:multiple-entity-row
                                    name: Banda Usata Mbps
                                    icon: mdi:chart-donut
                                    entities:
                                      - entity: sensor.download_mbps
                                        name: DOWNLOAD
                                        icon: false
                                  - type: divider
                                  - entity: sensor.upload_mbs
                                    state_header: UPLOAD
                                    type: custom:multiple-entity-row
                                    name: Banda Usata MB/s
                                    icon: mdi:chart-donut-variant
                                    entities:
                                      - entity: sensor.download_mbs
                                        name: DOWNLOAD
                                        icon: false
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.fritzbox
                                    attribute: rumore_up
                                    state_header: UPLOAD
                                    type: custom:multiple-entity-row
                                    icon: mdi:contactless-payment
                                    name: Rumore SNR
                                    entities:
                                      - entity: sensor.fritzbox
                                        type: attribute
                                        attribute: rumore_down
                                        name: DOWNLOAD
                                        icon: false
                                  - type: divider
                                  - entity: sensor.fritzbox
                                    attribute: attenuazione_up
                                    state_header: UPLOAD
                                    type: custom:multiple-entity-row
                                    name: Attenuazione
                                    icon: mdi:state-machine
                                    entities:
                                      - entity: sensor.fritzbox
                                        type: attribute
                                        attribute: attenuzione_down
                                        name: DOWNLOAD
                                        icon: false
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.fritzbox
                                    type: attribute
                                    attribute: uptime
                                    name: 'FritzBox Uptime:'
                                    icon: mdi:router-wireless
                                  - type: divider
                                  - entity: sensor.fritzbox
                                    type: attribute
                                    attribute: uptime_connect
                                    name: 'Connessione Uptime:'
                                    icon: mdi:progress-clock
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.fritzbox
                                    attribute: firmware_disponibilie
                                    icon: mdi:router
                                    name: Versione Fritz OS
                                    state_header: DISPONIBILE
                                    state_color: false
                                    entities:
                                      - type: attribute
                                        entity: sensor.fritzbox
                                        attribute: firmware_installato
                                        name: INSTALLATA
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.fritzbox
                                    attribute: ip
                                    type: attribute
                                    name: 'Indirizzo IP:'
                                    icon: mdi:ip
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
              - type: custom:button-card
                entity: sensor.fritzbox
                show_icon: false
                show_name: false
                custom_fields:
                  user: |
                    [[[
                      return '<img src = "/local/images/D0m0t1c4.png" width="150" height="150" />'
                    ]]]
                  pass: |
                    [[[
                      return '<img src = "/local/images/wlan2.png" width="150" height="150" />'
                    ]]]
                  icon: |
                    [[[
                      return '<img src = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxAQEA8ODw8ODg4ODw4QDxAPDQ8QDQ4NFRYWFhYVFRYYHSggGBolGxUWITEhJSkrLi4uFyAzODMtNygtLisBCgoKDg0OGxAQFy4lICYuLS0vMi8rLS0tLS8wKy0tLS0tLS0tKystLy0tLS0tKystLS0tLS0tLSstLS0tLS0tLf/AABEIAOEA4QMBEQACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAABwECBAUGAwj/xABNEAABAwIDBQEJCgoJBQAAAAABAAIDBBEFITEGEhNBUWEHIjIzcXKBkbEUFUJSU5KUobPBFiNDVGJzdJPR0yQ1RYKistLh8BdjZIPC/8QAGwEBAAEFAQAAAAAAAAAAAAAAAAYBAgMEBQf/xAA+EQACAQICBQYLCAIDAQAAAAAAAQIDBAUREiExQVEGE2FxkbEiMjRygaGywdHh8BQVFjNCUlOiYpIjgtIk/9oADAMBAAIRAxEAPwDRqXEICAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgF0AQBAEAQBAEAQBAUQqEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAUQBUKhCgQBAEKhAEAQoEKhAEKBCoQBAEKBCoQoEKhAEAQoEKhCgQqEKBAEKhAEBagCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgKoC26FRdALoBdAEAugF0AugF0AugF0BbJIGgucQ1rRckmwAVrkorNlYxcnklrOp2S2IlrN2esD4KQ2LILllRUDrIRnGz9HwjztoYVifKCdeToWTyW+X/n47OvdJbLCo00p1tb4cDa7S7Awva52HiOhqGjvWtbakmtoJGDwT+m3PrdRax5S3VhXcJycoZ7Hra6s+7uOlc2FK4j4S1kdR1D2yupamJ1NVx+FE/Rw+Mw6OHkXp+H4nRvaanTf19btpFbywnbvivraZN10TRF0AugF0AugF0AugF0AugF0AugF0AugCAoqFQgF0AQBAEAugCAIAgLJZQ0XN9QAACXOccg1oGZJOQAVlWrClBzm8ki+nTlUkoxWbO/2J2FcXMrK9nftIdBSmxZAeT5eTpOYGjfKLjz7EsWq4nJ0qGcaW975fLv6tsqsrCFtHSlrl9bCSCWsC1ZSo2lPLYb2uTNXK65JChFzUjUquUdhtRWSOe2u2Up8SiDJbxzR5wVDPGwu+9vVvqsc1tYdidaxqadN6t64/B8GWVKUaiyZE1S2ein9x17dyX8jMPE1LOTmnr9+WRXr2EY3Rvqaaev38H0+p7iKX+GypNygtXDh8jKXdOQEAQC6AIAgCAIAgCAIBdAEBbdCougF0AugF0AugF0AugF0Ba99t0Brnve4NYxjS6SR50a1o1KwXFxTt6bqVZZJGWjQnWnoQWskzYXYbgltZWAPq7XjjydFRg8m/GktkX+gZXJ8+v7+tis8l4NJbF+7pfuXbwUrtLOFrHVrlvZ3UsrWCwWpc3dK0hkjbjFyZrpZS45qI3V5UuJZyeo2IxSLFqFwQGq2jwCnxCB1NUs3mnNjxYSQycnsPI/UdCtqzvKtpUVSk9fqa4MtnBSWTIdxShqMLmFNWHfhcf6NVgERyN6O+K4cwdO0WK9bwPlBSvaeTeTW3Pauvo4MjOIYY4vTpr0fD4HvdSc4QugF0AugK3QFLoBdALoBdAVugF0BS6AoqFQgCAIAgCAIAgLbuLmRsY6WWV25FEwXkkf0HtJ0AzK17q6pWtJ1arySM1C3nXnowRLGw2xLaT+k1BbLWvbYuGcdOw6xxX+t2p7BkvPru6rYnU06mqmtkfe+nuJXbW0LaGjHbvZ1lRUhos1cy+xKFCOhT2m3CGetmve4nMqKVasqstKTM6WRRYyoQBAEBg4xhcNVC+nqYxLDILEHVp5OB5OHIrPb3FShUVSk8mikoqSyZC+PYPPg8oimLpqCR1qaptmznw5OhA9YFxzA9V5P8oqd3DQnqktq4dK4ru2EdxHDc3pw29/zPRrrgEG4OYI0IUvTzI81lqZVAEAQBAEAQBAEAQBAWoVF0AQFC8DUgekKmaK6L4FpnZ8dnzgqaceJXm5cGU90M+Oz57VTnI8UObn+19hVkzSbBzSegcCVVTi9jDhJa2j0iY+SRkELDNPKd2KNurjzJPwWjUuOQC1b29pWdJ1ar1d/QjNbWs7iejH0vgS7sRsYyhaZpS2askbaSa3esZrw4gfBZ26uOZ5AQO4uKuIVOer6orZHh0vp7t3TKqFCFvDQgdHU1PwWrh4jiiiubpG1CnvZgkqMyk5PNmcKgCAogKoAgKIDHrqOOaN8E7Gywyjdex4u0j/mh1CyUqs6c1ODykg0pLJkMbT7OTYO/ebvz4XI6zH6yUrjo1/Z28+w5H0/k9ykjcLmquqXD3r3rccHEMNU/Dht7+v4mF75QfLRfvGqZfaKX7l2nA+zVv2PsK++MHy0X7xqc/S/cu0fZqv7H2FwrovlY/ntVeep/uXaU5ip+19hcKmM6SM+e1Xc5Diu0t5qf7X2Ho14OhB8hBVyaewtcWtqK3VSgugF0AugF0BS6oVF0ABQoaekpIjGwmKIktBJMbCSfUoPWnLnJa97PccNs7aVnSlKlFtxW2K4dR7ikiGkUQ/9TP4LFpy4m+rO3WylH/WPwLhAz5OP923+Cpm+JereitlOP+q+Bh4lVNpzHKGNOb22Fm6jyLfw6tzVRyyz1EV5XWsaltTjFJeFuXQT3sBsvFSQMnP4yoqY43yzOFnEOAcI2D4LBfTnqc1xLipVvKzr3L1LYtyIzRpQowUKaOgqqrkFwMSxTP8A46RtQp72YajxmCAIDie6e+ojjpZoJ6mBolfFKIJnxh2+3eYXbpzsWEf313sBjRqVJ06kE9WazSex6+/1G1Y0aVa5jTq55PNanlryzXdl6TgHY7Vx2kdX1waxzHOvVzuG4HC9xfPK6kjsLeSaVGOev9K4HavsItaNtOpBPNLPxmTPhGL09ZF7opZOLCXOaHBj2d83UWcAfqUEuLarbT5uqsn6H3ZkajJSWaM5YCoQFEB5VEDHsdFIxskUgLXseA5rmnUEHUK+E5RkpReTQaTR8/0QHCi/Vx/5QvSp+MydYev/AJKXmR9lHtZWm3khujoPUEKaK4FpiadWMPlY0quZa6NN7YLsRqqPEohUObHFvOcRGwsDGjdGp9J+oBd7DJKm8mm5P1Hl3Kacbms3S0YwjwWWb46vUbp2IRAlpcQWkg94+1x22suvK8oRk4uaTRGYYbd1IKpCk3F70irK6JxDRIwuOQG8Lk+RZI3FKTyjJP0mGpa1qaznBr0GRdZTALoAgLUKhAAgNfReLj80KC1vzJdbPeML8io+bHuLqmXcY99r7jS63Wysis2kbFzW5mjOplnops11LiFTK3fiopZW3tvRsle2/S4ask40oPRlUSfS0Rj8Tz/hXa/geOJ0ldO1rTh9W3dJNxTzG/8AhWemoU/C0tRzcSxaV7CMHDLJ57cyQKLujYnwIWD3GxrYo2ge5ZC4BoAzJk1yXPu7enWzi20uh/I6NngKq0Y1edyzWfi/Mr+H2I/Hpfop/wBa5f3FZ/5f7fI3fw+v5X/r8z0h7oWIA982ikHQwysPrEh9islgFq1qcl6U/cY5cn5/pqr0x+D9xvsK7o8LyG1cLqW/5Vr+NTg/pGwc0dpbYcyFzbjAKsFnRlpdGx/B9ufQc65w25t1pSjnHitfatT9WR2zHggOaQ5rgCCCC0g5gg8wuC008maBActZLUbslRNNO42d+NmkexrurWE7rfQF6PTo0qOqnBLqS79pLcMsLdUadbQzk0nm83r6Ny7DDxbxEvmH2hZ6Xjo2cV8iq9RsNmsaraSmjipqt8URHE3OBTPs94BOb2E/WtS8sba4qudWnm9m2S2dTRx7TAaU6EJ85JZpPdvWfA2n4X4p+fv+iUX8tav3RY/xf2l8TY/D1L+WX9fgPwvxT8/f9Eov5afdFj/F/aXxH4epfyy/r8B+F+Kfn7/olF/LT7osf4v7S+I/D1L+WX9fgPwvxT8/d9Eov5afdFj/ABf2l8Q+T9LL82X9fgcVh2JVD2hkNK+bhtY0mNsj9BbMNGV7Ls1YUoPOc0s+OS7zl0OUU6VKNONJPRSW17lkZMlRWt3S+hlja5wYHyRTMZvHQbxFlZF28nlGom+hpmxS5Q3FWahGis28lrZsliJWa/HKzhREA9/JdreoHM/86rNRhpSORjd99mt8ovwpal739b2Y+ylDYGdwzN2s8nM/d61JcPo5LnH6DybEq+bVJdbNlRnvXHrLP9o4fco/fPO4n1nqnJlaOF0ep97MLaCqdGyNzDZ/EuDYHQHr5Us5ONTSjtRr8qWpWsacv1S7l8zcUhcY2F5u4saXGwF3WzUxpt6C0tuR5BVS03o7Mz1V5YEBaqFSqABAYFF4uPzQoNW/Ml1s93wvyKj5q7hXMLopGtF3OY4AZZkq2DSkmzLfU5VLapCCzbTSOo7m217cLpDTT0lTK8zSSb0UkG5ZwaLd84G/erUubClXuuflLckQtYPfxjlzfrj8SRdm9uGYjJLFHBPTmFjHniujO81zi0W3CehXFx51aUI5SWi81qz3GvUtKtvLRrRyeWe59zZC8enpd7SpEtiJxhvklLzUWVMwjY55BIaLkDVXRjpPIz3NdUKUqslmlrMegxKOa4bcOGZa617dR1V86UobTUsMUoXmahmmtz7zNWI6R2Xc22oEcwwmYm0m9JRvJybkS6HsF2uc3y26KPY5h2lH7XDdql/67k+3iQfFaEbe6cI7JLSXRxXam/UcRTeA3yKRPaSvDfI6XmruPHFvES+YfaFfS8dFmK+RVeo86GsiEUQMsYIjYCC9twbDJVnCTk9Risr62jbU1KrFNRj+pcDIjq43HdbIxzjewDgSbZqxwktbRuU723qS0IVIt8E0eytNk8pamNhs97GEi9nOANuquUZPYjXq3dCi9GpNJ7dbyLfd0Py0Wh/KNVeblwMbxC0yf/NH/ZHWdwA95iHnU3skUf5V+NS/7e488tt5f3Q8Y90VXudjrwURLdbh9W4d+f7rTueUvWTBLTmqHOyXhT9nd27erIlGBWulN3Els1Lr3v3dpy67JJzlah5q6gNb4N91vZGNXe0rq2tByagt55njeJKtVlV/StUer57TsIYwxrWNFmtAAHYFKIxUUkiDTk5Nye1mHReLHaXn1vcfvUJuXnWk+lnuGBw0MOor/H3tmn2j76SCLr/9Ot9yzWkc31vI4PKqtlKEeEW+1/I6YKYnlhVALoC26FRdAAUBhUXi4/NCg1b8yXWz3bC/IqPmruPZYjfKoCygxqppa+lbTyuibUvp45gGtPEj4umYNtTp1WO6taNe2m6kc9FNroeRDuUbauKeX7fey8i1x0c//MVfHxV1LuJHhvklLzUYmLeIl8z7wstLx0WYt5FV6vejMw6riOF0FO3dM7KmqnkItvMis6NrXc++LiQP+2exacqU1fVaj8XRil0vb6svWRjk/SlO4U1sjm36U0l7/QUWwTg1mG1Bfi9AI8zHV0jARzPFBd6MyPQr7qKVjV0v2y7iB43cxrXuUdkcl6c8335eg2EVt0W0zt5LlWEvw3ySl5q7jHxbxEvmH2hZKXjosxXyKr1He9zfAqevwSKnqmOfEKuaSzXuYd9uQzHY4qL4xeVbXEnUpPJ6KWzMgNKKlDJmBtvsdQ4eKSWkjfG+SaVji6V7wWcJ50PaFt4RilzdynGtLNJJ7Et6Otg0FC+hl/l7LObXZJwaispmy19FC8XZK+njeAbEsdKQc+WRWZzdO2qTjtSb7EQrlKs7qHmr2pExHuVYR+by/Spf4qE/iG//AHr/AFRyeYgXVNBR4DSVM1HG5ktQY442vlc8SVHfBnhHRoLnG3JpVKdW4xa4hTrPNLNvJZZLf26kulmWjbuU1Tp7ZPL66tpGLRYZkuOZLj4TnE3c49pJJ9KmOrcegUKEaFKNKGxLL5+l6zV7Q1m5Hwx4Utx5Gc/Xp61sUIZyz4HGx+95mhzUX4U/Z39uztGzFFuMMzh30mTexn+59gUlsKOjHTe19x5XiNfSlza2LvN2Sugc01lJWxCOMOka07guHGxB5qFVac3NvRe09rw7ELSFrTg6sc1FZ6+g1kr2y10e6Q5rSyxBuDuje9q38Pp+HFPjmRDlPdQq1Zyg80opJr64s6e6k5AxdALoC26oVF0ABQGJReLj80KD1vzJdbPdcL8io+au4pXuIilIJBEbyCMiDZW0/GRkv5ONrUaeT0X3HvsTsNU4nTvqWV3ADJnRbrhK4khrXXuD+ktXE8WhY1FCVLPNZ56jz+ncXM1+bL/Z/E6bD+5DUMngnfiEcnBliksYpSSGuDrAk5aLk1uU1OdKUFSazTW1b0UnGrNpzm3lxeZzIde56uef8RXciskupdxPsN8kpeajFxXxEt9N3PyXCy0vHRbiuX2Opnw96L6CGNkbRF4BAcDzdfme1UqSk5eEZLGhQo0Iqh4r15730vp7th4Yy+VsTjFr8MjwgzmWq6iouXhGtjE7iFq3Q9PFLo9/Berte5BsK+JzMUq27ri29JEfCAcLcVw5ZHvR236KOcoMXjNO1ovV+p9W5e/s4kFo0/1M5Wn8BvkXfZ6FhvkdLzV3Hhi3iJfMPtCvpeOizFfIqvUSh3F/6pj/AGio9oUN5R+XPqRA6Hilnda8XQ/tMv2L1l5OfmVPNXtI62E+W0/+3ssjxSkmxrf7Tw79fSfbK+p5JV6peyQvlJ5XDzV7Uj6SK8xOaRHt/jHumsMbDeCi34m2OT6k+Nd6LBg8j+qmmC2nMW+nJeFPX6N3bt7CQ4Fa5t3EuqPvfu7Tm11ySmurcHZK8vdI+5sABu2AHILNCs4rJI4t5glO6qurOpLP0ZJGWIXgACVwAFgAyMWHqW797XCWSy7DlfguxzzcpdqMSTEOC90bnl7ncPh79g0XvckgZDRb1tiUublKpre4jGLcn6dK9hb0HlFpZuT4mS6ja5rhL+Mc8Wc45W7Gj4IH3Z3XHrXdSrPTkyd2WAWlrbugo55rW976uHQY2GlscnAkazisF45A1odJGe3rZd/DriFRJNLSPNsdw2rZVpQcs49fY/rYzbXXVI+LoBdAWqhUICoQGLReKj80KEVvzJdbPdML8io+au4txHxM36t/sVtPx0X4h5JV82Xcd33BcTh9yz0ZeBNx3zBhyLoi1jd5vWxGdtLjquNygUo1IyqR/wCNrLPg9Z51Qa2J6yUHMsR0vkVEbig6T4p7GbSeZ89R6el3tK9E3InOG+SUvNRj4t4iXzPvCyUvHRZi3kVXq96K4NQPZRU9STvQ1Ek0bTa3DmYb7l+e827h5rljqXEZXE6O+KT609/oer0o4vJ29yX2eb4uPvXvXpMlCVna9z3ajguZQVDvxL3BtLI7SF50hcfik+CeRO7puqPY1humncUlr/UuP+XXx7eJD8Vw77PLnKa8B/1fwe7hs4HAw1cYaGmSMOGRBe0EG+hF1JNCT1pHaw+8t42tOMqsU1FatJZ954YnVRmGUCSMksNgHtJKvpwkprUW4leW8rSpGNSLbW5olbuL/wBUx/tFR7QoXyj8ufUiF0PFLO614uh/aZfsXrLyc/MqeavaR1sJ8tp/9vZZHilJNjW/2nh36+k+2V9TySr1S9khfKTyuHmr2pE7baY0aKkklZ4554UAsTaZ17OI6NF3Hzbc15/htormuoS8Va31L47Dm5ZtRzyzeWb2Lp9BCrqiOMAOeG9C8kFx5m51Odz5VP1Fy8X1E0pXtjSgqcasckstpZ74Q/LR/OCu5qfAyfeVn/NHtHvhD8tH84JzU+A+8rP+aPaPfCH5aP5wTmp8B95Wf80e009TKx9ZEWlr2ncGWYOtwulYRanFNbyDcp68KtWU6ck1orWjbSMmaHRx7pyPDe4+COTbcz0PTXTPZq4S3Vbh4u35GK05X1KVkqU1nUWpPo49LW4w8Lwgh3GnJdJfeDSb2PUnmVuWtloZSnt3Ijt9iEqzeTzz2t7zdLonKCAICl0Ki6oBdVBrpmzxxjhlkhbYBvDINvLvLhV8JWuSbbJnZ8rrinCNHRilFZZvPd6TAmnrXtcwwts5pabNzsfStZYdNPPRZtVuVVSrTlTk45NNbHv9Jm7PQywtDrvgmjl34ntID2OsMx9YIORFwV0oWMK1vKjXjqZFK91o1lOk9xNmw22LawCnqN2OsYLuYMmTtH5SL726t8ma82xbCamGzcJrSovY+HWd21uo3Ec47SI2ael3tKkR6LhvkdLzUY2LeIl8z7wr6XjosxbyKr1e9Eh9zTC2VeA+5pLhsktRZw8KOQOBY9vaCAVFMZuZW+Kc7DakvSsta9JBbdtRUovJp5rrOJngfG+SGVu5NC90crc7B45jq0izgeYcFJadSFSCqQeprNfXFbH0k/sbtXVFVFt2NcHv+K6DTY3ijWNdE2zpHAh3NrAevb2Lao0m3pPYcrGsWhRhKhDJyaye9JdPT0btr4EtbM4TPieExwYvG9l3MdG9rgyplhb4DpLg2P1kWPaYXe3NOyvnUs2nx3pN7UvrV3ROEXKGUiz/AKQ4V/5f0hv+hV/Et7/j2fMrzETq9nMChoIBS0/E4Qe944jg528618wBlkuTeXdS7q87Uyz2ajJCKiskct3WvF0P7TL9i9djk5+ZU81e0jpYT5bT/wC3ssjxSkmxrf7Tw79fSfbK+p5JV6peyQvlJ5XDzV7Uj6Qlkt5V5klmc5LM4/bXBcOmaa3Ey/h07N0HjyNABJO6xjTm8n0m3QLsYbdXdN8xa5ZyfBdrfBFlaFPLORAlfw56hwo4DBC42ijMjpHNYOb3E68zyXolpRrOKhOWlLe8svpHMq1IwTk9SNzBgMIaA8FzuZ3iBfsC7kLGml4WtnGnf1XLwdSPT3jp/in57lf9io8PWW/bq3H1F8OEQscHtaQ5puO/JzV0LSlFqSRbO7qzi4tmfdbJqi6AXQC6oBdVBaqFQgCAIAgCAAkFr2ucySNwfG9hs+N40c09VgubancU3SqrNMy0qsqUtKLPbDsLdUQuggll99Q68ccjqdtNUw3Jc5hLQQ4DVt75XFxpDcRjPD6ydWK5n9yTzT3J632k1sceuZUVCnPLLVlkvgXVHc/x5zS10URa4WNpqfMeW61pYtYU8pOT6NTM1XE76tB05y1PbqXwJP7muDT0WHspqloZK2WZxAe143XEEZjJRDGbqnc3TqUnmsl0GtSi4xyZbtXsWyumZM2Z1M7hujmcxgc6Ro8WRfIOaSRfobcgRdh+LytKbho6SzzXRx7e826NzWoKSpSy0lr+K4Pdn09WXNbAdy/3PJ7rxDclmY93BhBD42kE2lefhE6gctTnkOlivKDnoc1bak1re/qXDpfZq26EKLz0pEoKLGwEAQGl2n2cjr2RMkkmi4MjpGuhMe9ctLSDvtcLWJW9Y387OUpQSeay159e5ovp1J0pqpTeTXVvWW8jTG+55irZ5BRPbJSjd4T5pacSu70b28A0fC3uSlFtj1o6SddZS35J5bfgZ5YriGeqp6o/AwqHueYs2rpaidsDhDPA9xE8VxGx4cchrzWWtjljKhOEG9aa2PejTr1Lm6mp1Xm1q3LV6MiWcbxeGkhfVVMm5E30ue86MYObjbRRC2tqlxUVKks33dL6DLOags2QFtXtPU4vUAWLIWE8CAHvI2/Gcebrau9XRei4VhMLaOhBZye1/WxHKuLhJaU3qMrDaBsLbDNx8J3M/wCyl1ChGlHJbSPXFeVaWb2GYs5rhAEAQBAEAQBAUuhUXQC6AIBdALoBdAWube2ZBaQ5rmktex4zDmkZgg5ghY6tKFWDhNZpl9OcqctKL1knbC7b8ctoq1wFScopbBrKq3Lo2Xs0Oo6LzDG8Clh7c4LSovtj8iTWd7Gusnqkdu9lvJyKiVai4PNa09jOgnmWrCVCAIAgCAIDylltkNVdGOZco5mm2gxyChhdU1L91gyY0WMkz+TGDmfqGpW7aWlW6qKnSWv1JcWKlRQWsgLaTH6rF6nff3rG7whhBPCp4ievMmwu7nbyAejYXhULeHN0tbe18flwRybi4SWnNmfh9E2Fu63Nx8J1s3H+HYpXQoRpRyRwK9eVWWbMtZjALoBdAEAugF0AugF0AugLVQqEAQBAEAQBAEBa9gcLHMeog8iDyParZwjOLjJZpl0JOD0ovWSJsNt0bsoq993GzYKp5ylOgZKeUnR2judjr5tj3J6VpnWt46VN7Y/t6V9aurZJLK+jWWjLVIkJzfUoTOGWtPNHTRRYwEAQFEB4yy8gr1HiXqJotp9o6fDoTPUG5NxFC0jizv6DoOrtB25A79lY1bypoU11vcvrci2pVUEQLjeMVWLVJllOQyYwX4NPF0aPv1JXo+GYZChDmqS63x6X7kci4uVFaUzZ0VIyJu60eU83HtUopUY0o5RODVqyqyzkZCyGIIAgCAIAgCAIAgCqC26oVF0AugF0AugF0AugF0AugKPaCCCAQciDoQqNJrJlU2nmjt9i9ujBu0lc8ugybDVPNzDyDJjzb0fy59V53yg5MOGdxZrV+qPvXw7OmQ2OIKp4FTb3knX6Zg6eRefs6xVAUJsgMeSW+Q0WRRyMijkc5tjtZBhkW/JaSoeDwKcGzpD8Z3xWdvqXSw/Dqt7PKOqK2vh8X9Mx1aygukgivrKrE6h1RUPLnHIm1o4mcmMbyA6ek5klekYdh0KcFSorKK2v3vi/rYce5uVDXLabilp2xNDGCw5nmT1KkdOnGnHRicOpUlUlpSPa6yGMXQC6AXQC6AXQC6AXQC6AXQC6AoqFQgCAIAgCAIAgCAIAUB1Gxu2bqLdp6jekodGuALpaMdnN0XZq3llkoNyh5LqvncWqylta3P5ncscQ/RU7SWqedkjGyRubJG9ocx7HBzHtOhBGoXm04ShJxksmjtp5njM43sr4rUZYrUcdt3tzDhrTEzdmrnDvYr3ZDfR0tvWG6nsC7OF4RUvXpS1Q48ehfEwVq6jqW0hQiorpn1FRI97nuvJK7V3Y0aDpYZBejWNhFRUKa0Yr6+mca5ulT6Wb2GJrGhrRZo5LvQhGC0Yo4s5ym9KReri0IAgCAIAgCAIAgCAIAgKIVCAIAgCAIAgCAIAgCAIDc7L7Tz4e6zBxqVziZKcutYnV8R+C7qND2aqMY5ybo36dSn4NTjufWdOzxCVLwZ60bHbPuq7reFh8Usckjc552BpjHSNlzd36R06HVRaz5L1Kcs7zZwW/rfDoOw7yM1lTZG1Fhj5XGWcuO8S47xJkkccySTnn11U5trLNLSWS3L62I5VxdqOqGtm9Y0AAAAAZADQBdZJJZI5TbbzZcqlAgCAIAgCAIAgCAIAgCAIC1UKhAEAQBAEAQBAEAQBAEAQAgc80GsIAgCAIAgCAIAgCAIAgCAIAgF1UFFQBAEAQBAEAQBAEKhCgQBAEKhCgQBAEAQBCoQBAEKBAEAQBAEAQqEKFEKhAEAugCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgKoC1UKhAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAUQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEKhAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAf/9k=" width="150" height="150" />'
                    ]]]
                styles:
                  grid:
                    - grid-template-areas: '"icon user" "icon pass"'
                    - grid-template-columns: max-content 1fr
                    - grid-template-rows: 1fr 1fr
                  card:
                    - background: var(--popupBG)
                    - padding-left: 16px
                  custom_fields:
                    user:
                      - justify-self: start
                      - font-size: 1em
                      - align-self: end
                      - padding-bottom: 6px
                      - color: var(--gray800)
                    pass:
                      - justify-self: start
                      - padding-top: 6px
                      - font-size: 1em
                      - align-self: start
                      - color: var(--gray800)
                    icon:
                      - justify-self: center
                      - align-self: center
                      - padding-right: 16px
                      - padding-bottom: '-8px'
                      - color: var(--gray800)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Consumi Attuali
            icon: mdi:power-plug
            state: null
            hash: '#energia'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 12
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: prezzo
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four five"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: two
                          variables:
                            name: Prezzi
                            icon: mdi:cash
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - prezzi: hide
                                - consumo: show
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: three
                          variables:
                            name: Consumo
                            icon: mdi:transmission-tower
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - prezzi: show
                                - consumo: hide
                    - type: custom:gap-card
                      height: 6
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: custom:button-card
                          template: sensor_big
                          variables:
                            name: Prezzo Elettricità
                            label: |
                              [[[
                                return Math.round(states['sensor.pun_prezzo_fascia_corrente'].state * 100) / 100 + '<span style="font-size:14px"> €/kWh</span>'
                              ]]]   
                            icon: mdi:lightning-bolt
                            background: var(--popupBG)
                        - type: custom:button-card
                          template: sensor_big
                          variables:
                            name: Costo Stimato Bolletta
                            label: |
                              [[[
                                return states['sensor.bolletta_tot'].state + '<span style="font-size:14px"> €</span>'
                              ]]]   
                            icon: mdi:receipt-text
                            background: var(--popupBG)
                    - square: true
                      type: grid
                      columns: 1
                      cards:
                        - type: custom:button-card
                          variables:
                            power_meter: sensor.watt
                          triggers_update: all
                          styles:
                            card:
                              - background-color: var(--card-background-color)
                              - border-radius: 20px
                            grid:
                              - grid-template-areas: |-
                                  " logo logo watt watt watt . "
                                  " . marquee marquee marquee marquee . "
                                  " graph graph graph graph graph graph "
                                  " . lista setting  push media . "
                              - grid-template-columns: 1.4vw repeat(4, 1fr) 1.3vw
                              - grid-template-rows: min-content 1vw min-content min-content
                              - grid-column-gap: 0.1em
                          custom_fields:
                            marquee:
                              card:
                                type: custom:button-card
                                tap_action:
                                  action: none
                                style: |
                                  ha-card {  
                                    background: none;  
                                    border: 100px;  
                                    }
                                name: |
                                  [[[
                                    if (states['sensor.marquee_power_control'].state !== 'unknown') { 
                                      return `<marquee style="width: 100%; margin-right: 150px; margin-top: 14px;"><span style='color: var(--secondary-text-color);'>${states['sensor.marquee_power_control'].state}</span></marquee>`; 
                                    } else { 
                                      return `<marquee style="width: 100%; margin-right: 150px; margin-top: 14px;"><span style='color: var(--secondary-text-color);'>In attesa della prima attivazione</span></marquee>`; 
                                    } 
                                  ]]]
                            watt:
                              card:
                                type: custom:button-card
                                label: |
                                  [[[ 
                                      return 'Istantaneo '+ states[variables.power_meter].state + 'W'; 
                                  ]]]
                                show_label: true
                                tap_action:
                                  action: none
                                name: Power Control
                                styles:
                                  grid:
                                    - grid-template-areas: |-
                                        " l"
                                        " n " 
                                        " timer "
                                  label:
                                    - font-color: var(--secondary-text-color)
                                    - justify-self: left
                                    - padding-left: 28px
                                    - margin-top: 14px
                                  card:
                                    - background-color: transparent
                                    - border-style: none
                                    - height: 120px
                                  name:
                                    - font-weight: bold
                                    - font-size: clamp(16px, 30px, 35px)
                                    - letter-spacing: '-2.0px'
                                    - justify-self: left
                                    - padding-left: 25px
                                    - color: var(--primary-text-color)
                                custom_fields:
                                  timer:
                                    card:
                                      type: custom:button-card
                                      entity: timer.distacco_carico
                                      layout: name_state
                                      name: |
                                        [[[ 
                                          if (states['input_boolean.check_distacco'].state === 'on') { 
                                            return 'Protezione in corso 🛡️ '; } 
                                          else if (states['timer.distacco_carico'].state !== 'idle') { 
                                            return 'Distacco tra '; }
                                          else { 
                                            return 'Assorbimento: Ok👍'; } 
                                        ]]]
                                      show_icon: false
                                      show_state: |
                                        [[[ 
                                          return (states['timer.distacco_carico'].state !== 'idle'); 
                                        ]]]
                                      styles:
                                        card:
                                          - background-color: |
                                              [[[ 
                                                if (states['input_boolean.check_distacco'].state === 'on') { 
                                                  return 'Chocolate'; } 
                                                else if (states['timer.distacco_carico'].state !== 'idle') { 
                                                  return 'red'; } 
                                                else { 
                                                  return 'var(--disabled-text-color)';} 
                                              ]]]
                                          - border-style: none
                                          - width: calc(140% - 5px)
                                          - height: 30px
                                          - margin-left: 6px
                                          - justify-self: left
                                        name:
                                          - margin-left: '-4px'
                                          - margin-top: '-4px'
                            logo:
                              card:
                                type: custom:button-card
                                color: transparent
                                entity: automation.power_control
                                name: >
                                  [[[ 

                                  if (states['automation.power_control'].state
                                  == 'on') return "Attivo"; 

                                  else return "Spento"; 

                                  ]]]
                                icon: >
                                  [[[ 

                                  if (states['automation.power_control'].state
                                  == 'on') return "mdi:flash"; 

                                  else return "mdi:hand-back-right-off"; 

                                  ]]]
                                show_entity_picture: false
                                styles:
                                  card:
                                    - background-color: |
                                        [[[ 
                                          if (states['automation.power_control'].state == 'on') return "OliveDrab   "; 
                                          else return "#606060"; 
                                        ]]]
                                    - border-radius: 30%
                                    - border-style: none
                                    - padding-bottom: 6px
                                    - width: 70%
                                    - margin-left: 30%
                                  name:
                                    - font-weight: bold
                                    - font-size: clamp(12px, 1vw, 15px)
                                    - color: var(--primay-text-color)
                                  icon:
                                    - width: calc(70% - 8px)
                                    - color: |
                                        [[[ 
                                          if (states['automation.power_control'].state == 'on') return "white   "; 
                                          else return "#252525"; 
                                        ]]]
                                tap_action:
                                  action: call-service
                                  service: automation.toggle
                                  service_data:
                                    entity_id: automation.power_control
                            graph:
                              card:
                                type: custom:apexcharts-card
                                graph_span: 1h
                                header:
                                  show: true
                                  show_states: false
                                  colorize_states: true
                                series:
                                  - entity: '[[[return variables.power_meter ]]]'
                                    stroke_width: 2
                                    show:
                                      extremas: true
                                card_mod:
                                  style: |
                                    ha-card {  
                                      border: 100px;  
                                      background: none;  
                                      width: 97%;  
                                      padding-left: 10px  
                                      }
                            lista:
                              card:
                                type: custom:button-card
                                icon: mdi:view-list-outline
                                show_state: false
                                show_icon: true
                                show_name: false
                                styles:
                                  card:
                                    - background-color: var(--primary-color)
                                    - border-radius: 18px
                                    - border-style: none
                                    - box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.2)
                                    - height: 50px
                                    - width: 70px
                                  icon:
                                    - width: 30px
                                    - height: 30px
                                    - color: white
                                    - align-self: start
                                    - text-align: start
                                    - padding: 8px
                                tap_action:
                                  action: fire-dom-event
                                  browser_mod:
                                    service: browser_mod.popup
                                    data:
                                      title: Lista  Carichi
                                      card_mod:
                                        style: |
                                          :host { 
                                            --ha-card-background: var(--app-header-background-color); 
                                            --mdc-dialog-scrim-color: rgba(15,15,15,0.9); 
                                            }
                                      content:
                                        type: vertical-stack
                                        cards:
                                          - type: custom:mushroom-select-card
                                            style: |
                                              ha-card {  
                                                background: var(--ha-card-background);
                                                border: 100px; 
                                                border-radius: 0px;
                                                }
                                            entity: >-
                                              select.escludi_dispositivi_dal_ripristino_carico
                                            fill_container: true
                                            icon_type: none
                                            secondary_info: none
                                          - type: markdown
                                            style: |
                                              ha-card {  
                                                background: var(--ha-card-background);
                                                border: 100px; 
                                                border-radius: 0px;
                                                }
                                            content: >-
                                              ```  {% if
                                              state_attr('sensor.dispositivi_esclusi_dal_ripristino_carico',
                                              'list_exclude') is not none and
                                              state_attr('sensor.dispositivi_esclusi_dal_ripristino_carico',
                                              'list_exclude')|count != 0 %} {% for t
                                              in
                                              state_attr('sensor.dispositivi_esclusi_dal_ripristino_carico',
                                              'list_exclude') %}  
                                                {{ states[t].name -}}  
                                              {% endfor %}  {% else %}
                                                  Nessuno
                                              {% endif %}
                                          - type: markdown
                                            style: |
                                              ha-card {  
                                                background: var(--ha-card-background);
                                                border: 100px; 
                                                border-radius: 0px;
                                                }
                                            content: >-
                                              **<center>Lista carichi<center>**

                                              {% from 'power_control.jinja' import
                                              dict_device %}

                                              {% set my_dict = (dict_device() |
                                              from_json)  %}  


                                              | Dispositivo &nbsp;| Stato &nbsp;|
                                              Consumo  |

                                              |:--------|:---------:|:-------------:|

                                              |{% for device_name, device_info in
                                              my_dict.items() %}
                                                | {{ device_name }} &nbsp;  | {{ device_info['state'] | upper }} &nbsp; |  {{ device_info['power'] ~ ' W' if device_info['power']  != 'sconosciuto'}} | 
                                              |{% endfor %}
                            setting:
                              card:
                                type: custom:button-card
                                color: transparent
                                show_name: false
                                name: Power
                                icon: mdi:cog
                                styles:
                                  card:
                                    - background-color: var(--primary-color)
                                    - border-radius: 18px
                                    - border-style: none
                                    - box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.2)
                                    - width: 70px
                                    - aspect-ratio: 1/0.7
                                  icon:
                                    - color: white
                                    - align-self: center
                                tap_action:
                                  action: fire-dom-event
                                  browser_mod:
                                    service: browser_mod.popup
                                    data:
                                      title: Opzioni
                                      card_mod:
                                        style: |
                                          :host {  
                                            --mdc-dialog-scrim-color: rgba(15,15,15,0.9);  
                                            }
                                      content:
                                        type: custom:button-card
                                        styles:
                                          card:
                                            - background-color: transparent
                                            - border-radius: 20px
                                          grid:
                                            - grid-template-areas: |-
                                                " . tempi     soglie        . " 
                                                " . rit_dist  dis_carichi   . "   
                                                " . rit_ripr  dis_emergenza . "
                                            - grid-template-columns: 0.1vw repeat(2, 1fr) 0.1vw
                                            - grid-column-gap: 0.3em
                                            - grid-row-gap: 0.3em
                                        custom_fields:
                                          tempi:
                                            card:
                                              style: |
                                                ha-card {  
                                                  background: none;  
                                                  border: 100px;  
                                                  }
                                              type: custom:button-card
                                              name: Tempi
                                              styles:
                                                name:
                                                  - font-weight: bolder
                                              tap_action:
                                                action: none
                                          rit_dist:
                                            card:
                                              type: custom:mushroom-number-card
                                              entity: input_number.ritardo_distacco_carico
                                              layout: vertical
                                              icon_color: green
                                              tap_action:
                                                action: none
                                              hold_action:
                                                action: none
                                              double_tap_action:
                                                action: none
                                              card_mod:
                                                style: |
                                                  :host {  
                                                    --ha-card-background: var(--card-background-color);  
                                                    --mdc-dialog-scrim-color: rgba(15,15,15,0.9);  
                                                    }
                                          rit_ripr:
                                            card:
                                              type: custom:mushroom-number-card
                                              entity: input_number.ripristino_carico
                                              layout: vertical
                                              icon_color: red
                                              tap_action:
                                                action: none
                                              hold_action:
                                                action: none
                                              double_tap_action:
                                                action: none
                                              card_mod:
                                                style: |
                                                  :host {  
                                                    --ha-card-background: var(--card-background-color);  
                                                    --mdc-dialog-scrim-color: rgba(15,15,15,0.9);  
                                                    }
                                          soglie:
                                            card:
                                              style: |
                                                ha-card {  
                                                  background: none;  
                                                  border: 100px;  
                                                  }
                                              type: custom:button-card
                                              name: Valori
                                              styles:
                                                name:
                                                  - font-weight: bolder
                                              tap_action:
                                                action: none
                                          dis_carichi:
                                            card:
                                              type: custom:mushroom-number-card
                                              entity: input_number.distacco_carico
                                              layout: vertical
                                              card_mod:
                                                style: |
                                                  :host {  
                                                    --ha-card-background: var(--card-background-color);  
                                                    --mdc-dialog-scrim-color: rgba(15,15,15,0.9);  
                                                    }
                                          dis_emergenza:
                                            card:
                                              type: custom:mushroom-number-card
                                              entity: input_number.distacco_urgente
                                              layout: vertical
                                              tap_action:
                                                action: none
                                              hold_action:
                                                action: none
                                              double_tap_action:
                                                action: none
                                              card_mod:
                                                style: |
                                                  :host {  
                                                    --ha-card-background: var(--card-background-color);  
                                                    --mdc-dialog-scrim-color: rgba(15,15,15,0.9);  
                                                    }
                            push:
                              card:
                                type: custom:button-card
                                color: transparent
                                show_name: false
                                icon: >
                                  [[[  

                                  if
                                  (states['automation.notify_control_power_push'].state
                                  == 'on') return "mdi:cellphone-check";  

                                  else return "mdi:cellphone-off";  

                                  ]]]
                                styles:
                                  card:
                                    - background-color: |
                                        [[[  
                                          if (states['automation.notify_control_power_push'].state == 'on') return "var(--primary-color)";  
                                          else return "var(--disabled-color)"; 
                                        ]]]
                                    - border-radius: 18px
                                    - border-style: none
                                    - box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.2)
                                    - width: 70px
                                    - aspect-ratio: 1/0.7
                                  icon:
                                    - align-self: center
                                    - color: |
                                        [[[  
                                          if (states['automation.notify_control_power_push'].state == 'on') return "white   ";  
                                          else return "dimGray"; 
                                        ]]]
                                tap_action:
                                  action: call-service
                                  service: automation.toggle
                                  service_data:
                                    entity_id: automation.notify_control_power_push
                            media:
                              card:
                                type: custom:button-card
                                color: transparent
                                show_name: false
                                icon: >
                                  [[[  

                                  if
                                  (states['automation.notify_control_power_media_player'].state
                                  == 'on') return "mdi:account-voice";  

                                  else return "mdi:speaker-off";  

                                  ]]]
                                styles:
                                  card:
                                    - background-color: |
                                        [[[  
                                          if (states['automation.notify_control_power_media_player'].state == 'on') return "var(--primary-color)";  
                                          else return "var(--disabled-color)"; 
                                        ]]]
                                    - border-radius: 18px
                                    - border-style: none
                                    - box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.2)
                                    - width: 70px
                                    - aspect-ratio: 1/0.7
                                  icon:
                                    - align-self: center
                                    - color: |
                                        [[[  
                                          if (states['automation.notify_control_power_media_player'].state == 'on') return "white   ";  
                                          else return "dimGray"; 
                                        ]]]
                                tap_action:
                                  action: call-service
                                  service: automation.toggle
                                  service_data:
                                    entity_id: >-
                                      automation.notify_control_power_media_player
              - type: custom:local-conditional-card
                id: consumo
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four five"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: two
                          variables:
                            name: Prezzi
                            icon: mdi:cash
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - prezzi: hide
                                - consumo: show
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: three
                          variables:
                            name: Consumo
                            icon: mdi:transmission-tower
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - priser: hide
                                - forbruk: show
                                - solceller: hide
                    - type: custom:gap-card
                      height: 6
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: custom:button-card
                          template: sensor_big
                          variables:
                            name: Prezzo Elettricità
                            label: |
                              [[[
                                return Math.round(states['sensor.pun_prezzo_fascia_corrente'].state * 100) / 100 + '<span style="font-size:14px"> €/kWh</span>'
                              ]]]   
                            icon: mdi:lightning-bolt
                            background: var(--popupBG)
                        - type: custom:button-card
                          template: sensor_big
                          variables:
                            name: Costo Stimato Bolletta
                            label: |
                              [[[
                                return states['sensor.bolletta_tot'].state + '<span style="font-size:14px"> €</span>'
                              ]]]   
                            icon: mdi:receipt-text
                            background: var(--popupBG)
                    - type: custom:vertical-stack-in-card
                      theme: ios-dark-mode-blue-red-alternative
                      cards:
                        - type: markdown
                          content: >

                            <center><b></ha-icon>&nbsp; PANNELLO CONSUMI 
                            </center> {% if
                            is_state('select.consumo_giornaliero', 'f3') %}
                            <center><b><ha-icon
                            icon="mdi:flash"></ha-icon>&nbsp; TARIFFAZIONE
                            ATTUALE F3 <ha-icon icon="mdi:flash"></ha-icon> {%
                            elif is_state('select.consumo_giornaliero', 'f2') %}
                            <center><b><ha-icon
                            icon="mdi:flash"></ha-icon>&nbsp; TARIFFAZIONE
                            ATTUALE F2 <ha-icon icon="mdi:flash"></ha-icon> {%
                            else %} <center><b><ha-icon
                            icon="mdi:flash"></ha-icon>&nbsp; TARIFFAZIONE
                            ATTUALE F1 <ha-icon icon="mdi:flash"></ha-icon> {%
                            endif %}
                              {% set watt = states('sensor.watt') | int(0) %}
                              {% if watt >= 3300 %}
                              SUPERO LIMITI
                              {% elif watt >= 2500 %}
                              CONSUMO ELEVATO
                              {% elif watt >= 1000 %}
                              CONSUMO MEDIO
                              {% else %}
                              CONSUMO NELLA NORMA
                              {% endif %}
                        - type: entities
                          theme: ios-dark-mode
                          entities:
                            - buttons:
                                - icon: mdi:close-box
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#setting-off2'
                                - icon: mdi:counter
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#dettagli'
                                - icon: mdi:alpha-g-box-outline
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#giorno'
                                - icon: mdi:alpha-m-box-outline
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#mese'
                                - icon: mdi:alpha-a-box-outline
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#anno'
                              type: custom:paper-buttons-row
                            - type: custom:state-switch
                              entity: hash
                              default: settings-off
                              states:
                                setting-off:
                                  type: null
                                imposta-tariffa:
                                  type: vertical-stack
                                  cards:
                                    - type: vertical-stack
                                      cards:
                                        - type: entities
                                          state_color: false
                                          show_header_toggle: false
                                          entities:
                                            - input_datetime.f1_ora_inizio
                                            - input_datetime.f2_ora_inizio_mattino
                                            - input_datetime.f2_ora_inizio_sera
                                            - input_datetime.f3_ora_inizio
                                dettagli:
                                  type: vertical-stack
                                  cards:
                                    - type: vertical-stack
                                      title: Costi Mese
                                      cards:
                                        - type: glance
                                          entities:
                                            - sensor.bolletta_energia
                                            - sensor.bolletta_trasporto
                                            - sensor.bolletta_oneri_di_sistema
                                            - sensor.bolletta_iva
                                    - type: vertical-stack
                                      title: Costi Mese Precedente
                                      cards:
                                        - type: glance
                                          entities:
                                            - sensor.bolletta_energia_mese_scorso
                                            - sensor.bolletta_trasporto_mese_scorso
                                            - >-
                                              sensor.bolletta_oneri_di_sistema_mese_scorso
                                            - sensor.bolletta_iva_mese_scorso
                                giorno:
                                  type: vertical-stack
                                  cards:
                                    - type: vertical-stack
                                      cards:
                                        - animation:
                                            speed: '5'
                                            state: 'on'
                                          entities:
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f1
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_giornaliero_f1
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f2
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_giornaliero_f2
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f3
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_giornaliero_f3
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              positions:
                                                icon: inside
                                              entity: sensor.costo_consumo_oggi_totale
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: Totale
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_totale_oggi
                                          positions:
                                            icon: inside
                                            indicator: inside
                                            minmax: 'off'
                                            name: inside
                                          title: Consumo Oggi
                                          type: custom:bar-card
                                          direction: up
                                          columns: '3'
                                          entity_row: true
                                          color: green
                                          max: 15
                                    - type: vertical-stack
                                      cards:
                                        - animation:
                                            speed: '5'
                                            state: 'on'
                                          entities:
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f1
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_giornaliero_f1
                                              attribute: last_period
                                              max: 20
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f2
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_giornaliero_f2
                                              attribute: last_period
                                              max: 20
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f3
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_giornaliero_f3
                                              attribute: last_period
                                              max: 20
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              positions:
                                                icon: inside
                                              entity: sensor.costo_consumo_ieri_totale
                                              max: 20
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: Totale
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_totale_ieri
                                              max: 30
                                          positions:
                                            icon: inside
                                            indicator: inside
                                            minmax: 'off'
                                            name: inside
                                          title: Consumo Ieri
                                          type: custom:bar-card
                                          direction: up
                                          columns: '3'
                                          max: 4000
                                          entity_row: true
                                          color: Blue
                                mese:
                                  type: vertical-stack
                                  cards:
                                    - type: vertical-stack
                                      cards:
                                        - animation:
                                            speed: '5'
                                            state: 'on'
                                          entities:
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f1
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_mensile_f1
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f2
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_mensile_f2
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f3
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_mensile_f3
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              positions:
                                                icon: inside
                                              entity: sensor.costo_consumo_mensile_totale
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: Totale
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_totale_mensile
                                          positions:
                                            icon: inside
                                            indicator: inside
                                            minmax: 'off'
                                            name: inside
                                          title: Consumo Mese Corrente
                                          type: custom:bar-card
                                          direction: up
                                          columns: '3'
                                          entity_row: true
                                          color: red
                                          max: 100
                                    - type: vertical-stack
                                      cards:
                                        - animation:
                                            speed: '5'
                                            state: 'on'
                                          entities:
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f1
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_mensile_f1
                                              attribute: last_period
                                              max: 100
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f2
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_mensile_f2
                                              attribute: last_period
                                              max: 50
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f3
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_mensile_f3
                                              attribute: last_period
                                              max: 130
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              positions:
                                                icon: inside
                                              entity: sensor.costo_consumo_mese_scorso_totale
                                              max: 20
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: Totale
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_totale_mese_scorso
                                              max: 300
                                          positions:
                                            icon: inside
                                            indicator: inside
                                            minmax: 'off'
                                            name: inside
                                          title: Consumo Mese Precedente (energia)
                                          type: custom:bar-card
                                          direction: up
                                          columns: '3'
                                          max: 4000
                                          entity_row: true
                                          color: Blue
                                anno:
                                  type: vertical-stack
                                  cards:
                                    - type: vertical-stack
                                      cards:
                                        - animation:
                                            speed: '5'
                                            state: 'on'
                                          entities:
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f1
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_annuale_f1
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f2
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_annuale_f2
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f3
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_annuale_f3
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              positions:
                                                icon: inside
                                              entity: sensor.costo_consumo_annuale_totale
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: Totale
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_totale_annuale
                                          positions:
                                            icon: inside
                                            indicator: inside
                                            minmax: 'off'
                                            name: inside
                                          title: Consumo Anno Corrente
                                          type: custom:bar-card
                                          direction: up
                                          columns: '3'
                                          max: 4000
                                          entity_row: true
                                          color: orange
                                    - type: vertical-stack
                                      cards:
                                        - animation:
                                            speed: '5'
                                            state: 'on'
                                          entities:
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f1
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_annuale_f1
                                              attribute: last_period
                                              max: 1500
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f2
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_annuale_f2
                                              attribute: last_period
                                              max: 1000
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              icon: mdi:keyboard-f3
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_annuale_f3
                                              attribute: last_period
                                              max: 1450
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: ' '
                                              positions:
                                                icon: inside
                                              entity: >-
                                                sensor.costo_consumo_anno_precedente_totale
                                              max: 450
                                            - animation:
                                                speed: '5'
                                                state: 'on'
                                              direction: right
                                              name: Totale
                                              positions:
                                                icon: inside
                                              entity: sensor.consumo_totale_anno_precedente
                                              max: 3800
                                          positions:
                                            icon: inside
                                            indicator: inside
                                            minmax: 'off'
                                            name: inside
                                          title: Consumo Anno Precedente
                                          type: custom:bar-card
                                          direction: up
                                          columns: '3'
                                          max: 4000
                                          entity_row: true
                                          color: Blue
                                        - type: custom:vertical-stack-in-card
                                          cards:
                                            - type: glance
                                              entities:
                                                - sensor.bolletta_tot_anno
                                                - sensor.bolletta_tot_anno_precedente
                            - type: custom:vertical-stack-in-card
                              cards:
                                - type: glance
                                  entities:
                                    - sensor.bolletta_tot
                                    - sensor.bolletta_tot_mese_scorso
                            - type: custom:vertical-stack-in-card
                              theme: ios-dark-mode-blue-red-alternative
                              cards:
                                - type: conditional
                                  conditions:
                                    - entity: input_boolean.versione_pkconsumi
                                      state: 'on'
                                  card:
                                    type: custom:vertical-stack-in-card
                                    cards:
                                      - type: markdown
                                        title: Aggiornamento Disponibile
                                        content: >-

                                          Versione Installata  {{
                                          states.input_datetime.f1_ora_inizio.attributes.Version
                                          }}

                                          Versione Disponibile {{
                                          states.sensor.versione_pk_consumi.state
                                          }}


                                          info: {{
                                          states.sensor.tipo_aggiornamento_pk_consumi.state
                                          }}


                                          https://github.com/riddik14/hassio-package-consumi
                                          https://www.buymeacoffee.com/T1Pqksy


                                            per installare premi sotto
                                            
                                            
                                      - type: button
                                        tap_action:
                                          action: toggle
                                        entity: script.scarica_pkg
                                        name: Aggiorna
                                        icon: mdi:download
                                        show_icon: true
                                        show_name: true
                                        show_state: false
                                        icon_height: 50px
                                        hold_action:
                                          action: navigate
                                          navigation_path: >-
                                            https://github.com/riddik14/hassio-package-consumi
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Server
            icon: mdi:server
            state: null
            hash: '#server'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 22px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 12
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: homeass
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: two
                          variables:
                            name: Home Assistant
                            icon: mdi:home-assistant
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - homeass: show
                                - server: hide
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: two
                          variables:
                            name: Home Assistant
                            icon: mdi:home-assistant
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - homeass: hide
                                - server: show
                    - type: custom:gap-card
                      height: 6
                    - square: false
                      columns: 2
                      type: grid
                      cards:
                        - type: custom:button-card
                          template: sensor_small
                          entity: sensor.processor_use
                          variables:
                            name: CPU
                            icon: mdi:cpu-64-bit
                            background: var(--popupBG)
                            label: |
                              [[[
                                  return entity.state + "%";   
                              ]]]
                        - type: custom:button-card
                          template: sensor_small
                          entity: sensor.memory_use_percent
                          variables:
                            name: Memoria
                            icon: mdi:memory
                            background: var(--popupBG)
                            label: |
                              [[[
                                  return entity.state + "%";   
                              ]]]
                        - type: custom:button-card
                          template: sensor_big_graph
                          variables:
                            label: |
                              [[[
                                return (states['sensor.processor_temperature'].state) + '°'
                              ]]] 
                            icon: mdi:thermometer
                            name: CPU Temperatur
                            background: var(--popupBG)
                            text: var(--gray800)
                            graph: sensor.processor_temperature
                        - type: custom:button-card
                          template: sensor_big_percentage
                          variables:
                            name: SSD
                            entity: sensor.disk_use_percent
                            icon: mdi:harddisk
                            background: var(--popupBG)
                            bar: >
                              [[[   var color = "var(--red)";  var state = 100 -
                              entity.state;  if (state > 75) color =
                              "var(--blue)";  else if(state > 50)  color =
                              "var(--orange)";

                              return  `<div> <div style="background:${color};
                              height: 30px;width:${state}%; "></div></div>` ]]]
                            label: >
                              [[[ return
                              Math.round((states['sensor.disk_free'].state) *
                              100)/100 + '<span style="font-size:14px">
                              GB</span>' ]]]
              - type: custom:local-conditional-card
                id: server
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      cards:
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: one
                          variables:
                            name: Home Assistant
                            icon: mdi:home-assistant
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - homeass: show
                                - server: hide
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: three
                          variables:
                            name: Server
                            icon: mdi:multimedia
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - homeass: hide
                                - server: show
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four"  
                    - type: custom:gap-card
                      height: 6
                    - square: false
                      type: grid
                      cards:
                        - type: vertical-stack
                          cards:
                            - type: custom:mushroom-title-card
                              title: Home Assistant Server
                              subtitle: >
                                Core v{{
                                state_attr('update.home_assistant_core_update',
                                'installed_version') }} - OS v{{
                                states('sensor.home_assistant_operating_system_versione')
                                }} - Supervisor v{{
                                state_attr('update.home_assistant_supervisor_update',
                                'installed_version') }}
                            - type: custom:mushroom-chips-card
                              chips:
                                - type: entity
                                  entity: sensor.processor_temperature
                                  icon_color: orange
                                - type: entity
                                  entity: sensor.processor_use
                                  icon_color: blue
                                - type: entity
                                  entity: sensor.memory_use_percent
                                  icon_color: orange
                                - type: entity
                                  entity: sensor.disk_use_percent_config
                                  icon_color: deep-purple
                                - type: entity
                                  entity: sensor.network_in_eth0
                                  icon_color: green
                            - type: horizontal-stack
                              cards:
                                - type: custom:mushroom-update-card
                                  entity: update.home_assistant_core_update
                                  name: HA Core
                                  show_buttons_control: true
                                  icon_type: entity-picture
                                - type: custom:mushroom-template-card
                                  primary: Version Information
                                  secondary: >-
                                    Installed v{{
                                    state_attr('update.home_assistant_core_update',
                                    'installed_version')}}

                                    Latest v{{
                                    state_attr('update.home_assistant_core_update',
                                    'latest_version')}}
                                  icon: mdi:package-variant-closed
                                  multiline_secondary: true
                                  fill_container: true
                                  entity: update.home_assistant_core_update
                                  tap_action:
                                    action: more-info
                                  icon_color: >-
                                    {% if
                                    is_state('update.home_assistant_core_update',
                                    'on') %}
                                      orange
                                    {% else %}
                                      green
                                    {% endif %}
                                  badge_color: >-
                                    {% if
                                    is_state('update.home_assistant_core_update',
                                    'on') %}
                                      red
                                    {% else %}
                                      blue
                                    {% endif %}
                                  badge_icon: >-
                                    {% if
                                    is_state('update.home_assistant_core_update',
                                    'on') %}
                                      mdi:help
                                    {% else %}
                                      mdi:check-bold
                                    {% endif %}
                            - type: horizontal-stack
                              cards:
                                - type: custom:mushroom-update-card
                                  entity: >-
                                    update.home_assistant_operating_system_update
                                  name: HA OS
                                  show_buttons_control: true
                                  icon_type: entity-picture
                                - type: custom:mushroom-template-card
                                  primary: Version Information
                                  secondary: >-
                                    Installed v{{
                                    states('sensor.home_assistant_operating_system_versione')}}

                                    Latest v{{
                                    states('sensor.home_assistant_operating_system_versione_piu_recente')}}
                                  icon: mdi:package-variant-closed
                                  multiline_secondary: true
                                  fill_container: true
                                  entity: >-
                                    update.home_assistant_operating_system_update
                                  tap_action:
                                    action: more-info
                                  icon_color: >-
                                    {% if
                                    is_state('update.home_assistant_operating_system_update',
                                    'on') %}
                                      orange
                                    {% else %}
                                      green
                                    {% endif %}
                                  badge_color: >-
                                    {% if
                                    is_state('update.home_assistant_operating_system_update',
                                    'on') %}
                                      red
                                    {% else %}
                                      blue
                                    {% endif %}
                                  badge_icon: >-
                                    {% if
                                    is_state('update.home_assistant_operating_system_update',
                                    'on') %}
                                      mdi:help
                                    {% else %}
                                      mdi:check-bold
                                    {% endif %}
                            - type: horizontal-stack
                              cards:
                                - type: custom:mushroom-update-card
                                  entity: update.home_assistant_supervisor_update
                                  name: HA Supervisor
                                  show_buttons_control: true
                                  icon_type: entity-picture
                                - type: custom:mushroom-template-card
                                  primary: Version Information
                                  secondary: >-
                                    Installed v{{
                                    state_attr('update.home_assistant_supervisor_update',
                                    'installed_version')}}

                                    Latest v{{
                                    state_attr('update.home_assistant_supervisor_update',
                                    'latest_version')}}
                                  icon: mdi:package-variant-closed
                                  multiline_secondary: true
                                  fill_container: true
                                  entity: update.home_assistant_core_update
                                  tap_action:
                                    action: more-info
                                  icon_color: >-
                                    {% if
                                    is_state('update.home_assistant_supervisor_update',
                                    'on') %}
                                      orange
                                    {% else %}
                                      green
                                    {% endif %}
                                  badge_color: >-
                                    {% if
                                    is_state('update.home_assistant_supervisor_update',
                                    'on') %}
                                      red
                                    {% else %}
                                      blue
                                    {% endif %}
                                  badge_icon: >-
                                    {% if
                                    is_state('update.home_assistant_supervisor_update',
                                    'on') %}
                                      mdi:help
                                    {% else %}
                                      mdi:check-bold
                                    {% endif %}
                        - type: entities
                          show_header_toggle: 'off'
                          card_mod:
                            style: |
                              .card-header {
                                padding: 0px 0px 0px 0px !important;
                              }
                          entities:
                            - type: section
                              label: Centro Controllo Repack Database Versione 1.0
                            - type: custom:hui-element
                              card_type: vertical-stack
                              cards:
                                - type: horizontal-stack
                                  cards:
                                    - type: picture
                                      fit_mode: contain
                                      card_mod:
                                        style: |
                                          ha-card {
                                          --ha-card-border-width: 0px !important;
                                          margin: 0px -0px -0px 0px;
                                          border-width: 0px !important;
                                          padding: 05px;
                                          background: none
                                          }
                                      image: /local/foto-pkg/database_pkg.png
                                      tap_action:
                                        action: fire-dom-event
                                        browser_mod:
                                          service: browser_mod.popup
                                          data:
                                            title: Dimensione Database
                                            style: >
                                              --popup-background-color:
                                              var(--secondary-background-color);

                                              --dialog-backdrop-filter: blur(2em)
                                              brightness(0.75);
                                            content:
                                              type: vertical-stack
                                              cards:
                                                - type: glance
                                                  entities:
                                                    - entity: sensor.repack_database
                                                      tap_action:
                                                        action: none
                                                      name: Oggi
                                                    - entity: input_number.dimensione_db_lunedi
                                                      name: Lunedi
                                                      tap_action:
                                                        action: none
                                                    - entity: input_number.dimensione_db_martedi
                                                      name: Martedì
                                                      tap_action:
                                                        action: none
                                                    - entity: input_number.dimensione_db_mercoledi
                                                      name: Mercoledì
                                                      tap_action:
                                                        action: none
                                                    - entity: input_number.dimensione_db_giovedi
                                                      name: Giovedì
                                                      tap_action:
                                                        action: none
                                                    - entity: input_number.dimensione_db_venerdi
                                                      name: Venerdì
                                                      tap_action:
                                                        action: none
                                                    - entity: input_number.dimensione_db_sabato
                                                      name: Sabato
                                                      tap_action:
                                                        action: none
                                                    - entity: input_number.dimensione_db_domenica
                                                      name: Domenica
                                                      tap_action:
                                                        action: none
                                                  show_icon: false
                                                  columns: 4
                                                - type: custom:mini-graph-card
                                                  card_mod:
                                                    style: |
                                                      ha-card {
                                                        --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                                                        --ha-card-background: "rgba(0, 0, 0, 0.0)";
                                                        --paper-item-icon-color: 'var(--text-primary-color';
                                                        --ha-card-box-shadow: 'none';
                                                      }
                                                  entities:
                                                    - entity: sensor.media_dimensione_db_7_giorni
                                                      unit: MB
                                                  align_state: center
                                                  align_header: center
                                                  hour24: true
                                                  show:
                                                    name: true
                                                    icon: false
                                                    average: false
                                                    extrema: true
                                                    labels: false
                                                    higher: true
                                                    wider: true
                                                  color_thresholds:
                                                    - value: 0
                                                      color: '#1269F3'
                                                    - value: 900
                                                      color: '#f39c12'
                                                    - value: 1500
                                                      color: '#f32c12'
                                                  name: Media 7 Giorni DB
                                    - type: vertical-stack
                                      cards:
                                        - type: custom:button-card
                                          layout: icon_name_state2nd
                                          label: >-
                                            [[[ return
                                            states['sensor.repack_database'].attributes.stato;
                                            ]]]
                                          name: Stato Repack
                                          show_icon: true
                                          show_state: false
                                          show_label: true
                                          icon: mdi:information-outline
                                          styles:
                                            grid:
                                              - grid-template-columns: 50px auto
                                            icon:
                                              - padding: 0px 0px
                                              - height: 30px
                                              - width: 30px
                                            card:
                                              - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                              - '--ha-card-box-shadow': none
                                              - '--ha-card-border-width': 0px
                                            label:
                                              - padding: 0px 10px
                                              - justify-self: start
                                              - font-family: Roboto, sans-serif
                                              - font-size: 15px
                                            name:
                                              - padding: 0px 10px
                                              - justify-self: start
                                              - color: var(--primary-text-color)
                                        - type: custom:button-card
                                          layout: icon_name_state2nd
                                          entity: sensor.repack_database
                                          name: Dimensione DB
                                          show_icon: true
                                          show_state: true
                                          icon: mdi:database
                                          tap_action:
                                            action: null
                                          styles:
                                            grid:
                                              - grid-template-columns: 50px auto
                                            icon:
                                              - padding: 0px 0px
                                              - height: 30px
                                              - width: 30px
                                            card:
                                              - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                              - '--ha-card-box-shadow': none
                                              - '--ha-card-border-width': 0px
                                            state:
                                              - padding: 0px 10px
                                              - justify-self: start
                                              - font-family: Roboto, sans-serif
                                              - font-size: 15px
                                            label:
                                              - padding: 0px 10px
                                              - justify-self: start
                                              - font-family: Roboto, sans-serif
                                              - font-size: 15px
                                            name:
                                              - padding: 0px 10px
                                              - justify-self: start
                                              - color: var(--primary-text-color)
                                        - type: custom:button-card
                                          layout: icon_name_state2nd
                                          label: >-
                                            [[[ return
                                            states['sensor.repack_database'].attributes.ultimo_repack;]]]
                                          name: Ultimo Repack
                                          show_icon: true
                                          show_label: true
                                          icon: mdi:calendar
                                          styles:
                                            grid:
                                              - grid-template-columns: 50px auto
                                            icon:
                                              - padding: 0px 0px
                                              - height: 30px
                                              - width: 30px
                                            card:
                                              - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                              - '--ha-card-box-shadow': none
                                              - '--ha-card-border-width': 0px
                                            state:
                                              - padding: 0px 10px
                                              - justify-self: start
                                              - font-family: Roboto, sans-serif
                                              - font-size: 15px
                                            label:
                                              - padding: 0px 10px
                                              - justify-self: start
                                              - font-family: Roboto, sans-serif
                                              - font-size: 15px
                                            name:
                                              - padding: 0px 10px
                                              - justify-self: start
                                              - color: var(--primary-text-color)
                                - type: custom:paper-buttons-row
                                  buttons:
                                    - icon: hass:cog-outline
                                      state: >-
                                        {{ states('group.notifiche_repack_db')
                                        }}
                                      state_styles:
                                        'on':
                                          icon:
                                            color: var(--paper-item-icon-active-color)
                                      tap_action:
                                        action: fire-dom-event
                                        browser_mod:
                                          service: browser_mod.popup
                                          data:
                                            title: Impostazioni
                                            style: >
                                              --popup-background-color:
                                              var(--secondary-background-color);

                                              --dialog-backdrop-filter: blur(2em)
                                              brightness(0.75);
                                            content:
                                              type: entities
                                              entities:
                                                - style:
                                                    background: '#62717b'
                                                    height: 1px
                                                    margin-left: auto
                                                    margin-right: auto
                                                  type: divider
                                                - entity: sensor.time
                                                  name: Ora
                                                - style:
                                                    background: '#62717b'
                                                    height: 1px
                                                    margin-left: auto
                                                    margin-right: auto
                                                  type: divider
                                                - entity: input_number.giorni_da_mantenere
                                                  icon: mdi:database-arrow-right
                                                  name: Giorni da Mantenere
                                                - style:
                                                    background: '#62717b'
                                                    height: 1px
                                                    margin-left: auto
                                                    margin-right: auto
                                                  type: divider
                                                - type: custom:multiple-entity-row
                                                  entity: input_boolean.on_off_repack_db_time
                                                  icon: mdi:database-clock
                                                  toggle: true
                                                  name: Repack DB Time
                                                  state_header: OFF/ON
                                                  entities:
                                                    - entity: input_datetime.ora_repack_database
                                                      name: ORARIO
                                                    - entity: input_select.repack_db
                                                      tap_action:
                                                        action: fire-dom-event
                                                        browser_mod:
                                                          service: browser_mod.popup
                                                          data:
                                                            title: Giorni Repack Database
                                                            style: >
                                                              --popup-background-color:
                                                              var(--secondary-background-color);

                                                              --dialog-backdrop-filter: blur(2em)
                                                              brightness(0.75);
                                                            content:
                                                              type: entities
                                                              entities:
                                                                - type: divider
                                                                - entity: input_boolean.repack_db_lunedi
                                                                  name: Lunedi
                                                                - type: divider
                                                                - entity: input_boolean.repack_db_martedi
                                                                  name: Martedi
                                                                - type: divider
                                                                - entity: input_boolean.repack_db_mercoledi
                                                                  name: Mercoledi
                                                                - type: divider
                                                                - entity: input_boolean.repack_db_giovedi
                                                                  name: Giovedi
                                                                - type: divider
                                                                - entity: input_boolean.repack_db_venerdi
                                                                  name: Venerdi
                                                                - type: divider
                                                                - entity: input_boolean.repack_db_sabato
                                                                  name: Sabato
                                                                - type: divider
                                                                - entity: input_boolean.repack_db_domenica
                                                                  name: Domenica
                                                                - type: divider
                                                              state_color: true
                                                - style:
                                                    background: '#62717b'
                                                    height: 1px
                                                    margin-left: auto
                                                    margin-right: auto
                                                  type: divider
                                                - type: custom:multiple-entity-row
                                                  entity: input_boolean.on_off_repack_db_size
                                                  icon: mdi:database-refresh
                                                  toggle: true
                                                  name: Repack DB Size
                                                  state_header: OFF/ON
                                                  entities:
                                                    - entity: input_number.dimensione_massima_db
                                                      name: SIZE MAX
                                                - style:
                                                    background: '#62717b'
                                                    height: 1px
                                                    margin-left: auto
                                                    margin-right: auto
                                                  type: divider
                                                - type: custom:multiple-entity-row
                                                  entity: input_boolean.notify_push_db
                                                  name: Notifiche
                                                  icon: mdi:cellphone-message
                                                  state_header: PUSH
                                                  toggle: true
                                                - style:
                                                    background: '#62717b'
                                                    height: 1px
                                                    margin-left: auto
                                                    margin-right: auto
                                                  type: divider
                                                - type: custom:multiple-entity-row
                                                  entity: sensor.repack_database
                                                  attribute: ultimo_repack
                                                  name: Repack Manuale
                                                  icon: mdi:database-check
                                                  state_header: ULTIMO REPACK
                                                  state_color: true
                                                  entities:
                                                    - type: button
                                                      name: ESEGUI
                                                      icon: mdi:button-pointer
                                                      tap_action:
                                                        action: call-service
                                                        service: script.repack_db
                                                - style:
                                                    background: '#62717b'
                                                    height: 1px
                                                    margin-left: auto
                                                    margin-right: auto
                                                  type: divider
                                                - type: custom:multiple-entity-row
                                                  entity: input_text.data_reset_sensori_db
                                                  name: Reset Contatori
                                                  icon: mdi:chart-bar
                                                  state_header: ULTIMO RESET
                                                  state_color: true
                                                  entities:
                                                    - type: button
                                                      name: ESEGUI
                                                      icon: mdi:button-pointer
                                                      tap_action:
                                                        action: call-service
                                                        service: script.reset_sensori_db
                                                - style:
                                                    background: '#62717b'
                                                    height: 1px
                                                    margin-left: auto
                                                    margin-right: auto
                                                  type: divider
                                    - icon: hass:chart-line
                                      state: '{{ states(''xxx'') }}'
                                      state_styles:
                                        'on':
                                          icon:
                                            color: var(--paper-item-icon-active-color)
                                      tap_action:
                                        action: fire-dom-event
                                        browser_mod:
                                          service: browser_mod.popup
                                          data:
                                            title: Statistiche Database
                                            style: >
                                              --popup-background-color:
                                              var(--secondary-background-color);

                                              --dialog-backdrop-filter: blur(2em)
                                              brightness(0.75);
                                            content:
                                              type: vertical-stack
                                              cards:
                                                - type: entities
                                                  entities:
                                                    - style:
                                                        background: '#62717b'
                                                        height: 1px
                                                        margin-left: auto
                                                        margin-right: auto
                                                      type: divider
                                                    - entity: sensor.repack_database
                                                      type: custom:multiple-entity-row
                                                      attribute: ultimo_repack
                                                      name: Database
                                                      state_header: ULTIMO REPACK
                                                      state_color: true
                                                      entities:
                                                        - entity: sensor.repack_database
                                                          attribute: stato
                                                          name: STATO
                                                    - type: divider
                                                    - entity: sensor.repack_database
                                                      type: custom:multiple-entity-row
                                                      attribute: dimensione_db_prima_del_repack
                                                      icon: mdi:harddisk
                                                      name: Dimensione
                                                      state_header: PRECEDENTE
                                                      unit: MB
                                                      state_color: true
                                                      entities:
                                                        - entity: sensor.repack_database
                                                          name: ATTUALE
                                                    - style:
                                                        background: '#62717b'
                                                        height: 1px
                                                        margin-left: auto
                                                        margin-right: auto
                                                      type: divider
                                    - icon: hass:bell
                                      state: >-
                                        {{
                                        states('input_boolean.aggiornamento_pkg_database')
                                        }}
                                      state_styles:
                                        'on':
                                          icon:
                                            color: var(--paper-item-icon-active-color)
                                      tap_action:
                                        action: fire-dom-event
                                        browser_mod:
                                          service: browser_mod.popup
                                          data:
                                            title: Update
                                            style: >
                                              --popup-background-color:
                                              var(--secondary-background-color);

                                              --dialog-backdrop-filter: blur(2em)
                                              brightness(0.75);
                                            content:
                                              type: entities
                                              entities:
                                                - style:
                                                    background: '#62717b'
                                                    height: 1px
                                                    margin-left: auto
                                                    margin-right: auto
                                                  type: divider
                                                - entity: input_boolean.aggiornamento_pkg_database
                                                  name: Notifica Push Update
                                                  icon: mdi:bell-ring
                                                  state_color: true
                                                - style:
                                                    background: '#62717b'
                                                    height: 1px
                                                    margin-left: auto
                                                    margin-right: auto
                                                  type: divider
                                                - type: custom:multiple-entity-row
                                                  entity: sensor.domhouse_it
                                                  attribute: centro_controllo_db
                                                  state_color: true
                                                  icon: mdi:google-circles-extended
                                                  toggle: false
                                                  name: Versione
                                                  state_header: DISPONIBILE
                                                  entities:
                                                    - entity: sensor.sensore_centro_controllo_database
                                                      name: INSTALLATA
                                                - style:
                                                    background: '#62717b'
                                                    height: 1px
                                                    margin-left: auto
                                                    margin-right: auto
                                                  type: divider
                                    - icon: hass:information-outline
                                      state: '{{ states(''none'') }}'
                                      state_styles:
                                        'on':
                                          icon:
                                            color: var(--paper-item-icon-active-color)
                                      tap_action:
                                        action: fire-dom-event
                                        browser_mod:
                                          service: browser_mod.popup
                                          data:
                                            title: Info Package
                                            style: >
                                              --popup-background-color:
                                              var(--secondary-background-color);

                                              --dialog-backdrop-filter: blur(2em)
                                              brightness(0.75);
                                            content:
                                              type: markdown
                                              content: >-
                                                Centro Controllo Repack Database

                                                -------------------

                                                ____

                                                Scarica Update:

                                                [Download](https://domhouse.it/centro-controllo-repack-database-home-assistant/)


                                                ----




                                                Created:
                                                [DomHouse.it](https://www.domhouse.it)

                                                ___
                      columns: 1
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Peugeot 2008
            icon: mdi:car
            state: null
            hash: '#bil'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 12
          - square: false
            type: grid
            cards:
              - type: picture-elements
                theme: transparentblue
                image: >-
                  https://visuel3d-secure.peugeot.com/V3DImage.ashx?client=miseco&back=0&format=png&version=1PP1SYRMMKB0A0C0&color=0MM60NN9&trim=0PA60RFX&OPT1=DZHP&OPT2=DZJ2&view=001
                tap_action:
                  action: more-info
                elements:
                  - type: state-label
                    entity: sensor.2008_mileage
                    prefix: '  '
                    tap_action:
                      action: more-info
                    state_color: true
                    style:
                      top: 0%
                      left: 45%
                      transform: scale(1.7)
                      font-size: 10px
                      line-height: 1px
                      padding: 5px 2px
                  - type: state-label
                    entity: sensor.2008_luminosita
                    icon: mdi:light-flood-down
                    prefix: 'Fari: '
                    tap_action:
                      action: more-info
                    state_color: true
                    style:
                      top: 0%
                      left: 80%
                      transform: scale(1.7)
                      font-size: 10px
                      line-height: 1px
                      padding: 5px 2px
                  - type: state-label
                    entity: sensor.2008_temp_esterna
                    icon: mdi:car-door
                    prefix: 'Temp: '
                    tap_action:
                      action: more-info
                    state_color: true
                    style:
                      top: 0%
                      left: 5%
                      transform: scale(1.7)
                      font-size: 10px
                      line-height: 1px
                      padding: 5px 2px
                  - type: state-icon
                    entity: sensor.2008_porta_adx
                    icon: mdi:car-door
                    tap_action:
                      action: more-info
                    state_color: true
                    style:
                      top: 80%
                      left: 14%
                      transform: scale(1.3)
                      font-size: 10px
                      line-height: 1px
                      padding: 5px 2px
                  - type: state-icon
                    entity: sensor.2008_porta_pdx
                    icon: mdi:car-door
                    tap_action:
                      action: more-info
                    state_color: true
                    style:
                      top: 80%
                      left: 4%
                      transform: scale(1.3)
                      font-size: 10px
                      line-height: 1px
                      padding: 5px 2px
                  - type: state-icon
                    entity: sensor.2008_porta_asx
                    icon: mdi:car-door
                    tap_action:
                      action: more-info
                    state_color: true
                    style:
                      top: 80%
                      left: 86%
                      transform: scale(1.3)
                      font-size: 10px
                      line-height: 1px
                      padding: 5px 2px
                  - type: state-icon
                    entity: sensor.2008_lock
                    icon: mdi:car-door
                    tap_action:
                      action: more-info
                    state_color: true
                    style:
                      top: 20%
                      left: 10%
                      transform: scale(1.3)
                      font-size: 10px
                      line-height: 1px
                      padding: 5px 2px
                  - type: state-icon
                    entity: sensor.2008_porta_psx
                    icon: mdi:car-door
                    tap_action:
                      action: more-info
                    state_color: true
                    style:
                      top: 80%
                      left: 76%
                      transform: scale(1.3)
                      font-size: 10px
                      line-height: 1px
                      padding: 5px 2px
              - type: horizontal-stack
                cards:
                  - type: gauge
                    entity: sensor.2008_benzina
                    min: 0
                    needle: true
                    severity:
                      green: 5
                      yellow: 0
                      red: 0
                    theme: ios-light-mode-dark-blue
                    max: 100
                  - type: gauge
                    entity: sensor.2008_benzina_l
                    min: 0
                    needle: true
                    severity:
                      green: 5
                      red: 0
                    theme: ios-light-mode-dark-blue
                    max: 45
                  - type: gauge
                    entity: sensor.2008_battery_voltage
                    min: 0
                    needle: true
                    severity:
                      green: 12
                      yellow: 0
                      red: 15
                    theme: ios-light-mode-dark-blue
                    max: 20
              - type: custom:bar-card
                entities:
                  - entity: sensor.2008_battery_autonomy
                    name: Autonomia
                    max: '720'
                    min: '0'
                    severity:
                      - from: '0'
                        to: '50'
                        color: red
                      - from: '51'
                        to: '150'
                        color: orange
                      - from: '151'
                        to: '850'
                        color: green
                positions:
                  icon: inside
                  minmax: inside
                style: |-
                  bar-card-iconbar {
                    padding-left: 35px;
                  }
                  bar-card-value {
                    padding-left: 1.5em;
                  }
                  bar-card-min {
                    position: absolute;
                    padding-left: 6px;
                  }
                  bar-card-max {
                    position: absolute;
                    padding-left: 91%;
                  }
                  bar-card-divider {
                    display: none;
                  }
                  bar-card-currentbar, bar-card-backgroundbar {
                    border-radius: 8px;
                  }
                animation:
                  speed: '5'
            columns: 1
          - type: custom:gap-card
            height: 0
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: info2
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:horizontal-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four"  
                      cards:
                        - type: custom:mushroom-chips-card
                          chips:
                            - type: entity
                              entity: sensor.2008_porta_asx
                              content_info: name
                              icon: mdi:car-door
                              tap_action:
                                action: more-info
                              use_entity_picture: true
                            - type: entity
                              entity: sensor.2008_porta_adx
                              content_info: name
                              icon: mdi:car-door
                              tap_action:
                                action: more-info
                            - type: entity
                              entity: sensor.2008_porta_psx
                              content_info: name
                              icon: mdi:car-door
                              tap_action:
                                action: more-info
                            - type: entity
                              entity: sensor.2008_porta_pdx
                              content_info: name
                              icon: mdi:car-door
                              tap_action:
                                action: more-info
                            - type: entity
                              entity: sensor.2008_finestrino_bagagliaio
                              content_info: name
                              icon: mdi:car-windshield-outline
                              tap_action:
                                action: more-info
                            - type: entity
                              entity: sensor.2008_benzina_riserva
                              content_info: name
                              name: Riserva
                              icon: mdi:gas-station
                              tap_action:
                                action: more-info
                              icon_color: accent
                              use_entity_picture: false
                            - type: entity
                              entity: sensor.2008_motore
                              content_info: state
                              icon: mdi:engine
                              tap_action:
                                action: more-info
                              icon_color: green
                              use_entity_picture: false
                            - type: entity
                              entity: sensor.2008_tetto
                              content_info: name
                              icon: mdi:square
                              tap_action:
                                action: more-info
                              icon_color: pink
                              use_entity_picture: false
                            - type: entity
                              entity: sensor.2008_battery_autonomy
                              content_info: last-updated
                          alignment: justify
                    - type: custom:gap-card
                      height: 6
                    - type: custom:gap-card
                      height: 12
              - type: custom:local-conditional-card
                id: lading
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: two
                          variables:
                            name: Info
                            icon: mdi:information-outline
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - info2: show
                                - kontroll2: hide
                                - lading: hide
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: three
                          variables:
                            name: Lading
                            icon: mdi:ev-station
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - info2: hide
                                - kontroll2: hide
                                - lading: show
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: SoC
                      styles:
                        card:
                          - background: none
                          - padding: 12px 0 15px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: start
                          - align-self: center
                    - type: grid
                      square: false
                      columns: 5
                      cards:
                        - type: custom:button-card
                          name: 50%
                          aspect_ratio: 1/1
                          show_icon: false
                          entity: input_number.ioniq_5_soc
                          tap_action:
                            action: call-service
                            service: automation.trigger
                            target:
                              entity_id: automation.ioniq_5_soc_50
                            data:
                              skip_condition: true
                          state:
                            - value: '50.0'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          styles:
                            card:
                              - background: var(--popupBG)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray800)
                        - type: custom:button-card
                          name: 60%
                          aspect_ratio: 1/1
                          show_icon: false
                          entity: input_number.ioniq_5_soc
                          tap_action:
                            action: call-service
                            service: automation.trigger
                            target:
                              entity_id: automation.ioniq_5_soc_60
                            data:
                              skip_condition: true
                          state:
                            - value: '60.0'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          styles:
                            card:
                              - background: var(--popupBG)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray800)
                        - type: custom:button-card
                          name: 70%
                          aspect_ratio: 1/1
                          show_icon: false
                          entity: input_number.ioniq_5_soc
                          tap_action:
                            action: call-service
                            service: automation.trigger
                            target:
                              entity_id: automation.ioniq_5_soc_70
                            data:
                              skip_condition: true
                          state:
                            - value: '70.0'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          styles:
                            card:
                              - background: var(--popupBG)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray800)
                        - type: custom:button-card
                          name: 80%
                          aspect_ratio: 1/1
                          show_icon: false
                          entity: input_number.ioniq_5_soc
                          tap_action:
                            action: call-service
                            service: automation.trigger
                            target:
                              entity_id: automation.ioniq_5_soc_80
                            data:
                              skip_condition: true
                          state:
                            - value: '80.0'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          styles:
                            card:
                              - background: var(--popupBG)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray800)
                        - type: custom:button-card
                          name: 100%
                          entity: input_number.ioniq_5_soc
                          aspect_ratio: 1/1
                          show_icon: false
                          tap_action:
                            action: call-service
                            service: automation.trigger
                            target:
                              entity_id: automation.ioniq_5_soc_100
                            data:
                              skip_condition: true
                          state:
                            - value: '100.0'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          styles:
                            card:
                              - background: var(--popupBG)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray800)
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: Lading
                      styles:
                        card:
                          - background: none
                          - padding: 24px 0 15px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: start
                          - align-self: center
                    - square: false
                      type: grid
                      columns: 1
                      cards:
                        - type: custom:button-card
                          template: button_toggle
                          tap_action:
                            action: toggle
                          variables:
                            name: Smartlading
                            icon: mdi:ev-station
                            entity: input_boolean.smartlading
                        - square: false
                          type: grid
                          columns: 2
                          cards:
                            - type: custom:button-card
                              template: sensor_small
                              entity: sensor.ioniq_custom
                              variables:
                                name: Ladepris
                                icon: mdi:cash-fast
                                background: var(--popupBG)
                                label: |
                                  [[[
                                      return entity.attributes.ladepris + ' kr'  
                                  ]]]
                            - type: custom:button-card
                              template: sensor_small
                              entity: sensor.ioniq_custom
                              variables:
                                name: Ladetid
                                icon: mdi:clock-time-four
                                background: var(--popupBG)
                                label: |
                                  [[[
                                      return entity.attributes.ladetid   
                                  ]]]
                    - type: custom:gap-card
                      height: 24
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Cucina
            icon: mdi:silverware-fork-knife
            state: null
            hash: '#cucina'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }       #header-container > button {background: none;}    
              .icon-container {background-color:var(--blue)!important;} 
              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1}  .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 6
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    entity: binary_sensor.cucina_finestra_apertura
                    name: ' '
                    layout: vertical
                    fill_container: true
                    tap_action:
                      action: none
                    icon: mdi:window-open-variant
                  - type: custom:mushroom-entity-card
                    entity: sensor.cucina_lywsd03mmc_temperatura
                    name: ' '
                    layout: vertical
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: entity
                        entity: binary_sensor.sensore_gas
                        double_tap_action:
                          action: none
                        use_entity_picture: false
                        tap_action:
                          action: more-info
                        hold_action:
                          action: none
                        icon: mdi:gas-burner
                      - type: entity
                        entity: binary_sensor.cucina_antiallagamento_umidita
                        double_tap_action:
                          action: none
                        use_entity_picture: false
                        tap_action:
                          action: more-info
                        hold_action:
                          action: none
                      - type: entity
                        entity: sensor.pir_cucina_illuminance
                    alignment: justify
                  - type: custom:mushroom-entity-card
                    entity: sensor.serbatoio_acqua
                    name: ' '
                    layout: vertical
                    icon_color: green
                    icon: mdi:hydraulic-oil-level
                    fill_container: false
                    tap_action:
                      action: more-info
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    entity: light.cucina
                    name: cucina
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:ceiling-light-multiple-outline
                    tap_action:
                      action: toggle
                    secondary_info: none
                  - type: custom:mushroom-entity-card
                    entity: switch.didiessefrog
                    name: caffè
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:coffee-maker
                    tap_action:
                      action: call-service
                      service: switch.toggle
                      target:
                        entity_id: switch.didiessefrog
                      data: {}
                    secondary_info: none
                    icon_type: icon
                    primary_info: state
                    hold_action:
                      action: more-info
                    double_tap_action:
                      action: none
                  - type: custom:mushroom-entity-card
                    name: caffè
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:led-strip-variant
                    tap_action:
                      action: toggle
                    secondary_info: none
                    icon_type: icon
                    primary_info: state
                    hold_action:
                      action: more-info
                    double_tap_action:
                      action: none
                    entity: switch.lavello_socket_1
                  - type: custom:mushroom-entity-card
                    entity: switch.ripostiglio
                    name: ripostiglio
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:ceiling-light-multiple-outline
                    tap_action:
                      action: toggle
                    secondary_info: none
                  - type: custom:mushroom-media-player-card
                    entity: media_player.cucina
                    layout: vertical
                    secondary_info: none
                    icon: mdi:google-assistant
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    name: Google
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    entity: switch.frigorifero_socket_1
                    name: frigorifero
                    layout: vertical
                    icon_color: cyan
                    icon: mdi:fridge
                    tap_action:
                      action: toggle
                    fill_container: true
                    primary_info: none
                    secondary_info: none
                  - type: custom:mushroom-entity-card
                    entity: switch.lavastoviglie_socket_1
                    name: lava stoviglie
                    layout: vertical
                    icon_color: green
                    icon: mdi:dishwasher
                    tap_action:
                      action: toggle
                    fill_container: true
                    primary_info: none
                    secondary_info: none
                  - type: custom:mushroom-entity-card
                    name: Forno
                    layout: vertical
                    icon_color: orange
                    icon: mdi:toaster-oven
                    entity: switch.forno_socket_1
                    tap_action:
                      action: toggle
                    fill_container: true
                    primary_info: none
                    secondary_info: none
                  - type: custom:mushroom-entity-card
                    name: Dryer
                    layout: vertical
                    icon_color: brown
                    icon: mdi:tumble-dryer
                    entity: switch.lavatrice_socket_1
                    tap_action:
                      action: toggle
                    fill_container: true
                    primary_info: none
                    secondary_info: none
                  - type: custom:mushroom-entity-card
                    name: Dryer
                    layout: vertical
                    icon_color: brown
                    icon: mdi:tumble-dryer
                    entity: switch.asciugatrice_socket_1
                    tap_action:
                      action: toggle
                    fill_container: true
                    primary_info: none
                    secondary_info: none
              - type: custom:mushroom-cover-card
                entity: cover.tapparella_cucina
                fill_container: false
                show_tilt_position_control: false
                show_position_control: true
                show_buttons_control: true
                hold_action:
                  action: none
                double_tap_action:
                  action: none
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Salone
            icon: mdi:desk
            hash: '#salone'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--orange)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 12
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    entity: binary_sensor.salone_ingresso_apertura
                    name: ' '
                    layout: vertical
                    fill_container: true
                    tap_action:
                      action: none
                  - type: custom:mushroom-entity-card
                    entity: sensor.temperatura_media_interna
                    name: ' '
                    layout: vertical
                  - type: custom:mushroom-entity-card
                    entity: sensor.umidita_media_interna
                    name: ' '
                    layout: vertical
                    icon_color: green
                  - type: custom:mushroom-entity-card
                    entity: binary_sensor.pir_soggiorno
                    name: ' '
                    layout: vertical
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    entity: switch.salone_1
                    name: salone 1
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:ceiling-light-multiple-outline
                    tap_action:
                      action: toggle
                  - type: custom:mushroom-entity-card
                    entity: switch.salone_2
                    name: salone 2
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:ceiling-light-multiple-outline
                    tap_action:
                      action: toggle
                  - type: custom:mushroom-entity-card
                    entity: light.luce_esterna
                    name: Esterna
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:ceiling-light-multiple-outline
                    tap_action:
                      action: toggle
                  - type: custom:mushroom-light-card
                    layout: vertical
                    fill_container: false
                    name: Led
                    use_light_color: false
                    show_brightness_control: false
                    show_color_temp_control: false
                    show_color_control: false
                    collapsible_controls: false
                    tap_action:
                      action: more-info
                    hold_action:
                      action: toggle
                    double_tap_action:
                      action: none
                    icon: mdi:led-strip-variant
                    entity: light.controller_rgb_w_ir_b67693
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    entity: automation.auto_off_salone_1
                    name: auto off
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:lightbulb-auto-outline
                    tap_action:
                      action: toggle
                  - type: custom:mushroom-entity-card
                    entity: automation.auto_off_salone
                    name: auto off
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:lightbulb-auto-outline
                    tap_action:
                      action: toggle
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: light
                        entity: scene.film
                        name: Film On
                        content_info: name
                      - type: light
                        entity: scene.film_off
                        name: Film Off
                        content_info: name
                    alignment: center
                  - type: custom:mushroom-entity-card
                    entity: switch.flux
                    name: FLUX
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:sun-snowflake
                    tap_action:
                      action: toggle
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    entity: media_player.sony_bravia_tv
                    name: 'Tv '
                    layout: vertical
                    fill_container: true
                    tap_action:
                      action: toggle
                    icon: mdi:television
                    icon_type: entity-picture
                  - type: custom:mushroom-entity-card
                    entity: media_player.appletv
                    name: Apple tv
                    layout: vertical
                    fill_container: true
                    tap_action:
                      action: toggle
                    icon: mdi:apple
                    icon_type: entity-picture
                  - type: custom:mushroom-entity-card
                    entity: media_player.soggiorno
                    name: Google
                    layout: vertical
                    fill_container: true
                    tap_action:
                      action: toggle
                    icon: mdi:google-assistant
                    icon_type: entity-picture
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: light
                        entity: light.dreamview_t1
                        name: Ambilight
                        content_info: name
                        double_tap_action:
                          action: none
                        icon: mdi:led-strip-variant
                        tap_action:
                          action: toggle
                        use_light_color: true
                        hold_action:
                          action: none
                      - type: entity
                        entity: switch.flux
                        name: Flux
                        content_info: name
                        icon: mdi:sun-wireless
                        double_tap_action:
                          action: none
                        use_entity_picture: false
                        hold_action:
                          action: none
                        tap_action:
                          action: toggle
                    alignment: center
              - type: custom:mushroom-cover-card
                entity: cover.tapparella_salone
                fill_container: false
                show_tilt_position_control: false
                show_position_control: true
                show_buttons_control: true
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                tap_action:
                  action: none
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Bagni
            icon: mdi:bathtub
            hash: '#bad_oppe'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--red)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 12
          - type: vertical-stack
            title: Bagni
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    entity: binary_sensor.bagno_finestra_apertura
                    name: ' '
                    layout: vertical
                    fill_container: true
                    tap_action:
                      action: none
                    icon: mdi:window-open-variant
                  - type: custom:mushroom-entity-card
                    entity: sensor.bagno_rosa_xiaomi_lywsd03mmc_temperatura
                    layout: vertical
                    primary_info: none
                  - type: custom:mushroom-entity-card
                    entity: sensor.bagno_rosa_xiaomi_lywsd03mmc_umidita
                    name: ' '
                    layout: vertical
                    icon_color: green
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: entity
                        entity: binary_sensor.bagno_rosa_antiallagamento_umidita
                        double_tap_action:
                          action: none
                        use_entity_picture: false
                        tap_action:
                          action: more-info
                        hold_action:
                          action: none
                        content_info: name
                        name: Rosa
                      - type: entity
                        entity: binary_sensor.bagno_verde_allagamento_umidita
                        double_tap_action:
                          action: none
                        use_entity_picture: false
                        tap_action:
                          action: more-info
                        hold_action:
                          action: none
                        content_info: name
                        name: Verde
                    alignment: center
                  - type: custom:mushroom-entity-card
                    entity: sensor.umidita_bagno_verde
                    name: ' '
                    layout: vertical
                    icon_color: green
                  - type: custom:mushroom-entity-card
                    entity: sensor.temperatura_bagno_verde
                    name: ' '
                    layout: vertical
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    name: rosa
                    layout: vertical
                    icon_color: pink
                    icon: mdi:ceiling-light-multiple-outline
                    tap_action:
                      action: toggle
                    entity: light.bagno_rosa
                  - type: custom:mushroom-entity-card
                    entity: light.disimpegno
                    name: disimpegno
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:ceiling-light-multiple-outline
                    tap_action:
                      action: toggle
                  - type: custom:mushroom-light-card
                    entity: switch.aspiratore
                    layout: vertical
                    fill_container: false
                    name: null
                    icon: mdi:fan-auto
                    use_light_color: true
                    show_brightness_control: false
                    show_color_temp_control: false
                    show_color_control: false
                    collapsible_controls: false
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    double_tap_action:
                      action: none
                  - type: custom:mushroom-entity-card
                    entity: light.bagno_verde
                    name: verde
                    layout: vertical
                    icon_color: green
                    icon: mdi:ceiling-light-multiple-outline
                    tap_action:
                      action: toggle
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-light-card
                    layout: vertical
                    fill_container: false
                    use_light_color: true
                    show_brightness_control: false
                    show_color_temp_control: false
                    show_color_control: false
                    collapsible_controls: false
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    double_tap_action:
                      action: none
                    entity: automation.auto_off_bagno_rosa
                  - type: custom:mushroom-entity-card
                    entity: automation.auto_off_disimpegno
                    name: auto off
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:lightbulb-auto-outline
                    tap_action:
                      action: toggle
                  - type: custom:mushroom-entity-card
                    name: auto off
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:sun-clock-outline
                    entity: automation.auto_off_aspiratore
                    tap_action:
                      action: toggle
                  - type: custom:mushroom-entity-card
                    entity: switch.flux
                    name: FLUX
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:sun-snowflake
                    tap_action:
                      action: toggle
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Bagni
            icon: mdi:bathtub-outline
            state: null
            hash: '#bagni'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--blue-dark)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 12
          - type: vertical-stack
            cards:
              - styles:
                  card:
                    - background: none
                    - padding: 12px 0 15px 0
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: custom:mushroom-entity-card
                        entity: binary_sensor.bagno_finestra_apertura
                        name: ' '
                        layout: vertical
                        fill_container: true
                        tap_action:
                          action: none
                        icon: mdi:window-open-variant
                      - type: custom:mushroom-entity-card
                        entity: sensor.bagno_rosa_xiaomi_lywsd03mmc_temperatura
                        layout: vertical
                        primary_info: none
                      - type: custom:mushroom-entity-card
                        entity: sensor.bagno_rosa_xiaomi_lywsd03mmc_umidita
                        name: ' '
                        layout: vertical
                        icon_color: green
                      - type: custom:mushroom-chips-card
                        chips:
                          - type: entity
                            entity: binary_sensor.bagno_rosa_antiallagamento_umidita
                            double_tap_action:
                              action: none
                            use_entity_picture: false
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            content_info: name
                            name: Rosa
                          - type: entity
                            entity: binary_sensor.bagno_verde_allagamento_umidita
                            double_tap_action:
                              action: none
                            use_entity_picture: false
                            tap_action:
                              action: more-info
                            hold_action:
                              action: none
                            content_info: name
                            name: Verde
                        alignment: center
                      - type: custom:mushroom-entity-card
                        entity: sensor.umidita_bagno_verde
                        name: ' '
                        layout: vertical
                        icon_color: green
                      - type: custom:mushroom-entity-card
                        entity: sensor.temperatura_bagno_verde
                        name: ' '
                        layout: vertical
                  - type: horizontal-stack
                    cards:
                      - type: custom:mushroom-entity-card
                        name: rosa
                        layout: vertical
                        icon_color: pink
                        icon: mdi:ceiling-light-multiple-outline
                        tap_action:
                          action: toggle
                        entity: light.bagno_rosa
                      - type: custom:mushroom-entity-card
                        entity: light.disimpegno
                        name: disimpegno
                        layout: vertical
                        icon_color: yellow
                        icon: mdi:ceiling-light-multiple-outline
                        tap_action:
                          action: toggle
                      - type: custom:mushroom-light-card
                        entity: switch.aspiratore
                        layout: vertical
                        fill_container: false
                        name: null
                        icon: mdi:fan-auto
                        use_light_color: true
                        show_brightness_control: false
                        show_color_temp_control: false
                        show_color_control: false
                        collapsible_controls: false
                        tap_action:
                          action: toggle
                        hold_action:
                          action: more-info
                        double_tap_action:
                          action: none
                      - type: custom:mushroom-entity-card
                        entity: light.bagno_verde
                        name: verde
                        layout: vertical
                        icon_color: green
                        icon: mdi:ceiling-light-multiple-outline
                        tap_action:
                          action: toggle
                  - type: horizontal-stack
                    cards:
                      - type: custom:mushroom-light-card
                        layout: vertical
                        fill_container: false
                        use_light_color: true
                        show_brightness_control: false
                        show_color_temp_control: false
                        show_color_control: false
                        collapsible_controls: false
                        tap_action:
                          action: toggle
                        hold_action:
                          action: more-info
                        double_tap_action:
                          action: none
                        entity: automation.auto_off_bagno_rosa
                      - type: custom:mushroom-entity-card
                        entity: automation.auto_off_disimpegno
                        name: auto off
                        layout: vertical
                        icon_color: yellow
                        icon: mdi:lightbulb-auto-outline
                        tap_action:
                          action: toggle
                      - type: custom:mushroom-entity-card
                        name: auto off
                        layout: vertical
                        icon_color: yellow
                        icon: mdi:sun-clock-outline
                        entity: automation.auto_off_aspiratore
                        tap_action:
                          action: toggle
                      - type: custom:mushroom-entity-card
                        entity: switch.flux
                        name: FLUX
                        layout: vertical
                        icon_color: yellow
                        icon: mdi:sun-snowflake
                        tap_action:
                          action: toggle
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Camera da letto
            icon: mdi:bed-king
            hash: '#cameradaletto'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--purple)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 12
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    entity: binary_sensor.camera_finestra_apertura
                    name: ' '
                    layout: vertical
                    fill_container: true
                    tap_action:
                      action: none
                    icon: mdi:window-open-variant
                  - type: custom:mushroom-entity-card
                    entity: sensor.camera_finestra_batteria
                    name: ' '
                    layout: vertical
                  - type: custom:mushroom-entity-card
                    entity: sensor.camera_da_letto_lywsd03mmc_temperatura
                    name: ' '
                    layout: vertical
                  - type: custom:mushroom-entity-card
                    entity: sensor.camera_da_letto_lywsd03mmc_umidita
                    name: ' '
                    layout: vertical
                    icon_color: green
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    entity: light.camera_da_letto
                    name: camera
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:ceiling-light-multiple-outline
                    tap_action:
                      action: toggle
                  - type: custom:mushroom-entity-card
                    name: bajour
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:ceiling-light-multiple-outline
                    tap_action:
                      action: toggle
                    entity: light.bajour_camera_da_letto
                  - type: custom:mushroom-entity-card
                    name: Scrivania
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:ceiling-light-multiple-outline
                    tap_action:
                      action: toggle
                    entity: switch.sonoff_abajour_abajour_tavolo
                  - type: custom:mushroom-light-card
                    layout: vertical
                    fill_container: false
                    name: led camera
                    use_light_color: true
                    show_brightness_control: false
                    show_color_temp_control: false
                    show_color_control: false
                    collapsible_controls: false
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    double_tap_action:
                      action: none
                    entity: light.ikea_of_sweden_tradfri_bulb_e27_cws_opal_600lm_luce
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-entity-card
                    entity: automation.auto_off_camera
                    name: auto off
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:lightbulb-auto-outline
                    tap_action:
                      action: toggle
                  - type: custom:mushroom-entity-card
                    entity: switch.flux
                    name: FLUX
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:sun-snowflake
                    tap_action:
                      action: toggle
                  - type: custom:mushroom-entity-card
                    entity: automation.auto_off_camera
                    name: auto off
                    layout: vertical
                    icon_color: yellow
                    icon: mdi:lightbulb-auto-outline
                    tap_action:
                      action: toggle
                  - type: custom:mushroom-entity-card
                    entity: media_player.cameretta
                    name: Google
                    layout: vertical
                    fill_container: true
                    tap_action:
                      action: toggle
                    icon: mdi:google-assistant
                    icon_type: entity-picture
                    primary_info: name
                    secondary_info: none
              - type: custom:mushroom-cover-card
                entity: cover.tapparella_camera_da_letto
                fill_container: false
                show_tilt_position_control: false
                show_position_control: true
                show_buttons_control: true
                hold_action:
                  action: none
                double_tap_action:
                  action: none
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Cameretta
            icon: mdi:bed
            hash: '#cameretta'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: Antonio
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: two
                          variables:
                            name: Antonio
                            icon: mdi:bed
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - Antonio: show
                                - Elisabetta: hide
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: three
                          variables:
                            name: Elisabetta
                            icon: mdi:bed
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - Antonio: hide
                                - Elisabetta: show
                      layout_type: custom:grid-layout
                    - type: custom:gap-card
                      height: 6
                    - type: vertical-stack
                      cards:
                        - type: horizontal-stack
                          cards:
                            - type: custom:mushroom-entity-card
                              entity: binary_sensor.cameretta_finestra_apertura
                              name: ' '
                              layout: vertical
                              fill_container: true
                              tap_action:
                                action: none
                              icon: mdi:window-open-variant
                            - type: custom:mushroom-entity-card
                              entity: sensor.cameretta_lywsd03mmc_temperature
                              name: ' '
                              layout: vertical
                              icon: mdi:thermometer
                            - type: custom:mushroom-entity-card
                              entity: sensor.cameretta_lywsd03mmc_umidity
                              name: ' '
                              layout: vertical
                              icon: mdi:water-percent
                            - type: custom:mushroom-entity-card
                              entity: binary_sensor.cameretta_pir_occupazione
                              name: ' '
                              layout: vertical
                              icon_color: green
                              icon: ''
                        - type: horizontal-stack
                          cards:
                            - type: custom:mushroom-entity-card
                              entity: light.camera_da_letto
                              name: camera
                              layout: vertical
                              icon_color: yellow
                              icon: mdi:ceiling-light-multiple-outline
                              tap_action:
                                action: toggle
                            - type: custom:mushroom-light-card
                              entity: light.led_cameretta
                              layout: vertical
                              fill_container: false
                              name: led strip
                              use_light_color: true
                              show_brightness_control: false
                              show_color_temp_control: false
                              show_color_control: false
                              collapsible_controls: false
                              tap_action:
                                action: more-info
                              hold_action:
                                action: toggle
                              double_tap_action:
                                action: none
                            - type: custom:mushroom-light-card
                              entity: light.cameretta
                              layout: vertical
                              fill_container: false
                              name: cameretta
                              use_light_color: true
                              show_brightness_control: false
                              show_color_temp_control: false
                              show_color_control: false
                              collapsible_controls: false
                              tap_action:
                                action: toggle
                              hold_action:
                                action: more-info
                              double_tap_action:
                                action: none
                            - type: custom:mushroom-entity-card
                              name: Led
                              layout: vertical
                              icon_color: yellow
                              icon: mdi:ceiling-light-multiple-outline
                              tap_action:
                                action: more-info
                              entity: light.cameretta_tz3000_dbou1ap4_ts0505a_luce
                        - type: horizontal-stack
                          cards:
                            - type: custom:mushroom-entity-card
                              entity: automation.auto_off_cameretta
                              name: auto off
                              layout: vertical
                              icon_color: yellow
                              icon: mdi:lightbulb-auto-outline
                              tap_action:
                                action: toggle
                            - type: custom:mushroom-entity-card
                              entity: switch.flux
                              name: FLUX
                              layout: vertical
                              icon_color: yellow
                              icon: mdi:sun-snowflake
                              tap_action:
                                action: toggle
                            - type: custom:mushroom-entity-card
                              entity: media_player.cameretta
                              name: Google
                              layout: vertical
                              fill_container: true
                              tap_action:
                                action: toggle
                              icon: mdi:google-assistant
                              icon_type: entity-picture
                        - type: custom:mushroom-cover-card
                          entity: cover.cameretta
                          fill_container: false
                          show_tilt_position_control: false
                          show_position_control: true
                          show_buttons_control: true
                          hold_action:
                            action: none
                          double_tap_action:
                            action: none
                          tap_action:
                            action: none
              - type: custom:local-conditional-card
                id: Elisabetta
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: two
                          variables:
                            name: Antonio
                            icon: mdi:bed
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - Antonio: show
                                - Elisabetta: hide
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: three
                          variables:
                            name: Elisabetta
                            icon: mdi:bed
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - Antonio: hide
                                - Elisabetta: show
                    - type: custom:gap-card
                      height: 6
                    - type: custom:button-card
                      template: room_conditions
                      variables:
                        background: var(--popupBG)
                        entity: sensor.cameretta_lywsd03mmc_temperature
                        temp: >
                          [[[ return
                          Math.round((states['sensor.cameretta_lywsd03mmc_temperature'].state)
                          * 10)/10 + '°' + '<span style="font-size:0.3em">' +
                          Math.round((states['sensor.cameretta_lywsd03mmc_umidity'].state)
                          * 10)/10 + '%']]]
                    - type: vertical-stack
                      cards:
                        - type: custom:button-card
                          name: Luci
                          styles:
                            card:
                              - background: none
                              - padding: 12px 0 15px 0
                              - '--mdc-ripple-press-opacity': 0
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - justify-self: start
                              - align-self: center
                        - type: custom:decluttering-card
                          template: light_slider
                          variables:
                            - entity: light.led_cameretta
                            - name: Taklampe
                            - icon: mdi:ceiling-light
                            - background: var(--popupBG)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Centro notifiche
            icon: mdi:message
            hash: '#centronotifiche'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: centronotifiche
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:gap-card
                      height: 6
                    - type: custom:vertical-stack-in-card
                      cards:
                        - type: custom:paper-buttons-row
                          styles:
                            background: var(--primary-color)
                          buttons:
                            - entity: sensor.notifier_config
                              icon: mdi:account-tie
                              name: '{{ states(config.entity) }}'
                              styles:
                                button:
                                  font-size: 16px
                                  color: var(--primary-text-color)
                              tap_action:
                                action: navigate
                                navigation_path: centro-notifiche
                        - type: conditional
                          conditions:
                            - entity: sensor.notifier_debug_error
                              state_not: 'on'
                            - entity: sensor.notifier_debug_error
                              state_not: OK
                          card:
                            type: markdown
                            card_mod:
                              style: |
                                ha-markdown.no-header {
                                  padding: 0px !important;
                                }
                            content: |-
                              <ha-alert alert-type="error">
                                <details>
                                  <summary>Attenzione {{ user }}, si è verificato un errore in Notifier App</summary>
                                  {{states('sensor.notifier_debug_error')}}
                              </details>
                        - type: custom:paper-buttons-row
                          styles:
                            display: flex
                            justify-content: space-between
                          buttons:
                            - entity: group.notifier_group_notification
                              layout: icon
                            - entity: input_boolean.notifier_speech_notifications
                              layout: icon
                              state_icons:
                                'on': mdi:account-tie-voice
                                'off': mdi:account-tie-voice-off
                            - entity: input_boolean.notifier_text_notifications
                              layout: icon
                              state_icons:
                                'off': mdi:cellphone-message-off
                            - entity: input_boolean.notifier_screen_notifications
                              layout: icon
                              state_icons:
                                'off': mdi:home-assistant
                            - entity: input_boolean.notifier_guest_mode
                              layout: icon
                              state_icons:
                                'on': mdi:account-multiple-plus
                                'off': mdi:account-multiple-minus-outline
                            - entity: input_boolean.notifier_priority_message
                              layout: icon
                              state_icons:
                                'off': mdi:alarm-light-outline
                            - entity: input_boolean.notifier_holidays
                              layout: icon
                            - entity: automation.centro_notifiche_configurazione_avvio
                              layout: icon
                              icon: mdi:cog
                              styles:
                                button:
                                  color: >
                                    {{ iif(is_state(config.entity, 'off'),
                                    'var(--error-color)',
                                    'var(--state-active-color)') }}
                              hold_action:
                                action: more-info
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  service: browser_mod.popup
                                  data:
                                    title: Impostazioni
                                    content:
                                      type: entities
                                      state_color: true
                                      entities:
                                        - entity: >-
                                            automation.centro_notifiche_configurazione_avvio
                                        - entity: sensor.notifier_debug_error
                                          name: Notifier Debug Error
                                          icon: mdi:account-wrench
                                        - entity: sensor.notifier_config
                                        - entity: input_button.notifier_reset_config
                                          tap_action:
                                            action: call-service
                                            service: input_button.press
                                            target:
                                              entity_id: input_button.notifier_reset_config
                                            confirmation:
                                              text: Procedo al reset della configurazione?
                                        - type: button
                                          icon: mdi:restart
                                          entity: sensor.notifier_debug_error
                                          name: Restart App
                                          tap_action:
                                            action: fire-dom-event
                                            browser_mod:
                                              service: browser_mod.popup
                                              data:
                                                content: >
                                                  Sei sicuro di voler riavviare l'App
                                                  Notifier?
                                                right_button: SI
                                                left_button: 'NO'
                                                right_button_action:
                                                  service: script.my_notify
                                                  data:
                                                    ad:
                                                      command: restart
                        - type: divider
                          style:
                            background-color: var(--primary-color)
                            height: 1px
                        - type: custom:paper-buttons-row
                          styles:
                            display: grid
                            grid-template-columns: repeat(4, 1fr)
                            font-size: 0.9em
                          buttons:
                            - entity: group.notifier_location_tracker
                              layout: icon|name|state
                              name: >
                                {{
                                state_attr('binary_sensor.notifier_people_home',
                                'number') }}
                              styles:
                                button:
                                  justify-content: flex-start
                                  color: var(--state-person-home-color)
                                icon:
                                  scale: 70%
                              state_icons:
                                not_home: mdi:home-export-outline
                                home: mdi:home-import-outline
                              state_styles:
                                not_home:
                                  button:
                                    color: var(--red-color)
                                home:
                                  button:
                                    color: var(--state-person-home-color)
                              tap_action:
                                action: more-info
                            - entity: sensor.notifier_day_period
                              layout: state
                              styles:
                                button:
                                  color: var(--info-color)
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  service: browser_mod.popup
                                  data:
                                    title: ⌚ Orari priodo del giorno
                                    content:
                                      type: entities
                                      entities:
                                        - >-
                                          input_datetime.notifier_start_early_morning
                                        - input_datetime.notifier_start_morning
                                        - input_datetime.notifier_start_afternoon
                                        - input_datetime.notifier_start_evening
                                        - input_datetime.notifier_start_night
                                        - input_datetime.notifier_start_late_night
                            - entity: sensor.notifier_day_period_volume
                              layout: name|state
                              state: '{{states(config.entity)}}%'
                              name: VOL
                              styles:
                                button:
                                  color: var(--info-color)
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  service: browser_mod.popup
                                  data:
                                    title: 🎚 Volumi
                                    content:
                                      type: entities
                                      entities:
                                        - >-
                                          input_number.notifier_early_morning_volume
                                        - input_number.notifier_morning_volume
                                        - input_number.notifier_afternoon_volume
                                        - input_number.notifier_evening_volume
                                        - input_number.notifier_night_volume
                                        - input_number.notifier_late_night_volume
                                        - input_number.notifier_intercom_volume
                            - entity: binary_sensor.notifier_dnd
                              layout: name|state
                              name: DND
                              styles:
                                button:
                                  - color: >-
                                      {{ iif(states(config.entity) == 'on', 
                                      'var(--warning-color)',
                                      'var(--info-color)') }}
                              state_icons:
                                'on': mdi:minus-circle
                                'off': mdi:minus-circle-off
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  service: browser_mod.popup
                                  data:
                                    title: 🔇 Orari non disturbare
                                    content:
                                      type: entities
                                      entities:
                                        - input_datetime.notifier_start_weekdays
                                        - input_datetime.notifier_end_weekdays
                                        - input_datetime.notifier_start_holidays
                                        - input_datetime.notifier_end_holidays
                        - type: divider
                          style:
                            background-color: var(--primary-color)
                            height: 1px
                        - type: custom:paper-buttons-row
                          styles:
                            display: grid
                            grid-template-columns: repeat(4, 1fr)
                            font-size: 0.9em
                          buttons:
                            - entity: input_boolean.notifier_alexa_switch
                              layout: icon|name
                              name: Alexa
                              styles:
                                button:
                                  justify-content: flex-start
                                  color: >-
                                    {{
                                    iif(is_state('binary_sensor.notifier_alexa_speak',
                                    'on'),  'var(--warning-color)', '') }}
                                  animation: >-
                                    {{
                                    iif(is_state('binary_sensor.notifier_alexa_speak',
                                    'on'),  'blink 1.5s linear infinite
                                    alternate', '') }}
                                icon:
                                  scale: 70%
                              hold_action:
                                action: fire-dom-event
                                browser_mod:
                                  service: browser_mod.popup
                                  data:
                                    title: Alexa
                                    content:
                                      type: entities
                                      state_color: true
                                      entities:
                                        - entity: input_boolean.notifier_alexa_switch
                                          icon: mdi:dots-circle
                                        - entity: select.notifier_player_alexa
                                        - entity: input_select.notifier_alexa_type
                                        - entity: input_select.notifier_alexa_method
                                        - entity: >-
                                            input_boolean.notifier_alexa_smart_volume
                                        - entity: binary_sensor.notifier_alexa_speak
                                          icon: mdi:speaker-message
                                          name: Alexa Parla
                                        - type: section
                                          label: SSML
                                        - entity: input_boolean.notifier_alexa_ssml
                                        - entity: input_select.notifier_alexa_voice
                                        - entity: input_select.notifier_alexa_language
                                        - entity: input_number.notifier_alexa_prosody_rate
                                        - entity: >-
                                            input_number.notifier_alexa_prosody_pitch
                                        - entity: >-
                                            input_number.notifier_alexa_prosody_volume
                                        - entity: button.notifier_alexa_ssml_reset
                                        - type: section
                                          label: Info
                                        - entity: sensor.notifier_player_alexa
                                        - type: attribute
                                          name: Entities list
                                          entity: sensor.notifier_player_alexa
                                          attribute: entities
                                        - type: attribute
                                          entity: sensor.notifier_player_alexa
                                          attribute: selected
                                        - entity: group.notifier_player_alexa
                                        - type: attribute
                                          entity: group.notifier_player_alexa
                                          attribute: entity_id
                                          name: Players
                            - entity: select.notifier_player_alexa
                              layout: state
                              state:
                                case: first
                              state_icons:
                                'on': mdi:minus-circle
                                'off': mdi:minus-circle-off
                              styles:
                                button:
                                  color: var(--primary-text-color)
                              tap_action:
                                action: call-service
                                service: select.select_next
                                target:
                                  entity_id: select.notifier_player_alexa
                                data:
                                  cycle: true
                              double_tap_action:
                                action: call-service
                                service: select.select_first
                                target:
                                  entity_id: select.notifier_player_alexa
                            - entity: input_select.notifier_alexa_type
                              layout: state
                              state:
                                case: first
                              state_styles:
                                announce:
                                  button:
                                    color: var(--state-active-color)
                              styles:
                                button:
                                  color: var(--primary-text-color)
                              tap_action:
                                action: call-service
                                service: input_select.select_next
                                service_data:
                                  entity_id: input_select.notifier_alexa_type
                            - entity: sensor.notifier_player_alexa
                              layout: state
                              styles:
                                button:
                                  color: var(--info-color)
                                icon:
                                  scale: 70%
                              state: >
                                {{ state_attr(config.entity, 'entities')
                                |map('state_attr', 'volume_level') |unique |list
                                }}
                                  
                        - type: custom:paper-buttons-row
                          styles:
                            display: grid
                            grid-template-columns: repeat(4, 1fr)
                            font-size: 0.9em
                          buttons:
                            - entity: input_boolean.notifier_google_switch
                              layout: icon|name
                              name: Google
                              styles:
                                button:
                                  justify-content: flex-start
                                icon:
                                  scale: 70%
                              hold_action:
                                action: fire-dom-event
                                browser_mod:
                                  service: browser_mod.popup
                                  data:
                                    title: Google
                                    content:
                                      type: entities
                                      state_color: true
                                      entities:
                                        - entity: input_boolean.notifier_google_switch
                                        - entity: select.notifier_player_google
                                        - entity: input_select.notifier_google_tts_notify
                                        - type: section
                                          label: Info
                                        - entity: sensor.notifier_player_google
                                        - type: attribute
                                          name: Entities list
                                          entity: sensor.notifier_player_google
                                          attribute: entities
                                        - type: attribute
                                          name: Selected
                                          entity: sensor.notifier_player_google
                                          attribute: selected
                                        - entity: group.notifier_player_google
                                        - type: attribute
                                          entity: group.notifier_player_google
                                          attribute: entity_id
                            - entity: select.notifier_player_google
                              layout: state
                              state:
                                case: first
                              styles:
                                button:
                                  color: var(--primary-text-color)
                              tap_action:
                                action: call-service
                                service: select.select_next
                                target:
                                  entity_id: select.notifier_player_google
                                data:
                                  cycle: true
                              double_tap_action:
                                action: call-service
                                service: select.select_first
                                target:
                                  entity_id: select.notifier_player_google
                            - entity: input_select.notifier_google_tts_notify
                              layout: icon|state
                              icon: false
                              state_text:
                                google say: Say
                                google cloud: Cloud
                                google assistant: Assistant
                                reverso: Reverso
                              styles:
                                button:
                                  color: var(--primary-text-color)
                              tap_action:
                                action: call-service
                                service: input_select.select_next
                                service_data:
                                  entity_id: input_select.notifier_google_tts_notify
                            - entity: sensor.notifier_player_google
                              layout: state
                              styles:
                                button:
                                  color: var(--info-color)
                                icon:
                                  scale: 70%
                              state: >
                                {{ state_attr('sensor.notifier_player_google',
                                'entities')  | map('state_attr','volume_level') 
                                | reject('none') |  map('round', 1) | list
                                |default('OFF',true) }}
                        - type: custom:paper-buttons-row
                          styles:
                            display: grid
                            grid-template-columns: repeat(4, 1fr)
                            font-size: 0.9em
                          buttons:
                            - entity: input_boolean.notifier_phone_notifications
                              layout: icon|name
                              name: Voip
                              styles:
                                button:
                                  justify-content: flex-start
                                icon:
                                  scale: 70%
                              state_icons:
                                'off': mdi:phone-off
                            - entity: input_select.notifier_phone_notify
                              layout: state
                              state:
                                case: first
                              styles:
                                button:
                                  color: var(--primary-text-color)
                            - entity: input_button.notifier_reset_config
                              layout: icon|name
                              name: Reset
                              styles:
                                button:
                                  color: var(--error-color)
                              tap_action:
                                action: toggle
                                confirmation:
                                  text: Procedo al reset della configurazione?
                            - type: button
                              layout: icon|name
                              name: Restart
                              icon: mdi:restart
                              styles:
                                button:
                                  color: var(--error-color)
                              tap_action:
                                action: call-service
                                confirmation:
                                  text: >-
                                    Sei sicuro di voler riavviare l'App
                                    Notifier?
                                service: script.my_notify
                                service_data:
                                  ad:
                                    command: restart
                        - type: divider
                          style:
                            background-color: var(--primary-color)
                            height: 1px
                        - type: custom:paper-buttons-row
                          styles:
                            display: flex
                            justify-content: space-between
                            font-size: 0.9em
                          buttons:
                            - entity: input_boolean.notifier_text_notifications
                              layout: icon|name
                              name: Notify
                              styles:
                                button:
                                  justify-content: flex-start
                                icon:
                                  scale: 70%
                              state_icons:
                                'off': mdi:cellphone-message-off
                            - entity: select.notifier_text_notify
                              layout: state
                              state:
                                case: first
                              styles:
                                button:
                                  justify-self: flex-start
                                icon:
                                  color: >
                                    {{ iif(is_state(config.entity, 'on'),
                                    'var(--state-active-color)', '') }}
                                state:
                                  color: var(--primary-text-color)
                              tap_action:
                                action: call-service
                                service: select.select_next
                                target:
                                  entity_id: select.notifier_text_notify
                                data:
                                  cycle: true
                              double_tap_action:
                                action: call-service
                                service: select.select_first
                                target:
                                  entity_id: select.notifier_text_notify
                            - entity: input_boolean.notifier_html_mode
                              layout: icon
                              icon: >
                                {{ iif(is_state(config.entity, 'off'),
                                'mdi:language-markdown', '') }}
                            - entity: input_boolean.notifier_wrap_text
                              layout: icon
                              icon: >
                                {{ iif(is_state(config.entity, 'off'),
                                'mdi:text-long', '') }}
                            - entity: input_boolean.notifier_tts_clock
                              layout: icon
                        - type: divider
                          style:
                            background-color: var(--primary-color)
                            height: 1px
                        - type: entities
                          card_mod:
                            style: |
                              ha-card {
                                background:none; border-radius: 0px; box-shadow: none; 
                              }
                              .card-content {padding: 0px; margin: 0;}
                          entities:
                            - type: custom:fold-entity-row
                              cickable: true
                              head:
                                entity: input_number.notifier_intercom_volume
                                icon: mdi:bullhorn-outline
                                name: Interfono
                                tap_action:
                                  action: fire-dom-event
                                  fold_row: true
                                extend_paper_buttons_row:
                                  hide_state: true
                                  position: right
                                  buttons:
                                    - entity: button.notifier_last_message
                                      layout: icon
                                      tap_action:
                                        action: call-service
                                        service: button.press
                                        target:
                                          entity_id: button.notifier_last_message
                                      styles:
                                        ripple:
                                          color: var(--accent-color)
                              entities:
                                - type: custom:lovelace-multiline-text-input-card
                                  card_mod:
                                    style: >
                                      ha-card {
                                        background:none; border-radius: 0px; box-shadow: none; 
                                        color: var(--primary-text-color);
                                      }

                                      textarea.textarea {margin: 0;}

                                      .card-content {padding-left:
                                      0px;padding-top: 0px; }
                                  entity: input_text.notifier_intercom_message
                                  max_length: 255
                                  min_length: 1
                                  placeholder_text: Messaggio da inviare...
                                  title: ''
                                  buttons:
                                    save: true
                                    paste: true
                                    clear: true
                                  icons:
                                    save: mdi:send
                                    paste: mdi:content-paste
                                    clear: mdi:delete-forever
                                - type: custom:paper-buttons-row
                                  styles:
                                    display: flex
                                    justify-content: space-between
                                  buttons:
                                    - entity: input_number.notifier_intercom_volume
                                      layout: icon|name
                                    - icon: mdi:volume-minus
                                      tap_action:
                                        action: call-service
                                        service: input_number.decrement
                                        service_data:
                                          entity_id: input_number.notifier_intercom_volume
                                    - entity: input_number.notifier_intercom_volume
                                      layout: state
                                      state: >
                                        {{
                                        states('input_number.notifier_intercom_volume')|int(0)
                                        }}%
                                    - icon: mdi:volume-plus
                                      tap_action:
                                        action: call-service
                                        service: input_number.increment
                                        service_data:
                                          entity_id: input_number.notifier_intercom_volume
                        - type: conditional
                          conditions:
                            - entity: input_text.notifier_last_message
                              state_not: ''
                          card:
                            type: markdown
                            entity_id: input_text.notifier_last_message
                            card_mod:
                              style: |
                                ha-markdown.no-header {
                                  padding: 0px !important;
                                }
                            content: |-
                              <ha-alert alert-type="success">
                              <details>
                                  <summary>Ultimo Messaggio</summary>
                                  {{states('input_text.notifier_last_message')}}
                              </details>
                              </ha-alert>
              - type: custom:local-conditional-card
                id: soverom_emma
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: two
                          variables:
                            name: Mille
                            icon: mdi:bed
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soverom_mille: show
                                - soverom_emma: hide
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: three
                          variables:
                            name: Emma
                            icon: mdi:bed
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soverom_mille: hide
                                - soverom_emma: show
                    - type: custom:gap-card
                      height: 6
                    - type: custom:button-card
                      template: room_conditions
                      variables:
                        background: var(--popupBG)
                        entity: sensor.temperatur_mille_temperature
                        temp: >
                          [[[ return
                          Math.round((states['sensor.temperatur_emma_temperature'].state)
                          * 10)/10 + '°' + '<span style="font-size:0.3em">' +
                          Math.round((states['sensor.temperatur_emma_humidity'].state)
                          * 10)/10 + '%']]]
                    - type: vertical-stack
                      cards:
                        - type: custom:button-card
                          name: Lys
                          styles:
                            card:
                              - background: none
                              - padding: 12px 0 15px 0
                              - '--mdc-ripple-press-opacity': 0
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - justify-self: start
                              - align-self: center
                        - type: custom:decluttering-card
                          template: light_slider
                          variables:
                            - entity: light.emma_dimmer_taklampe
                            - name: Taklampe
                            - icon: mdi:ceiling-light
                            - background: var(--popupBG)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: sveglia
            icon: mdi:alarm
            hash: '#sveglia'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: sveglia
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:gap-card
                      height: 6
                    - type: entities
                      entities:
                        - entity: automation.attiva_sveglia_news_2
                        - entity: input_select.radio_station
                        - entity: input_select.media_audio
                        - entity: input_select.media_device
                        - entity: input_number.volume_radio
                          secondary_info: none
                          name: Volume Tutti
                        - entity: binary_sensor.giorni_feriali_mimmo
                        - entity: input_boolean.sveglia_fine_settimana
                        - entity: script.stop_radio
                          name: STOP
                        - entity: input_datetime.orario_sveglia_1
                        - entity: input_boolean.attiva_sveglia_1
                        - entity: input_datetime.orario_sveglia_2
                        - entity: input_boolean.attiva_sveglia_2
                        - entity: input_datetime.orario_sveglia_3
                        - entity: input_boolean.attiva_sveglia_3
                        - entity: input_datetime.orario_sveglia_4
                        - entity: input_boolean.attiva_sveglia_4
                        - entity: input_boolean.ascolta_calendario
                        - entity: input_boolean.ascolta_santi
                        - entity: input_boolean.ascolta_radio
                        - entity: input_boolean.ascolta_compleanno
                        - entity: input_boolean.apri_tutte_le_tapparelle
                      show_header_toggle: false
                      state_color: true
              - type: custom:local-conditional-card
                id: soverom_emma
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: two
                          variables:
                            name: Mille
                            icon: mdi:bed
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soverom_mille: show
                                - soverom_emma: hide
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: three
                          variables:
                            name: Emma
                            icon: mdi:bed
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soverom_mille: hide
                                - soverom_emma: show
                    - type: custom:gap-card
                      height: 6
                    - type: custom:button-card
                      template: room_conditions
                      variables:
                        background: var(--popupBG)
                        entity: sensor.temperatur_mille_temperature
                        temp: >
                          [[[ return
                          Math.round((states['sensor.temperatur_emma_temperature'].state)
                          * 10)/10 + '°' + '<span style="font-size:0.3em">' +
                          Math.round((states['sensor.temperatur_emma_humidity'].state)
                          * 10)/10 + '%']]]
                    - type: vertical-stack
                      cards:
                        - type: custom:button-card
                          name: Lys
                          styles:
                            card:
                              - background: none
                              - padding: 12px 0 15px 0
                              - '--mdc-ripple-press-opacity': 0
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - justify-self: start
                              - align-self: center
                        - type: custom:decluttering-card
                          template: light_slider
                          variables:
                            - entity: light.emma_dimmer_taklampe
                            - name: Taklampe
                            - icon: mdi:ceiling-light
                            - background: var(--popupBG)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Garage - Interrato
            icon: mdi:garage-alert-variant
            hash: '#garage'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: garage
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:gap-card
                      height: 6
                    - type: vertical-stack
                      cards:
                        - type: horizontal-stack
                          cards:
                            - type: custom:mushroom-entity-card
                              name: ' '
                              layout: vertical
                              fill_container: true
                              tap_action:
                                action: none
                              entity: binary_sensor.basculante
                              icon: mdi:garage-alert
                            - type: custom:mushroom-entity-card
                              entity: sensor.garage_garage_bmp180_temperature
                              name: ' '
                              layout: vertical
                            - type: custom:mushroom-entity-card
                              name: ' '
                              layout: vertical
                              icon_color: green
                              entity: sensor.umidita_esterna
                            - type: custom:mushroom-entity-card
                              name: ' '
                              layout: vertical
                              icon: ''
                              icon_color: deep-purple
                              fill_container: false
                              entity: switch.garage_basculante
                              tap_action:
                                action: none
                              hold_action:
                                action: none
                              double_tap_action:
                                action: none
                        - type: horizontal-stack
                          cards:
                            - type: custom:mushroom-entity-card
                              entity: switch.garage_garage
                              name: Garage
                              layout: vertical
                              icon_color: yellow
                              icon: mdi:ceiling-light-multiple-outline
                              tap_action:
                                action: toggle
                            - type: custom:mushroom-entity-card
                              name: Giardino
                              layout: vertical
                              icon_color: yellow
                              icon: mdi:ceiling-light-multiple-outline
                              tap_action:
                                action: toggle
                              entity: switch.condominio_luci_giardino
                            - type: custom:mushroom-entity-card
                              name: Irrigatori
                              layout: vertical
                              icon_color: yellow
                              icon: mdi:ceiling-light-multiple-outline
                              tap_action:
                                action: toggle
                              entity: binary_sensor.irrigation_unlimited_c1_m
                            - type: custom:mushroom-light-card
                              entity: cover.carraio
                              layout: vertical
                              fill_container: false
                              name: Carraio
                              use_light_color: true
                              show_brightness_control: false
                              show_color_temp_control: false
                              show_color_control: false
                              collapsible_controls: false
                              tap_action:
                                action: toggle
                              hold_action:
                                action: more-info
                              double_tap_action:
                                action: none
              - type: custom:local-conditional-card
                id: soverom_emma
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: two
                          variables:
                            name: Mille
                            icon: mdi:bed
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soverom_mille: show
                                - soverom_emma: hide
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: three
                          variables:
                            name: Emma
                            icon: mdi:bed
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soverom_mille: hide
                                - soverom_emma: show
                    - type: custom:gap-card
                      height: 3
                    - type: custom:button-card
                      template: room_conditions
                      variables:
                        background: var(--popupBG)
                        entity: sensor.temperatur_mille_temperature
                        temp: >
                          [[[ return
                          Math.round((states['sensor.temperatur_emma_temperature'].state)
                          * 10)/10 + '°' + '<span style="font-size:0.3em">' +
                          Math.round((states['sensor.temperatur_emma_humidity'].state)
                          * 10)/10 + '%']]]
                    - type: vertical-stack
                      cards:
                        - type: custom:button-card
                          name: Lys
                          styles:
                            card:
                              - background: none
                              - padding: 12px 0 15px 0
                              - '--mdc-ripple-press-opacity': 0
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - justify-self: start
                              - align-self: center
                        - type: custom:decluttering-card
                          template: light_slider
                          variables:
                            - entity: light.emma_dimmer_taklampe
                            - name: Taklampe
                            - icon: mdi:ceiling-light
                            - background: var(--popupBG)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Irrigazione Giardino e Balcone
            icon: mdi:sprinkler-variant
            hash: '#irrigazione'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: irrigazione
                default: show
                card:
                  type: custom:irrigation-unlimited-card
                  always_show_zones: true
                  always_show_sequences: true
              - type: custom:local-conditional-card
                id: soverom_emma
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: two
                          variables:
                            name: Mille
                            icon: mdi:bed
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soverom_mille: show
                                - soverom_emma: hide
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: three
                          variables:
                            name: Emma
                            icon: mdi:bed
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soverom_mille: hide
                                - soverom_emma: show
                    - type: custom:gap-card
                      height: 3
                    - type: custom:button-card
                      template: room_conditions
                      variables:
                        background: var(--popupBG)
                        entity: sensor.temperatur_mille_temperature
                        temp: >
                          [[[ return
                          Math.round((states['sensor.temperatur_emma_temperature'].state)
                          * 10)/10 + '°' + '<span style="font-size:0.3em">' +
                          Math.round((states['sensor.temperatur_emma_humidity'].state)
                          * 10)/10 + '%']]]
                    - type: vertical-stack
                      cards:
                        - type: custom:button-card
                          name: Lys
                          styles:
                            card:
                              - background: none
                              - padding: 12px 0 15px 0
                              - '--mdc-ripple-press-opacity': 0
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - justify-self: start
                              - align-self: center
                        - type: custom:decluttering-card
                          template: light_slider
                          variables:
                            - entity: light.emma_dimmer_taklampe
                            - name: Taklampe
                            - icon: mdi:ceiling-light
                            - background: var(--popupBG)
              - type: custom:mini-graph-card
                name: irrigazione controller 1
                icon: mdi:sprinkler-variant
                entities:
                  - entity: binary_sensor.irrigation_unlimited_c1_z1
                    attribute: today_total
                  - entity: binary_sensor.irrigation_unlimited_c1_z2
                    attribute: today_total
                  - entity: binary_sensor.irrigation_unlimited_c1_z3
                    attribute: today_total
                  - entity: binary_sensor.irrigation_unlimited_c1_z4
                    attribute: today_total
                  - entity: binary_sensor.irrigation_unlimited_c1_z5
                    attribute: today_total
                  - entity: binary_sensor.irrigation_unlimited_c1_z6
                    attribute: today_total
                  - entity: binary_sensor.irrigation_unlimited_c1_z7
                    attribute: today_total
                show:
                  graph: bar
                  labels: true
                unit: min
                aggregate_func: max
                hours_to_show: 168
                group_by: date
                lower_bound: 0
              - type: custom:mini-graph-card
                name: Pioggia
                entities:
                  - entity: sensor.ironch4_precipitation_today
                    name: Current
                    aggregate_func: max
                  - entity: sensor.irrigation_unlimited_rain_weighted_total
                    name: Weighted total
                    aggregate_func: min
                    y_axis: secondary
                hours_to_show: 144
                group_by: date
                lower_bound: 0
                decimals: 1
                show:
                  labels: true
                  labels_secondary: true
              - type: vertical-stack
                title: Controller Zone - Pompa
                cards:
                  - type: custom:mini-graph-card
                    height: 50
                    line_width: 3
                    font_size: 70
                    hours_to_show: 24
                    points_per_hour: 1
                    show:
                      extrema: true
                      fill: true
                    style: |
                      ha-card { 
                        --ha-card-background: "rgba(0, 0, 0, 0.0)";
                        --ha-card-box-shadow: 'none';
                        border-radius: 5px;
                      }
                      .info.flex {
                        font-size: 12px !important;
                      }
                    entities:
                      - sensor.giardino_temperatura_giardino
                    name: Temperatura
                  - type: custom:mini-graph-card
                    height: 50
                    line_width: 3
                    font_size: 70
                    hours_to_show: 24
                    points_per_hour: 1
                    show:
                      extrema: true
                      fill: true
                    style: |
                      ha-card { 
                        --ha-card-background: "rgba(0, 0, 0, 0.0)";
                        --ha-card-box-shadow: 'none';
                        border-radius: 5px;
                      }
                      .info.flex {
                        font-size: 12px !important;
                      }
                    entities:
                      - sensor.giardino_umidita_giardino
                    name: Umidità
                    color_thresholds:
                      - value: 90
                        color: blue
                      - value: 60
                        color: lightblue
                      - value: 40
                        color: orange
                      - value: 20
                        color: white
                  - type: entities
                    entities:
                      - entity: switch.giardino_zona_1
                      - entity: switch.giardino_zona_2
                      - entity: switch.giardino_zona_3
                      - entity: switch.giardino_zona_4
                      - entity: switch.giardino_zona_5
                      - entity: switch.giardino_zona_6
                      - entity: switch.irrigatore
                        name: balcone
                      - entity: switch.condominio_luci_giardino
                    state_color: true
                  - type: history-graph
                    entities:
                      - entity: binary_sensor.irrigation_unlimited_c1_z1
                      - entity: binary_sensor.irrigation_unlimited_c1_z2
                      - entity: binary_sensor.irrigation_unlimited_c1_z3
                      - entity: binary_sensor.irrigation_unlimited_c1_z4
                      - entity: binary_sensor.irrigation_unlimited_c1_z5
                      - entity: binary_sensor.irrigation_unlimited_c1_z6
                      - entity: binary_sensor.irrigation_unlimited_c1_z7
                      - entity: switch.luci_guardino
                    hours_to_show: 48
                    title: Tempo Attivazione Pompa
                  - type: custom:fold-entity-row
                    group_config:
                      toggle: true
                    head:
                      label: Controller
                      type: section
                    padding: 0
                    items:
                      - entity: sensor.giardino_vcore_giardino
                  - group_config:
                      toggle: true
                    head:
                      label: Info dispositivo
                      type: section
                    items:
                      - entity: switch.giardino_riavvia_giardino
                      - entity: sensor.giardino_connected_bssid
                        name: Connected BSSID
                        icon: hass:wifi
                      - entity: sensor.giardino_connected_ssid
                        name: Connected SSID
                        icon: hass:wifi
                      - entity: sensor.giardino_ip_address
                        name: IP Address
                        icon: hass:wifi
                      - entity: sensor.giardino_mac_wifi_address
                        name: Mac Wifi Address
                        icon: hass:wifi
                      - entity: sensor.giardino_ultimo_scan
                        name: Scan
                        icon: hass:wifi
                    padding: 0
                    type: custom:fold-entity-row
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Tapparella Cameretta
            icon: mdi:window-shutter
            hash: '#tapparella_cameretta'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: custom:mushroom-cover-card
            entity: cover.cameretta
            show_tilt_position_control: false
            show_position_control: true
            fill_container: true
            layout: vertical
            show_buttons_control: false
            primary_info: state
            secondary_info: none
            icon_type: none
          - type: custom:mushroom-cover-card
            entity: cover.cameretta
            show_tilt_position_control: false
            show_position_control: false
            fill_container: true
            layout: vertical
            show_buttons_control: true
            primary_info: none
            secondary_info: none
            icon_type: none
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Tapparella Camera Da Letto
            icon: mdi:window-shutter
            hash: '#tapparella_camera'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: custom:mushroom-cover-card
            entity: cover.tapparella_camera_da_letto
            show_tilt_position_control: false
            show_position_control: true
            fill_container: true
            layout: vertical
            show_buttons_control: false
            primary_info: state
            secondary_info: none
            icon_type: none
          - type: custom:mushroom-cover-card
            entity: cover.tapparella_camera_da_letto
            show_tilt_position_control: false
            show_position_control: false
            fill_container: true
            layout: vertical
            show_buttons_control: true
            primary_info: none
            secondary_info: none
            icon_type: none
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Tapparella Salone
            icon: mdi:window-shutter
            hash: '#tapparellasalone'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: custom:mushroom-cover-card
            entity: cover.tapparella_salone
            show_tilt_position_control: false
            show_position_control: true
            fill_container: true
            layout: vertical
            show_buttons_control: false
            primary_info: state
            secondary_info: none
            icon_type: none
          - type: custom:mushroom-cover-card
            entity: cover.tapparella_salone
            show_tilt_position_control: false
            show_position_control: false
            fill_container: true
            layout: vertical
            show_buttons_control: true
            primary_info: none
            secondary_info: none
            icon_type: none
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Tapparella Cucina
            icon: mdi:window-shutter
            hash: '#tapparella_cucina'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: custom:mushroom-cover-card
            entity: cover.tapparella_cucina
            show_tilt_position_control: false
            show_position_control: true
            fill_container: true
            layout: vertical
            show_buttons_control: false
            primary_info: state
            secondary_info: none
            icon_type: none
          - type: custom:mushroom-cover-card
            entity: cover.tapparella_cucina
            show_tilt_position_control: false
            show_position_control: false
            fill_container: true
            layout: vertical
            show_buttons_control: true
            primary_info: none
            secondary_info: none
            icon_type: none
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Pannello ALLARME
            icon: mdi:shield
            hash: '#pannello_allarme'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: custom:alarmo-card
            entity: alarm_control_panel.alarmo
            name: ' '
            keep_keypad_visible: true
            use_clear_icon: true
            button_scale_actions: 1
            button_scale_keypad: 1
            states:
              armed_away:
                hide: false
                button_label: FUORI
                state_label: ATTIVO
              armed_home:
                button_label: IN CASA
                state_label: ATTIVO IN CASA
              disarmed:
                hide: false
                button_label: DISATTIVA
                state_label: DISATTIVATO
            show_messages: true
            show_ready_indicator: true
            show_bypassed_sensors: true
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Temperature
            icon: mdi:window-shutter
            hash: '#temperature_medie'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: vertical-stack
            cards:
              - type: custom:mini-graph-card
                height: 30
                line_width: 2
                font_size: 70
                hours_to_show: 4
                points_per_hour: 1
                show:
                  extrema: true
                  fill: true
                style: |
                  ha-card { 
                    --ha-card-background: "rgba(0, 0, 0, 0.0)";
                    --ha-card-box-shadow: 'none';
                    border-radius: 5px;
                  }
                  .info.flex {
                    font-size: 12px !important;
                  }
                entities:
                  - sensor.temperatura_esterna
                name: Temperatura Esterna
                color_thresholds:
                  - value: 30
                    color: red
                  - value: 25
                    color: orange
                  - value: 24
                    color: CHARTREUSE
                  - value: 28
                    color: LIMEGREEN
                  - value: 15
                    color: LAWNGREEN
                  - value: 10
                    color: lime
                  - value: 5
                    color: blue
                  - value: 0
                    color: DODGERBLUE
              - type: custom:mini-graph-card
                height: 30
                line_width: 2
                font_size: 70
                hours_to_show: 4
                points_per_hour: 1
                show:
                  extrema: true
                  fill: true
                style: |
                  ha-card { 
                    --ha-card-background: "rgba(0, 0, 0, 0.0)";
                    --ha-card-box-shadow: 'none';
                    border-radius: 5px;
                  }
                  .info.flex {
                    font-size: 12px !important;
                  }
                entities:
                  - sensor.temperatura_media_interna
                name: Temperatura Interna
                color_thresholds:
                  - value: 30
                    color: red
                  - value: 25
                    color: orange
                  - value: 24
                    color: CHARTREUSE
                  - value: 21
                    color: LIMEGREEN
                  - value: 19
                    color: LAWNGREEN
                  - value: 15
                    color: lime
                  - value: 5
                    color: blue
                  - value: 0
                    color: DODGERBLUE
              - type: custom:mini-graph-card
                height: 30
                line_width: 2
                font_size: 70
                hours_to_show: 4
                points_per_hour: 1
                show:
                  extrema: true
                  fill: true
                style: |
                  ha-card { 
                    --ha-card-background: "rgba(0, 0, 0, 0.0)";
                    --ha-card-box-shadow: 'none';
                    border-radius: 5px;
                  }
                  .info.flex {
                    font-size: 18px !important;
                  }
                entities:
                  - sensor.garage_garage_bmp180_pressure
                name: Pressione
              - type: custom:mini-graph-card
                height: 30
                line_width: 2
                font_size: 70
                hours_to_show: 4
                points_per_hour: 1
                show:
                  extrema: true
                  fill: true
                style: |
                  ha-card { 
                    --ha-card-background: "rgba(0, 0, 0, 0.0)";
                    --ha-card-box-shadow: 'none';
                    border-radius: 5px;
                  }
                  .info.flex {
                    font-size: 18px !important;
                  }
                entities:
                  - sensor.indicatore_muffa
                name: Indicatore Muffa
                color_thresholds:
                  - value: 50
                    color: red
                  - value: 60
                    color: orange
                  - value: 70
                    color: CHARTREUSE
                  - value: 75
                    color: LIMEGREEN
                  - value: 80
                    color: LAWNGREEN
                  - value: 90
                    color: lime
                  - value: 101
                    color: blue
                  - value: 102
                    color: DODGERBLUE
                  - value: 103
                    color: white
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Riscaldamento
            icon: mdi:window-shutter
            hash: '#riscaldamento'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: vertical-stack
            cards:
              - type: thermostat
                entity: climate.riscaldamento
                name: Caldaia
                features:
                  - type: climate-hvac-modes
                    hvac_modes:
                      - 'off'
                      - heat
                  - style: icons
                    preset_modes:
                      - away
                      - comfort
                      - eco
                      - ideale
                    type: climate-preset-modes
              - type: custom:mini-graph-card
                height: 30
                line_width: 2
                font_size: 70
                hours_to_show: 24
                points_per_hour: 1
                show:
                  extrema: true
                  fill: true
                style: |
                  ha-card { 
                    --ha-card-background: "rgba(0, 0, 0, 0.0)";
                    --ha-card-box-shadow: 'none';
                    border-radius: 5px;
                  }
                  .info.flex {
                    font-size: 18px !important;
                  }
                entities:
                  - sensor.temperatura_scambiatore
                name: Scambiatore
                color_thresholds:
                  - value: 100
                    color: red
                  - value: 90
                    color: orange
                  - value: 80
                    color: CHARTREUSE
                  - value: 75
                    color: LIMEGREEN
                  - value: 70
                    color: LAWNGREEN
                  - value: 60
                    color: lime
                  - value: 50
                    color: blue
                  - value: 40
                    color: DODGERBLUE
                  - value: 30
                    color: white
              - type: custom:mini-graph-card
                height: 30
                line_width: 2
                font_size: 70
                hours_to_show: 24
                points_per_hour: 1
                show:
                  extrema: true
                  fill: true
                style: |
                  ha-card { 
                    --ha-card-background: "rgba(0, 0, 0, 0.0)";
                    --ha-card-box-shadow: 'none';
                    border-radius: 5px;
                  }
                  .info.flex {
                    font-size: 18px !important;
                  }
                entities:
                  - sensor.gas_m3h
                name: Consumo Istantaneo
                color_thresholds:
                  - value: 100
                    color: red
                  - value: 90
                    color: orange
                  - value: 80
                    color: CHARTREUSE
                  - value: 75
                    color: LIMEGREEN
                  - value: 70
                    color: LAWNGREEN
                  - value: 60
                    color: lime
                  - value: 50
                    color: blue
                  - value: 40
                    color: DODGERBLUE
                  - value: 30
                    color: white
              - type: custom:mini-graph-card
                height: 30
                line_width: 2
                font_size: 70
                hours_to_show: 24
                points_per_hour: 1
                show:
                  extrema: true
                  fill: true
                style: |
                  ha-card { 
                    --ha-card-background: "rgba(0, 0, 0, 0.0)";
                    --ha-card-box-shadow: 'none';
                    border-radius: 5px;
                  }
                  .info.flex {
                    font-size: 18px !important;
                  }
                entities:
                  - sensor.gas
                name: Consumo
                color_thresholds:
                  - value: 100
                    color: red
                  - value: 90
                    color: orange
                  - value: 80
                    color: CHARTREUSE
                  - value: 75
                    color: LIMEGREEN
                  - value: 70
                    color: LAWNGREEN
                  - value: 60
                    color: lime
                  - value: 50
                    color: blue
                  - value: 40
                    color: DODGERBLUE
                  - value: 30
                    color: white
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Panasonic A/C
            icon: mdi:window-shutter
            hash: '#climatizzatore'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 6
          - type: thermostat
            entity: climate.raffreddamento
            name: ' '
            features:
              - type: climate-hvac-modes
                hvac_modes:
                  - heat
                  - cool
                  - dry
                  - auto
                  - 'off'
              - style: icons
                type: climate-preset-modes
            theme: yourname
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            icon: mdi:door
            state: null
            hash: '#gang'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--yellow)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important;}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            name: Esterno
          - type: custom:gap-card
            height: 12
          - type: custom:button-card
            template: room_conditions
            variables:
              background: var(--popupBG)
              entity: sensor.temperatura_esterna
              temp: >
                [[[ return
                Math.round((states['sensor.temperatura_esterna'].state) * 10)/10
                + '°' + '<span style="font-size:0.3em">' +
                Math.round((states['sensor.umidita_esterna'].state) * 10)/10 +
                '%']]]
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: Luci
                styles:
                  card:
                    - background: none
                    - padding: 12px 0 15px 0
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.led_cameretta
                  - name: led cameretta
                  - icon: mdi:ceiling-light
                  - background: var(--popupBG)
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.led_cameretta
                  - name: led cameretta
                  - icon: mdi:coach-lamp
                  - background: var(--popupBG)
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: Info
                styles:
                  card:
                    - background: none
                    - padding: 0 0 15px 0
                    - overflow: visible
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
              - square: false
                type: grid
                columns: 2
                cards:
                  - type: custom:button-card
                    template: sensor_big
                    entity: lock.pedonale
                    variables:
                      name: Pedonale
                      background: var(--popupBG)
                      icon: mdi:fridge
                    state:
                      - value: locked
                        label: Bloccato
                        icon: mdi:door-closed
                        styles:
                          card:
                            - background: var(--popupBG)
                      - value: unlocked
                        label: Sbloccato
                        icon: mdi:door-open
                        styles:
                          card:
                            - background: var(--active-big)
                  - type: custom:button-card
                    template: sensor_big
                    entity: light.led_cameretta
                    variables:
                      name: Led
                      icon: mdi:led-strip-variant
                      background: var(--popupBG)
                    state:
                      - value: 'on'
                        label: Acceso
                        styles:
                          card:
                            - background: var(--active-big)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                          icon:
                            - color: var(--black)
                          img_cell:
                            - background: rgba(var(--highlight_active))
                      - value: 'off'
                        label: Spento
                        styles:
                          card:
                            - background: var(--red)
                      - value: unavailable
                        label: Non disponibile
                        styles:
                          card:
                            - background: var(--red)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Salone
            icon: mdi:sofa
            state: null
            hash: '#stue_nede'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--green)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 12
          - type: custom:button-card
            template: room_conditions
            variables:
              background: var(--popupBG)
              entity: sensor.temperatura_vindriktning
              temp: >
                [[[ return
                Math.round((states['sensor.temperatura_vindriktning'].state) *
                10)/10 + '°' + '<span style="font-size:0.3em">' +
                Math.round((states['sensor.umidita_vindriktning'].state) *
                10)/10 + '%']]]    
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: luce_soggiorno
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four five"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: two
                          variables:
                            name: Soggiorno
                            icon: mdi:lamp
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - luce_soggiorno: show
                                - Player_soggiorno: hide
                                - unità_del_soggiorno: hide
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: three
                          variables:
                            name: Info
                            icon: mdi:information
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - luce_soggiorno: hide
                                - Player_soggiorno: hide
                                - unità_del_soggiorno: show
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: four
                          variables:
                            name: Media
                            icon: mdi:television-classic
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - luce_soggiorno: hide
                                - Player_soggiorno: show
                                - unità_del_soggiorno: hide
                    - type: custom:gap-card
                      height: 6
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.dreamview_t1
                        - name: Ambilight
                        - icon: mdi:mirror-rectangle
                        - background: var(--popupBG)
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.controller_rgb_w_ir_b67693
                        - name: Led Controsoffitto
                        - icon: mdi:led-strip-variant
                        - background: var(--popupBG)
                    - square: false
                      type: grid
                      cards:
                        - type: custom:decluttering-card
                          template: light_toggle
                          variables:
                            - entity: media_player.sony_bravia_tv
                            - name: Tv Sony
                            - icon: mdi:television
                            - background: var(--popupBG)
                        - type: custom:decluttering-card
                          template: light_toggle
                          variables:
                            - entity: media_player.appletv
                            - name: Apple TV
                            - icon: mdi:apple
                            - background: var(--popupBG)
                      columns: 2
                    - type: custom:decluttering-card
                      template: light_toggle
                      variables:
                        - entity: switch.salone_1
                        - name: Salone
                        - icon: mdi:ceiling-light
                        - background: var(--popupBG)
                    - type: vertical-stack
                      cards:
                        - type: custom:button-card
                          name: Scene
                          styles:
                            card:
                              - background: none
                              - padding: 12px 0 15px 0
                              - overflow: visible
                              - '--mdc-ripple-press-opacity': 0
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - justify-self: start
                              - align-self: center
                        - type: custom:layout-card
                          layout_type: custom:grid-layout
                          layout:
                            grid-template-columns: max-content max-content max-content
                            grid-template-rows: min-content
                            grid-template-areas: |
                              "one two three"  
                          cards:
                            - type: custom:button-card
                              tap_action:
                                action: call-service
                                service: scene.turn_on
                                target:
                                  entity_id: scene.film
                                data:
                                  transition: 2
                              view_layout:
                                grid-area: one
                              template: chips_big
                              variables:
                                name: Film On
                                icon: mdi:movie-open
                            - type: custom:button-card
                              tap_action:
                                action: call-service
                                service: scene.turn_on
                                target:
                                  entity_id: scene.film_off
                                data:
                                  transition: 2
                              template: chips_big
                              view_layout:
                                grid-area: two
                              variables:
                                name: Film Off
                                icon: mdi:power
                            - type: custom:button-card
                              tap_action:
                                action: call-service
                                service: scene.turn_on
                                target:
                                  entity_id: scene.spegni_tutto
                                data:
                                  transition: 2
                              template: chips_big
                              view_layout:
                                grid-area: three
                              variables:
                                name: Spegni Tutto
                                icon: mdi:sleep
              - type: custom:local-conditional-card
                id: unità_del_soggiorno
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four five"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: two
                          variables:
                            name: Soggiorno
                            icon: mdi:lamp
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - luce_soggiorno: show
                                - Player_soggiorno: hide
                                - unità_del_soggiorno: hide
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: three
                          variables:
                            name: Info
                            icon: mdi:information
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - luce_soggiorno: hide
                                - Player_soggiorno: hide
                                - unità_del_soggiorno: show
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: four
                          variables:
                            name: Media
                            icon: mdi:television-classic
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - luce_soggiorno: hide
                                - Player_soggiorno: show
                                - unità_del_soggiorno: hide
                    - type: custom:gap-card
                      height: 6
                    - square: false
                      type: grid
                      cards:
                        - type: custom:button-card
                          template: sensor_big
                          variables:
                            name: Balkongdør
                            icon: mdi:door
                            background: var(--popupBG)
                          entity: binary_sensor.contact_door_balcony_contact
                          state:
                            - value: 'off'
                              label: Lukket
                              icon: mdi:door-closed
                            - value: 'on'
                              label: Åpen
                              icon: mdi:door-open
                              styles:
                                card:
                                  - background: var(--red)
                      columns: 2
              - type: custom:local-conditional-card
                id: Player_soggiorno
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr max-content max-content max-content 1fr
                        grid-template-rows: min-content
                        grid-template-areas: |
                          "one two three four five"  
                      cards:
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: two
                          variables:
                            name: Soggiorno
                            icon: mdi:lamp
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - luce_soggiorno: show
                                - Player_soggiorno: hide
                                - unità_del_soggiorno: hide
                        - type: custom:button-card
                          template: chips_medium
                          view_layout:
                            grid-area: three
                          variables:
                            name: Info
                            icon: mdi:information
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - luce_soggiorno: hide
                                - Player_soggiorno: hide
                                - unità_del_soggiorno: show
                        - type: custom:button-card
                          template: chips_medium_active
                          view_layout:
                            grid-area: four
                          variables:
                            name: Media
                            icon: mdi:television-classic
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - luce_soggiorno: hide
                                - Player_soggiorno: show
                                - unità_del_soggiorno: hide
                    - type: custom:gap-card
                      height: 6
                    - type: custom:button-card
                      entity: media_player.samsung_tv2
                      name: TV
                      show_icon: true
                      icon: mdi:television-classic
                      tap_action:
                        action: toggle
                      state:
                        - value: 'on'
                          styles:
                            card:
                              - background: var(--active-big)
                          custom_fields:
                            state: >
                              [[[ return 'Ser Acceso ' +
                              states['media_player.samsung_tv2'].attributes.media_title]]]
                        - value: 'off'
                          custom_fields:
                            state: TV er av
                          styles:
                            card:
                              - background: var(--gray800)
                            img_cell:
                              - background: rgba(var(--highlight_active))
                            icon:
                              - color: var(--gray000)
                            name:
                              - color: var(--gray000)
                            custom_fields:
                              state:
                                - color: var(--gray000)
                      styles:
                        card:
                          - height: 66px
                          - border-radius: 75px
                          - padding: 4px 20px 4px 4px
                          - background: var(--popupBG)
                          - margin-bottom: 12px
                        grid:
                          - grid-template-columns: 76px 1fr min-content
                          - grid-template-areas: '"i state icon" "i n icon"'
                        icon:
                          - width: 30px
                          - color: var(--black)
                        img_cell:
                          - justify-self: start
                          - width: 30px
                          - height: 30px
                          - background: rgba(var(--highlight_active))
                          - padding: 14px
                          - border-radius: 50%
                        name:
                          - justify-self: start
                          - font-size: 14px
                          - color: var(--black)
                          - opacity: 0.7
                          - padding-bottom: 7px
                        custom_fields:
                          icon: null
                          state:
                            - justify-self: start
                            - font-size: 16px
                            - padding-top: 4px
                            - font-weight: 500
                            - color: var(--black)
                      custom_fields:
                        icon: |
                          [[[
                           var state = entity.state;
                           if(state == "on")
                            return `<ha-icon
                            icon="mdi:toggle-switch"
                            style="color: var(--black); width:50px; height:40px;">
                            </ha-icon>
                            `;
                           else 
                            return `<ha-icon
                            icon="mdi:toggle-switch-off"
                            style="color: var(--gray000); width:50px; height:40px;">
                            </ha-icon>
                            `;
                          ]]]
                    - type: custom:button-card
                      entity: input_boolean.disco_toggle
                      name: Disko
                      show_icon: true
                      icon: mdi:music
                      tap_action:
                        action: toggle
                      state:
                        - value: 'on'
                          custom_fields:
                            state: DiskoSoggiorno er Acceso
                          styles:
                            card:
                              - background: var(--active-big)
                            name:
                              - color: var(--black)
                            label:
                              - color: var(--black)
                            custom_fields:
                              state:
                                - color: var(--black)
                            icon:
                              - color: var(--black)
                            img_cell:
                              - background: rgba(var(--highlight_active))
                        - value: 'off'
                          custom_fields:
                            state: Disko er av
                          styles:
                            card:
                              - background: var(--gray800)
                            img_cell:
                              - background: rgba(var(--highlight_active))
                            icon:
                              - color: var(--gray000)
                            name:
                              - color: var(--gray000)
                            custom_fields:
                              state:
                                - color: var(--gray000)
                      styles:
                        card:
                          - height: 66px
                          - border-radius: 75px
                          - padding: 4px 20px 4px 4px
                          - background: var(--popupBG)
                          - margin-bottom: 12px
                        grid:
                          - grid-template-columns: 76px 1fr min-content
                          - grid-template-areas: '"i state icon" "i n icon"'
                        icon:
                          - width: 30px
                          - color: var(--gray800)
                        img_cell:
                          - justify-self: start
                          - width: 30px
                          - height: 30px
                          - background: rgba(var(--highlight))
                          - padding: 14px
                          - border-radius: 50%
                        name:
                          - justify-self: start
                          - font-size: 14px
                          - color: var(--gray800)
                          - opacity: 0.7
                          - padding-bottom: 7px
                        custom_fields:
                          icon: null
                          state:
                            - justify-self: start
                            - font-size: 16px
                            - padding-top: 4px
                            - font-weight: 500
                            - color: var(--gray800)
                      custom_fields:
                        icon: |
                          [[[
                           var state = entity.state;
                           if(state == "on")
                            return `<ha-icon
                            icon="mdi:toggle-switch"
                            style="color: var(--black); width:50px; height:40px;">
                            </ha-icon>
                            `;
                           else 
                            return `<ha-icon
                            icon="mdi:toggle-switch-off"
                            style="color: var(--gray000); width:50px; height:40px;">
                            </ha-icon>
                            `;
                          ]]]
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: input_boolean.disco_toggle
                          state: 'on'
                      card:
                        square: true
                        type: grid
                        cards:
                          - type: custom:button-card
                            name: 1
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_soundreactive_preset
                            tap_action:
                              action: call-service
                              service: select.select_option
                              target:
                                entity_id: select.wled_soundreactive_preset
                              data:
                                option: Nice
                            state:
                              - value: Nice
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray800)
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--gray000)
                                - padding: 2px 0px
                          - type: custom:button-card
                            name: 2
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_soundreactive_preset
                            tap_action:
                              action: call-service
                              service: select.select_option
                              target:
                                entity_id: select.wled_soundreactive_preset
                              data:
                                option: Nice2
                            state:
                              - value: Nice2
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray800)
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--gray000)
                                - padding: 2px 0px
                          - type: custom:button-card
                            name: 3
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_soundreactive_preset
                            tap_action:
                              action: call-service
                              service: select.select_option
                              target:
                                entity_id: select.wled_soundreactive_preset
                              data:
                                option: Nice3
                            state:
                              - value: Nice3
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray800)
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--gray000)
                                - padding: 2px 0px
                          - type: custom:button-card
                            name: 4
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_soundreactive_preset
                            tap_action:
                              action: call-service
                              service: select.select_option
                              target:
                                entity_id: select.wled_soundreactive_preset
                              data:
                                option: Nice4
                            state:
                              - value: Nice4
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray800)
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--gray000)
                                - padding: 2px 0px
                          - type: custom:button-card
                            name: 5
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_soundreactive_preset
                            tap_action:
                              action: call-service
                              service: select.select_option
                              target:
                                entity_id: select.wled_soundreactive_preset
                              data:
                                option: Nice5
                            state:
                              - value: Nice5
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray800)
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--gray000)
                                - padding: 2px 0px
                        columns: 5
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Posta
            icon: mdi:mail
            state: null
            hash: '#posta'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--green)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
            tap_action:
              action: more-info
            entity: binary_sensor.posta
            button_type: state
          - type: custom:gap-card
            height: 10
          - type: entities
            show_header_toggle: 'off'
            style: |
              .card-header {
                padding: 0px 0px 0px 0px !important;
              }
            entities:
              - type: custom:hui-element
                card_type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: picture-entity
                        style: |
                          ha-card { 
                              --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                              --ha-card-background: "rgba(0, 0, 0, 0.0)";
                              --ha-card-box-shadow: 'none';
                        aspect_ratio: ''
                        entity: binary_sensor.posta
                        show_name: false
                        show_state: false
                        state_image:
                          'on': https://cdn-icons-gif.flaticon.com/8717/8717939.gif
                          'off': https://cdn-icons-gif.flaticon.com/8717/8717907.gif
                      - type: vertical-stack
                        cards:
                          - type: custom:button-card
                            layout: icon_name_state2nd
                            entity: binary_sensor.posta
                            name: Cassetta Posta
                            show_icon: true
                            show_state: true
                            icon: mdi:email
                            state_color: true
                            styles:
                              grid:
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              name:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            layout: icon_name_state2nd
                            entity: counter.conta_posta
                            name: Posta Oggi
                            show_icon: true
                            show_state: true
                            icon: mdi:counter
                            tap_action:
                              action: none
                            styles:
                              grid:
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              name:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            layout: icon_name_state2nd
                            tap_action:
                              action: call-service
                              service: script.turn_on
                              service_data:
                                entity_id: script.reset_posta
                            name: Reset Posta
                            show_icon: true
                            show_state: true
                            icon: mdi:restart
                            styles:
                              grid:
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                              name:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                  - type: custom:paper-buttons-row
                    buttons:
                      - icon: hass:cog-outline
                        state: '{{ states(''group.notifiche_posta'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Impostazioni
                              style:
                                $: |
                                  .mdc-dialog 
                                  .mdc-dialog__container 
                                  .mdc-dialog__surface {
                                    border-radius: 15px;
                                  }
                              auto_close: false
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.time
                                    name: Orologio
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: input_datetime.orario_fine_notifiche_posta
                                    icon: mdi:timer
                                    name: Notifiche
                                    state_header: FINE
                                    entities:
                                      - entity: >-
                                          input_datetime.orario_inizio_notifiche_posta
                                        name: INIZIO
                                  - type: divider
                                  - type: button
                                    action_name: RESET
                                    name: Reset Counter
                                    icon: mdi:restart
                                    tap_action:
                                      action: call-service
                                      service: counter.reset
                                      service_data: {}
                                      target:
                                        entity_id: counter.conta_posta
                                  - type: divider
                                  - entity: input_boolean.notify_push_posta
                                    type: custom:multiple-entity-row
                                    name: Notifiche
                                    icon: mdi:cellphone-message
                                    state_header: PUSH
                                    toggle: true
                                    entities:
                                      - entity: input_boolean.notify_google_posta
                                        name: GOOGLE
                                        toggle: true
                                      - entity: input_boolean.notify_alexa_posta
                                        name: ALEXA
                                        toggle: true
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                      - icon: hass:bell
                        state: '{{ states(''input_boolean.aggiornamento_pkg_posta'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Update
                              style:
                                $: |
                                  .mdc-dialog 
                                  .mdc-dialog__container 
                                  .mdc-dialog__surface {
                                    border-radius: 15px;
                                  }
                              auto_close: false
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: automation.avviso_arrivo_posta
                                    name: Notifica Posta
                                    icon: mdi:bell-ring
                                    state_color: true
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: >-
                                      sensor.ultima_versione_centro_controllo_posta
                                    state_color: true
                                    icon: mdi:google-circles-extended
                                    toggle: false
                                    name: Versione
                                    state_header: DISPONIBILE
                                    entities:
                                      - entity: sensor.sensore_centro_controllo_posta
                                        name: INSTALLATA
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Frigorifero
            icon: mdi:fridge
            state: null
            hash: '#frigorifero'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--green)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 2
          - type: entities
            entities:
              - type: section
                label: Frigorifero
              - type: custom:hui-element
                card_type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: picture-entity
                        aspect_ratio: ''
                        entity: binary_sensor.ac_elettrodomestici_3
                        show_name: false
                        show_state: false
                        style: |
                          ha-card {
                              --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                              --ha-card-background: "rgba(0, 0, 0, 0.0)";
                              --ha-card-box-shadow: 'none';
                              --ha-card-border-width: 0px;
                                  }
                        state_image:
                          'on': /local/foto-pkg/frigorifero.png
                          'off': /local/foto-pkg/frigorifero.png
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Ultimi 7 Giorni
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: vertical-stack
                                cards:
                                  - type: entities
                                    entities:
                                      - style:
                                          background: '#62717b'
                                          height: 1px
                                          margin-left: auto
                                          margin-right: auto
                                        type: divider
                                      - entity: >-
                                          input_number.lunedi_elettrodomestici_costo_3
                                        name: Lunedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.lunedi_elettrodomestici_cicli_3
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.lunedi_elettrodomestici_tempo_3
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.lunedi_elettrodomestici_consumo_3
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.martedi_elettrodomestici_costo_3
                                        name: Martedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.martedi_elettrodomestici_cicli_3
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.martedi_elettrodomestici_tempo_3
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.martedi_elettrodomestici_consumo_3
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.mercoledi_elettrodomestici_costo_3
                                        name: Mercoledì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.mercoledi_elettrodomestici_cicli_3
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.mercoledi_elettrodomestici_tempo_3
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.mercoledi_elettrodomestici_consumo_3
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.giovedi_elettrodomestici_costo_3
                                        name: Giovedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.giovedi_elettrodomestici_cicli_3
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.giovedi_elettrodomestici_tempo_3
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.giovedi_elettrodomestici_consumo_3
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.venerdi_elettrodomestici_costo_3
                                        name: Venerdì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.venerdi_elettrodomestici_cicli_3
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.venerdi_elettrodomestici_tempo_3
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.venerdi_elettrodomestici_consumo_3
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.sabato_elettrodomestici_costo_3
                                        name: Sabato
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.sabato_elettrodomestici_cicli_3
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.sabato_elettrodomestici_tempo_3
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.sabato_elettrodomestici_consumo_3
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.domenica_elettrodomestici_costo_3
                                        name: Domenica
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.domenica_elettrodomestici_cicli_3
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.domenica_elettrodomestici_tempo_3
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.domenica_elettrodomestici_consumo_3
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - style:
                                          background: '#62717b'
                                          height: 1px
                                          margin-left: auto
                                          margin-right: auto
                                        type: divider
                      - type: vertical-stack
                        cards:
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_3
                            icon: mdi:power
                            state_color: false
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_3'].attributes.terminato;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Stato':
                              'Ultimo Avvio'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_3
                            state_color: false
                            icon: mdi:history
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_3'].attributes.tempo_ciclo_elettrodomestici_3;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Durata Ciclo':
                              'Durata Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_3
                            state_color: false
                            icon: mdi:counter
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_3'].attributes.consumo_ciclo_elettrodomestici_3;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Consumo ON':
                              'Consumo Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_3
                            state_color: false
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_3'].attributes.costo_ciclo_elettrodomestici_3+('
                              €'); ]]]
                            icon: mdi:currency-eur
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Costo
                              Attuale': 'Costo Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                  - type: custom:bar-card
                    show_icon: true
                    align: split
                    columns: 1
                    max: 150
                    positions:
                      icon: inside
                      indicator: inside
                      name: inside
                      value: inside
                    unit_of_measurement: W
                    severity:
                      - color: green
                        from: 0
                        to: 7
                      - color: Orange
                        from: 40
                        to: 57
                      - color: red
                        from: 58
                        to: 100
                    style: |
                      ha-card {
                        --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                        --ha-card-background: "rgba(0, 0, 0, 0.0)";
                        --paper-item-icon-color: 'var(--text-primary-color';
                        --ha-card-box-shadow: 'none';
                      }
                    entity: sensor.potenza_elettrodomestici_w_3
                    name: Consumo Istantaneo
                    entity_row: true
                  - type: entity
                    entity: binary_sensor.porta_frigorifero_zbeacon_ds01_apertura
                  - type: custom:paper-buttons-row
                    buttons:
                      - icon: hass:cog-outline
                        state: '{{ states(''group.notifiche_elettrodomestici_3'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Impostazioni
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.time
                                    name: Orologio
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: >-
                                      input_datetime.orario_fine_notifiche_elettrodomestici_3
                                    icon: mdi:timer
                                    name: Fascia Oraria Notifiche
                                    state_header: FINE
                                    entities:
                                      - entity: >-
                                          input_datetime.orario_inizio_notifiche_elettrodomestici_3
                                        name: INIZIO
                                  - entity: >-
                                      input_boolean.notify_push_elettrodomestici_3
                                    type: custom:multiple-entity-row
                                    name: Notifiche
                                    icon: mdi:cellphone-message
                                    state_header: PUSH
                                    toggle: true
                                    entities:
                                      - entity: >-
                                          input_boolean.notify_google_elettrodomestici_3
                                        name: GOOGLE
                                        toggle: true
                                      - entity: >-
                                          input_boolean.notify_alexa_elettrodomestici_3
                                        name: ALEXA
                                        toggle: true
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: binary_sensor.ac_elettrodomestici_3
                                    icon: mdi:flash
                                    name: Energia
                                    state_header: STATO
                                    state_color: false
                                    entities:
                                      - entity: input_boolean.switch_elettrodomestici_3
                                        name: SWITCH
                                        toggle: true
                                      - entity: >-
                                          input_number.soglia_lavoro_elettrodomestici_w_3
                                        name: SOGLIA
                                      - entity: >-
                                          input_number.tempo_innesco_elettrodomestici_m_3
                                        name: DELAY OFF
                                      - entity: >-
                                          input_number.avvio_ritardato_conteggio_elettrodomestici_s_3
                                        name: DELAY ON
                                  - type: divider
                                  - entity: >-
                                      automation.elettrodomestici_off_automatico_3
                                    type: custom:multiple-entity-row
                                    name: Switch Auto OFF
                                    state_header: OFF/ON
                                    toggle: true
                                    icon: mdi:toggle-switch
                                    entities:
                                      - entity: input_datetime.elettrodomestici_off_3
                                        name: SPENGIMENTO
                                  - type: divider
                                  - entity: input_text.messaggio_elettrodomestico_3
                                    type: custom:multiple-entity-row
                                    name: Nome
                                    state_header: MESSAGGIO
                                    toggle: false
                                    icon: mdi:rename
                                    entities:
                                      - entity: input_text.nome_elettrodomestico_3
                                        name: ELETTRODOMESTICO
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: >-
                                      input_text.data_reset_sensori_elettrodomestici_3
                                    name: Reset Contatori
                                    icon: mdi:restart
                                    state_header: ULTIMO RESET
                                    state_color: true
                                    entities:
                                      - type: button
                                        name: ESEGUI
                                        icon: mdi:button-pointer
                                        tap_action:
                                          action: call-service
                                          service: script.reset_sensori_elettrodomestici_3
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: input_number.costo_energia
                                    name: Costo Energia
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                      - icon: hass:chart-line
                        state: '{{ states(''xxx'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Statistiche
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.time_on_elettrodomestici_3
                                    attribute: costo_ciclo_elettrodomestici_3
                                    type: custom:multiple-entity-row
                                    icon: mdi:power-plug
                                    unit: €
                                    name: Elettrodomestico
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.time_on_elettrodomestici_3
                                        attribute: terminato
                                        name: STATO
                                      - type: attribute
                                        entity: sensor.time_on_elettrodomestici_3
                                        name: TEMPO
                                        attribute: tempo_ciclo_elettrodomestici_3
                                      - entity: sensor.time_on_elettrodomestici_3
                                        attribute: consumo_ciclo_elettrodomestici_3
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_3
                                    attribute: costo_consumo_ieri_elettrodomestici_3
                                    unit: €
                                    name: Ieri
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_oggi_elettrodomestici_3
                                        name: CICLI
                                        attribute: last_period
                                      - entity: sensor.time_on_elettrodomestici_3
                                        attribute: Ieri
                                        name: TEMPO
                                      - entity: sensor.energy_oggi_elettrodomestici_3
                                        attribute: last_period
                                        unit: kWh
                                        name: CONSUMO
                                  - type: divider
                                  - entity: sensor.time_on_elettrodomestici_3
                                    type: custom:multiple-entity-row
                                    attribute: >-
                                      costo_consumo_giornaliero_elettrodomestici_3
                                    unit: €
                                    name: Oggi
                                    state_header: EURO
                                    icon: mdi:calendar-blank
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_oggi_elettrodomestici_3
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_3
                                        attribute: Oggi
                                        name: TEMPO
                                      - entity: sensor.energy_oggi_elettrodomestici_3
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_3
                                    attribute: costo_consumo_mensile_elettrodomestici_3
                                    unit: €
                                    icon: mdi:calendar-today
                                    name: Mese
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_mese_elettrodomestici_3
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_3
                                        name: TEMPO
                                        attribute: Mese
                                      - entity: sensor.energy_mese_elettrodomestici_3
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_3
                                    attribute: costo_consumo_annuale_elettrodomestici_3
                                    unit: €
                                    icon: mdi:calendar-month
                                    name: Anno
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_anno_elettrodomestici_3
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_3
                                        name: TEMPO
                                        attribute: Anno
                                      - entity: sensor.energy_anno_elettrodomestici_3
                                        name: CONSUMO
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                      - icon: hass:bell
                        state: >-
                          {{
                          states('input_boolean.aggiornamento_pkg_elettrodomestici_3')
                          }}
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Update
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: >-
                                      input_boolean.aggiornamento_pkg_elettrodomestici_3
                                    name: Notifica Push Update
                                    icon: mdi:bell-ring
                                    state_color: true
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: >-
                                      sensor.ultima_versione_centro_controllo_elettrodomestici_3
                                    state_color: true
                                    icon: mdi:google-circles-extended
                                    toggle: false
                                    name: Versione
                                    state_header: DISPONIBILE
                                    entities:
                                      - entity: >-
                                          sensor.versione_installata_centro_controllo_elettrodomestici_3
                                        name: INSTALLATA
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
            show_header_toggle: false
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Lavatrice
            icon: mdi:washing-machine
            state: null
            hash: '#lavatrice'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--green)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 2
          - type: entities
            style: |
              .card-header {
                padding: 0px 0px 0px 0px !important;
              }
            show_header_toggle: 'off'
            entities:
              - type: section
                label: Lavatrice CANDY Rapidò
              - type: custom:hui-element
                card_type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: picture-entity
                        aspect_ratio: ''
                        entity: binary_sensor.ac_elettrodomestici_5
                        show_name: false
                        show_state: false
                        style: |
                          ha-card {
                              --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                              --ha-card-background: "rgba(0, 0, 0, 0.0)";
                              --ha-card-box-shadow: 'none';
                              --ha-card-border-width: 0px;
                                  }
                        state_image:
                          'on': /local/foto-pkg/lavatrice_on.gif
                          'off': /local/foto-pkg/lavatrice_off.png
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Ultimi 7 Giorni
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: vertical-stack
                                cards:
                                  - type: entities
                                    entities:
                                      - style:
                                          background: '#62717b'
                                          height: 1px
                                          margin-left: auto
                                          margin-right: auto
                                        type: divider
                                      - entity: >-
                                          input_number.lunedi_elettrodomestici_costo_5
                                        name: Lunedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.lunedi_elettrodomestici_cicli_5
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.lunedi_elettrodomestici_tempo_5
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.lunedi_elettrodomestici_consumo_5
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.martedi_elettrodomestici_costo_5
                                        name: Martedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.martedi_elettrodomestici_cicli_5
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.martedi_elettrodomestici_tempo_5
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.martedi_elettrodomestici_consumo_5
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.mercoledi_elettrodomestici_costo_5
                                        name: Mercoledì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.mercoledi_elettrodomestici_cicli_5
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.mercoledi_elettrodomestici_tempo_5
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.mercoledi_elettrodomestici_consumo_5
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.giovedi_elettrodomestici_costo_5
                                        name: Giovedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.giovedi_elettrodomestici_cicli_5
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.giovedi_elettrodomestici_tempo_5
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.giovedi_elettrodomestici_consumo_5
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.venerdi_elettrodomestici_costo_5
                                        name: Venerdì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.venerdi_elettrodomestici_cicli_5
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.venerdi_elettrodomestici_tempo_5
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.venerdi_elettrodomestici_consumo_5
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.sabato_elettrodomestici_costo_5
                                        name: Sabato
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.sabato_elettrodomestici_cicli_5
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.sabato_elettrodomestici_tempo_5
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.sabato_elettrodomestici_consumo_5
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.domenica_elettrodomestici_costo_5
                                        name: Domenica
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.domenica_elettrodomestici_cicli_5
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.domenica_elettrodomestici_tempo_5
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.domenica_elettrodomestici_consumo_5
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - style:
                                          background: '#62717b'
                                          height: 1px
                                          margin-left: auto
                                          margin-right: auto
                                        type: divider
                      - type: vertical-stack
                        cards:
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_5
                            icon: mdi:power
                            state_color: false
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_5'].attributes.terminato;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Stato':
                              'Ultimo Avvio'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_5
                            state_color: false
                            icon: mdi:history
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_5'].attributes.tempo_ciclo_elettrodomestici_5;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Durata Ciclo':
                              'Durata Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_5
                            state_color: false
                            icon: mdi:counter
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_5'].attributes.consumo_ciclo_elettrodomestici_5;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Consumo ON':
                              'Consumo Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_5
                            state_color: false
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_5'].attributes.costo_ciclo_elettrodomestici_5+('
                              €'); ]]]
                            icon: mdi:currency-eur
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Costo
                              Attuale': 'Costo Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                  - type: custom:bar-card
                    show_icon: true
                    align: split
                    columns: 1
                    max: 800
                    positions:
                      icon: inside
                      indicator: inside
                      name: inside
                      value: inside
                    unit_of_measurement: W
                    severity:
                      - color: green
                        from: 0
                        to: 70
                      - color: Orange
                        from: 400
                        to: 579
                      - color: red
                        from: 580
                        to: 800
                    style: |
                      ha-card {
                        --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                        --ha-card-background: "rgba(0, 0, 0, 0.0)";
                        --paper-item-icon-color: 'var(--text-primary-color';
                        --ha-card-box-shadow: 'none';
                      }
                    entity: sensor.potenza_elettrodomestici_w_5
                    name: Consumo Istantaneo
                    entity_row: true
                  - type: custom:paper-buttons-row
                    buttons:
                      - icon: hass:cog-outline
                        state: '{{ states(''group.notifiche_elettrodomestici_5'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Impostazioni
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.time
                                    name: Orologio
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: >-
                                      input_datetime.orario_fine_notifiche_elettrodomestici_5
                                    icon: mdi:timer
                                    name: Fascia Oraria Notifiche
                                    state_header: FINE
                                    entities:
                                      - entity: >-
                                          input_datetime.orario_inizio_notifiche_elettrodomestici_5
                                        name: INIZIO
                                  - entity: >-
                                      input_boolean.notify_push_elettrodomestici_5
                                    type: custom:multiple-entity-row
                                    name: Notifiche
                                    icon: mdi:cellphone-message
                                    state_header: PUSH
                                    toggle: true
                                    entities:
                                      - entity: >-
                                          input_boolean.notify_google_elettrodomestici_5
                                        name: GOOGLE
                                        toggle: true
                                      - entity: >-
                                          input_boolean.notify_alexa_elettrodomestici_5
                                        name: ALEXA
                                        toggle: true
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: binary_sensor.ac_elettrodomestici_5
                                    icon: mdi:flash
                                    name: Energia
                                    state_header: STATO
                                    state_color: false
                                    entities:
                                      - entity: input_boolean.switch_elettrodomestici_5
                                        name: SWITCH
                                        toggle: true
                                      - entity: >-
                                          input_number.soglia_lavoro_elettrodomestici_w_5
                                        name: SOGLIA
                                      - entity: >-
                                          input_number.tempo_innesco_elettrodomestici_m_5
                                        name: DELAY OFF
                                      - entity: >-
                                          input_number.avvio_ritardato_conteggio_elettrodomestici_s_5
                                        name: DELAY ON
                                  - type: divider
                                  - entity: >-
                                      automation.elettrodomestici_off_automatico_5
                                    type: custom:multiple-entity-row
                                    name: Switch Auto OFF
                                    state_header: OFF/ON
                                    toggle: true
                                    icon: mdi:toggle-switch
                                    entities:
                                      - entity: input_datetime.elettrodomestici_off_5
                                        name: SPENGIMENTO
                                  - type: divider
                                  - entity: input_text.messaggio_elettrodomestico_5
                                    type: custom:multiple-entity-row
                                    name: Nome
                                    state_header: MESSAGGIO
                                    toggle: false
                                    icon: mdi:rename
                                    entities:
                                      - entity: input_text.nome_elettrodomestico_5
                                        name: ELETTRODOMESTICO
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: >-
                                      input_text.data_reset_sensori_elettrodomestici_5
                                    name: Reset Contatori
                                    icon: mdi:restart
                                    state_header: ULTIMO RESET
                                    state_color: true
                                    entities:
                                      - type: button
                                        name: ESEGUI
                                        icon: mdi:button-pointer
                                        tap_action:
                                          action: call-service
                                          service: script.reset_sensori_elettrodomestici_5
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: input_number.costo_energia
                                    name: Costo Energia
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                      - icon: hass:chart-line
                        state: '{{ states(''xxx'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Statistiche
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.time_on_elettrodomestici_5
                                    attribute: costo_ciclo_elettrodomestici_5
                                    type: custom:multiple-entity-row
                                    icon: mdi:power-plug
                                    unit: €
                                    name: Elettrodomestico
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.time_on_elettrodomestici_5
                                        attribute: terminato
                                        name: STATO
                                      - type: attribute
                                        entity: sensor.time_on_elettrodomestici_5
                                        name: TEMPO
                                        attribute: tempo_ciclo_elettrodomestici_5
                                      - entity: sensor.time_on_elettrodomestici_5
                                        attribute: consumo_ciclo_elettrodomestici_5
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_5
                                    attribute: costo_consumo_ieri_elettrodomestici_5
                                    unit: €
                                    name: Ieri
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_oggi_elettrodomestici_5
                                        name: CICLI
                                        attribute: last_period
                                      - entity: sensor.time_on_elettrodomestici_5
                                        attribute: Ieri
                                        name: TEMPO
                                      - entity: sensor.energy_oggi_elettrodomestici_5
                                        attribute: last_period
                                        unit: kWh
                                        name: CONSUMO
                                  - type: divider
                                  - entity: sensor.time_on_elettrodomestici_5
                                    type: custom:multiple-entity-row
                                    attribute: >-
                                      costo_consumo_giornaliero_elettrodomestici_5
                                    unit: €
                                    name: Oggi
                                    state_header: EURO
                                    icon: mdi:calendar-blank
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_oggi_elettrodomestici_5
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_5
                                        attribute: Oggi
                                        name: TEMPO
                                      - entity: sensor.energy_oggi_elettrodomestici_5
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_5
                                    attribute: costo_consumo_mensile_elettrodomestici_5
                                    unit: €
                                    icon: mdi:calendar-today
                                    name: Mese
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_mese_elettrodomestici_5
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_5
                                        name: TEMPO
                                        attribute: Mese
                                      - entity: sensor.energy_mese_elettrodomestici_5
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_5
                                    attribute: costo_consumo_annuale_elettrodomestici_5
                                    unit: €
                                    icon: mdi:calendar-month
                                    name: Anno
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_anno_elettrodomestici_5
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_5
                                        name: TEMPO
                                        attribute: Anno
                                      - entity: sensor.energy_anno_elettrodomestici_5
                                        name: CONSUMO
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Forno
            icon: mdi:microwave
            state: null
            hash: '#forno'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--green)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 2
          - type: entities
            style: |
              .card-header {
                padding: 0px 0px 0px 0px !important;
              }
            show_header_toggle: 'off'
            entities:
              - type: section
                label: Forno
              - type: custom:hui-element
                card_type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: picture-entity
                        aspect_ratio: ''
                        entity: binary_sensor.ac_elettrodomestici_4
                        show_name: false
                        show_state: false
                        style: |
                          ha-card {
                              --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                              --ha-card-background: "rgba(0, 0, 0, 0.0)";
                              --ha-card-box-shadow: 'none';
                              --ha-card-border-width: 0px;
                                  }
                        state_image:
                          'on': /local/foto-pkg/forno_on.gif
                          'off': /local/foto-pkg/forno_off.png
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Ultimi 7 Giorni
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: vertical-stack
                                cards:
                                  - type: entities
                                    entities:
                                      - style:
                                          background: '#62717b'
                                          height: 1px
                                          margin-left: auto
                                          margin-right: auto
                                        type: divider
                                      - entity: >-
                                          input_number.lunedi_elettrodomestici_costo_4
                                        name: Lunedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.lunedi_elettrodomestici_cicli_4
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.lunedi_elettrodomestici_tempo_4
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.lunedi_elettrodomestici_consumo_4
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.martedi_elettrodomestici_costo_4
                                        name: Martedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.martedi_elettrodomestici_cicli_4
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.martedi_elettrodomestici_tempo_4
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.martedi_elettrodomestici_consumo_4
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.mercoledi_elettrodomestici_costo_4
                                        name: Mercoledì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.mercoledi_elettrodomestici_cicli_4
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.mercoledi_elettrodomestici_tempo_4
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.mercoledi_elettrodomestici_consumo_4
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.giovedi_elettrodomestici_costo_4
                                        name: Giovedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.giovedi_elettrodomestici_cicli_4
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.giovedi_elettrodomestici_tempo_4
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.giovedi_elettrodomestici_consumo_4
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.venerdi_elettrodomestici_costo_4
                                        name: Venerdì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.venerdi_elettrodomestici_cicli_4
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.venerdi_elettrodomestici_tempo_4
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.venerdi_elettrodomestici_consumo_4
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.sabato_elettrodomestici_costo_4
                                        name: Sabato
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.sabato_elettrodomestici_cicli_4
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.sabato_elettrodomestici_tempo_4
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.sabato_elettrodomestici_consumo_4
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.domenica_elettrodomestici_costo_4
                                        name: Domenica
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.domenica_elettrodomestici_cicli_4
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.domenica_elettrodomestici_tempo_4
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.domenica_elettrodomestici_consumo_4
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - style:
                                          background: '#62717b'
                                          height: 1px
                                          margin-left: auto
                                          margin-right: auto
                                        type: divider
                      - type: vertical-stack
                        cards:
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_4
                            icon: mdi:power
                            state_color: false
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_4'].attributes.terminato;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Stato':
                              'Ultimo Avvio'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_4
                            state_color: false
                            icon: mdi:history
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_4'].attributes.tempo_ciclo_elettrodomestici_4;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Durata Ciclo':
                              'Durata Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_4
                            state_color: false
                            icon: mdi:counter
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_4'].attributes.consumo_ciclo_elettrodomestici_4;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Consumo ON':
                              'Consumo Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_4
                            state_color: false
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_4'].attributes.costo_ciclo_elettrodomestici_4+('
                              €'); ]]]
                            icon: mdi:currency-eur
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Costo
                              Attuale': 'Costo Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                  - type: custom:bar-card
                    show_icon: true
                    align: split
                    columns: 1
                    max: 3200
                    positions:
                      icon: inside
                      indicator: inside
                      name: inside
                      value: inside
                    unit_of_measurement: W
                    severity:
                      - color: green
                        from: 0
                        to: 100
                      - color: Orange
                        from: 101
                        to: 579
                      - color: red
                        from: 580
                        to: 3200
                    style: |
                      ha-card {
                        --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                        --ha-card-background: "rgba(0, 0, 0, 0.0)";
                        --paper-item-icon-color: 'var(--text-primary-color';
                        --ha-card-box-shadow: 'none';
                      }
                    entity: sensor.potenza_elettrodomestici_w_4
                    name: Consumo Istantaneo max 3000w
                    entity_row: true
                  - type: custom:paper-buttons-row
                    buttons:
                      - icon: hass:cog-outline
                        state: '{{ states(''group.notifiche_elettrodomestici_4'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Impostazioni
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.time
                                    name: Orologio
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: >-
                                      input_datetime.orario_fine_notifiche_elettrodomestici_4
                                    icon: mdi:timer
                                    name: Fascia Oraria Notifiche
                                    state_header: FINE
                                    entities:
                                      - entity: >-
                                          input_datetime.orario_inizio_notifiche_elettrodomestici_4
                                        name: INIZIO
                                  - entity: >-
                                      input_boolean.notify_push_elettrodomestici_4
                                    type: custom:multiple-entity-row
                                    name: Notifiche
                                    icon: mdi:cellphone-message
                                    state_header: PUSH
                                    toggle: true
                                    entities:
                                      - entity: >-
                                          input_boolean.notify_google_elettrodomestici_4
                                        name: GOOGLE
                                        toggle: true
                                      - entity: >-
                                          input_boolean.notify_alexa_elettrodomestici_4
                                        name: ALEXA
                                        toggle: true
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: binary_sensor.ac_elettrodomestici_4
                                    icon: mdi:flash
                                    name: Energia
                                    state_header: STATO
                                    state_color: false
                                    entities:
                                      - entity: input_boolean.switch_elettrodomestici_4
                                        name: SWITCH
                                        toggle: true
                                      - entity: >-
                                          input_number.soglia_lavoro_elettrodomestici_w_4
                                        name: SOGLIA
                                      - entity: >-
                                          input_number.tempo_innesco_elettrodomestici_m_4
                                        name: DELAY OFF
                                      - entity: >-
                                          input_number.avvio_ritardato_conteggio_elettrodomestici_s_4
                                        name: DELAY ON
                                  - type: divider
                                  - entity: >-
                                      automation.elettrodomestici_off_automatico_4
                                    type: custom:multiple-entity-row
                                    name: Switch Auto OFF
                                    state_header: OFF/ON
                                    toggle: true
                                    icon: mdi:toggle-switch
                                    entities:
                                      - entity: input_datetime.elettrodomestici_off_4
                                        name: SPENGIMENTO
                                  - type: divider
                                  - entity: input_text.messaggio_elettrodomestico_4
                                    type: custom:multiple-entity-row
                                    name: Nome
                                    state_header: MESSAGGIO
                                    toggle: false
                                    icon: mdi:rename
                                    entities:
                                      - entity: input_text.nome_elettrodomestico_4
                                        name: ELETTRODOMESTICO
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: >-
                                      input_text.data_reset_sensori_elettrodomestici_4
                                    name: Reset Contatori
                                    icon: mdi:restart
                                    state_header: ULTIMO RESET
                                    state_color: true
                                    entities:
                                      - type: button
                                        name: ESEGUI
                                        icon: mdi:button-pointer
                                        tap_action:
                                          action: call-service
                                          service: script.reset_sensori_elettrodomestici_4
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: input_number.costo_energia
                                    name: Costo Energia
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                      - icon: hass:chart-line
                        state: '{{ states(''xxx'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Statistiche
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.time_on_elettrodomestici_4
                                    attribute: costo_ciclo_elettrodomestici_4
                                    type: custom:multiple-entity-row
                                    icon: mdi:power-plug
                                    unit: €
                                    name: Elettrodomestico
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.time_on_elettrodomestici_4
                                        attribute: terminato
                                        name: STATO
                                      - type: attribute
                                        entity: sensor.time_on_elettrodomestici_4
                                        name: TEMPO
                                        attribute: tempo_ciclo_elettrodomestici_4
                                      - entity: sensor.time_on_elettrodomestici_4
                                        attribute: consumo_ciclo_elettrodomestici_4
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_4
                                    attribute: costo_consumo_ieri_elettrodomestici_4
                                    unit: €
                                    name: Ieri
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_oggi_elettrodomestici_4
                                        name: CICLI
                                        attribute: last_period
                                      - entity: sensor.time_on_elettrodomestici_4
                                        attribute: Ieri
                                        name: TEMPO
                                      - entity: sensor.energy_oggi_elettrodomestici_4
                                        attribute: last_period
                                        unit: kWh
                                        name: CONSUMO
                                  - type: divider
                                  - entity: sensor.time_on_elettrodomestici_4
                                    type: custom:multiple-entity-row
                                    attribute: >-
                                      costo_consumo_giornaliero_elettrodomestici_4
                                    unit: €
                                    name: Oggi
                                    state_header: EURO
                                    icon: mdi:calendar-blank
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_oggi_elettrodomestici_4
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_4
                                        attribute: Oggi
                                        name: TEMPO
                                      - entity: sensor.energy_oggi_elettrodomestici_4
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_4
                                    attribute: costo_consumo_mensile_elettrodomestici_4
                                    unit: €
                                    icon: mdi:calendar-today
                                    name: Mese
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_mese_elettrodomestici_4
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_4
                                        name: TEMPO
                                        attribute: Mese
                                      - entity: sensor.energy_mese_elettrodomestici_4
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_4
                                    attribute: costo_consumo_annuale_elettrodomestici_4
                                    unit: €
                                    icon: mdi:calendar-month
                                    name: Anno
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_anno_elettrodomestici_4
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_4
                                        name: TEMPO
                                        attribute: Anno
                                      - entity: sensor.energy_anno_elettrodomestici_4
                                        name: CONSUMO
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Asciugatrice
            icon: mdi:washing-machine
            state: null
            hash: '#asciugatrice'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--green)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 2
          - type: entities
            style: |
              .card-header {
                padding: 0px 0px 0px 0px !important;
              }
            show_header_toggle: 'off'
            entities:
              - type: section
                label: Asciugatrice
              - type: custom:hui-element
                card_type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: picture-entity
                        aspect_ratio: ''
                        entity: binary_sensor.ac_elettrodomestici_2
                        show_name: false
                        show_state: false
                        style: |
                          ha-card {
                              --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                              --ha-card-background: "rgba(0, 0, 0, 0.0)";
                              --ha-card-box-shadow: 'none';
                              --ha-card-border-width: 0px;
                                  }
                        state_image:
                          'on': /local/foto-pkg/asciugatrice_on.gif
                          'off': /local/foto-pkg/asciugatrice_off.png
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Ultimi 7 Giorni
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: vertical-stack
                                cards:
                                  - type: entities
                                    entities:
                                      - style:
                                          background: '#62717b'
                                          height: 1px
                                          margin-left: auto
                                          margin-right: auto
                                        type: divider
                                      - entity: >-
                                          input_number.lunedi_elettrodomestici_costo_2
                                        name: Lunedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.lunedi_elettrodomestici_cicli_2
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.lunedi_elettrodomestici_tempo_2
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.lunedi_elettrodomestici_consumo_2
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.martedi_elettrodomestici_costo_2
                                        name: Martedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.martedi_elettrodomestici_cicli_2
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.martedi_elettrodomestici_tempo_2
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.martedi_elettrodomestici_consumo_2
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.mercoledi_elettrodomestici_costo_2
                                        name: Mercoledì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.mercoledi_elettrodomestici_cicli_2
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.mercoledi_elettrodomestici_tempo_2
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.mercoledi_elettrodomestici_consumo_2
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.giovedi_elettrodomestici_costo_2
                                        name: Giovedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.giovedi_elettrodomestici_cicli_2
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.giovedi_elettrodomestici_tempo_2
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.giovedi_elettrodomestici_consumo_2
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.venerdi_elettrodomestici_costo_2
                                        name: Venerdì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.venerdi_elettrodomestici_cicli_2
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.venerdi_elettrodomestici_tempo_2
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.venerdi_elettrodomestici_consumo_2
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.sabato_elettrodomestici_costo_2
                                        name: Sabato
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.sabato_elettrodomestici_cicli_2
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.sabato_elettrodomestici_tempo_2
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.sabato_elettrodomestici_consumo_2
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.domenica_elettrodomestici_costo_2
                                        name: Domenica
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.domenica_elettrodomestici_cicli_2
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.domenica_elettrodomestici_tempo_2
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.domenica_elettrodomestici_consumo_2
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - style:
                                          background: '#62717b'
                                          height: 1px
                                          margin-left: auto
                                          margin-right: auto
                                        type: divider
                      - type: vertical-stack
                        cards:
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_2
                            icon: mdi:power
                            state_color: false
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_2'].attributes.terminato;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Stato':
                              'Ultimo Avvio'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_2
                            state_color: false
                            icon: mdi:history
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_2'].attributes.tempo_ciclo_elettrodomestici_2;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Durata Ciclo':
                              'Durata Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_2
                            state_color: false
                            icon: mdi:counter
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_2'].attributes.consumo_ciclo_elettrodomestici_2;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Consumo ON':
                              'Consumo Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_2
                            state_color: false
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_2'].attributes.costo_ciclo_elettrodomestici_2+('
                              €'); ]]]
                            icon: mdi:currency-eur
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Costo
                              Attuale': 'Costo Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                  - type: custom:bar-card
                    show_icon: true
                    align: split
                    columns: 1
                    max: 3200
                    positions:
                      icon: inside
                      indicator: inside
                      name: inside
                      value: inside
                    unit_of_measurement: W
                    severity:
                      - color: green
                        from: 0
                        to: 100
                      - color: Orange
                        from: 101
                        to: 579
                      - color: red
                        from: 580
                        to: 3200
                    style: |
                      ha-card {
                        --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                        --ha-card-background: "rgba(0, 0, 0, 0.0)";
                        --paper-item-icon-color: 'var(--text-primary-color';
                        --ha-card-box-shadow: 'none';
                      }
                    entity: sensor.potenza_elettrodomestici_w_2
                    name: Consumo Istantaneo max 1100w
                    entity_row: true
                  - type: custom:paper-buttons-row
                    buttons:
                      - icon: hass:cog-outline
                        state: '{{ states(''group.notifiche_elettrodomestici_2'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Impostazioni
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.time
                                    name: Orologio
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: >-
                                      input_datetime.orario_fine_notifiche_elettrodomestici_2
                                    icon: mdi:timer
                                    name: Fascia Oraria Notifiche
                                    state_header: FINE
                                    entities:
                                      - entity: >-
                                          input_datetime.orario_inizio_notifiche_elettrodomestici_2
                                        name: INIZIO
                                  - entity: >-
                                      input_boolean.notify_push_elettrodomestici_2
                                    type: custom:multiple-entity-row
                                    name: Notifiche
                                    icon: mdi:cellphone-message
                                    state_header: PUSH
                                    toggle: true
                                    entities:
                                      - entity: >-
                                          input_boolean.notify_google_elettrodomestici_2
                                        name: GOOGLE
                                        toggle: true
                                      - entity: >-
                                          input_boolean.notify_alexa_elettrodomestici_2
                                        name: ALEXA
                                        toggle: true
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: binary_sensor.ac_elettrodomestici_2
                                    icon: mdi:flash
                                    name: Energia
                                    state_header: STATO
                                    state_color: false
                                    entities:
                                      - entity: input_boolean.switch_elettrodomestici_2
                                        name: SWITCH
                                        toggle: true
                                      - entity: >-
                                          input_number.soglia_lavoro_elettrodomestici_w_2
                                        name: SOGLIA
                                      - entity: >-
                                          input_number.tempo_innesco_elettrodomestici_m_2
                                        name: DELAY OFF
                                      - entity: >-
                                          input_number.avvio_ritardato_conteggio_elettrodomestici_s_2
                                        name: DELAY ON
                                  - type: divider
                                  - entity: >-
                                      automation.elettrodomestici_off_automatico_2
                                    type: custom:multiple-entity-row
                                    name: Switch Auto OFF
                                    state_header: OFF/ON
                                    toggle: true
                                    icon: mdi:toggle-switch
                                    entities:
                                      - entity: input_datetime.elettrodomestici_off_2
                                        name: SPENGIMENTO
                                  - type: divider
                                  - entity: input_text.messaggio_elettrodomestico_2
                                    type: custom:multiple-entity-row
                                    name: Nome
                                    state_header: MESSAGGIO
                                    toggle: false
                                    icon: mdi:rename
                                    entities:
                                      - entity: input_text.nome_elettrodomestico_2
                                        name: ELETTRODOMESTICO
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: >-
                                      input_text.data_reset_sensori_elettrodomestici_2
                                    name: Reset Contatori
                                    icon: mdi:restart
                                    state_header: ULTIMO RESET
                                    state_color: true
                                    entities:
                                      - type: button
                                        name: ESEGUI
                                        icon: mdi:button-pointer
                                        tap_action:
                                          action: call-service
                                          service: script.reset_sensori_elettrodomestici_2
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: input_number.costo_energia
                                    name: Costo Energia
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                      - icon: hass:chart-line
                        state: '{{ states(''xxx'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Statistiche
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.time_on_elettrodomestici_2
                                    attribute: costo_ciclo_elettrodomestici_2
                                    type: custom:multiple-entity-row
                                    icon: mdi:power-plug
                                    unit: €
                                    name: Elettrodomestico
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.time_on_elettrodomestici_2
                                        attribute: terminato
                                        name: STATO
                                      - type: attribute
                                        entity: sensor.time_on_elettrodomestici_2
                                        name: TEMPO
                                        attribute: tempo_ciclo_elettrodomestici_2
                                      - entity: sensor.time_on_elettrodomestici_2
                                        attribute: consumo_ciclo_elettrodomestici_2
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_2
                                    attribute: costo_consumo_ieri_elettrodomestici_2
                                    unit: €
                                    name: Ieri
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_oggi_elettrodomestici_2
                                        name: CICLI
                                        attribute: last_period
                                      - entity: sensor.time_on_elettrodomestici_2
                                        attribute: Ieri
                                        name: TEMPO
                                      - entity: sensor.energy_oggi_elettrodomestici_2
                                        attribute: last_period
                                        unit: kWh
                                        name: CONSUMO
                                  - type: divider
                                  - entity: sensor.time_on_elettrodomestici_2
                                    type: custom:multiple-entity-row
                                    attribute: >-
                                      costo_consumo_giornaliero_elettrodomestici_2
                                    unit: €
                                    name: Oggi
                                    state_header: EURO
                                    icon: mdi:calendar-blank
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_oggi_elettrodomestici_2
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_2
                                        attribute: Oggi
                                        name: TEMPO
                                      - entity: sensor.energy_oggi_elettrodomestici_2
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_2
                                    attribute: costo_consumo_mensile_elettrodomestici_2
                                    unit: €
                                    icon: mdi:calendar-today
                                    name: Mese
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_mese_elettrodomestici_2
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_2
                                        name: TEMPO
                                        attribute: Mese
                                      - entity: sensor.energy_mese_elettrodomestici_2
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_2
                                    attribute: costo_consumo_annuale_elettrodomestici_2
                                    unit: €
                                    icon: mdi:calendar-month
                                    name: Anno
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_anno_elettrodomestici_2
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_2
                                        name: TEMPO
                                        attribute: Anno
                                      - entity: sensor.energy_anno_elettrodomestici_2
                                        name: CONSUMO
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Lavastoviglie
            icon: mdi:dishwasher
            state: null
            hash: '#lavastoviglie'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--green)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 2
          - type: entities
            style: |
              .card-header {
                padding: 0px 0px 0px 0px !important;
              }
            show_header_toggle: 'off'
            entities:
              - type: section
                label: Lavastoviglie
              - type: custom:hui-element
                card_type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: picture-entity
                        aspect_ratio: ''
                        entity: binary_sensor.ac_elettrodomestici_1
                        show_name: false
                        show_state: false
                        style: |
                          ha-card {
                              --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                              --ha-card-background: "rgba(0, 0, 0, 0.0)";
                              --ha-card-box-shadow: 'none';
                              --ha-card-border-width: 0px;
                                  }
                        state_image:
                          'on': /local/foto-pkg/lavastoviglie_on.gif
                          'off': /local/foto-pkg/lavastoviglie_off.png
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Ultimi 7 Giorni
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: vertical-stack
                                cards:
                                  - type: entities
                                    entities:
                                      - style:
                                          background: '#62717b'
                                          height: 1px
                                          margin-left: auto
                                          margin-right: auto
                                        type: divider
                                      - entity: >-
                                          input_number.lunedi_elettrodomestici_costo_1
                                        name: Lunedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.lunedi_elettrodomestici_cicli_1
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.lunedi_elettrodomestici_tempo_1
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.lunedi_elettrodomestici_consumo_1
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.martedi_elettrodomestici_costo_1
                                        name: Martedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.martedi_elettrodomestici_cicli_1
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.martedi_elettrodomestici_tempo_1
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.martedi_elettrodomestici_consumo_1
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.mercoledi_elettrodomestici_costo_1
                                        name: Mercoledì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.mercoledi_elettrodomestici_cicli_1
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.mercoledi_elettrodomestici_tempo_1
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.mercoledi_elettrodomestici_consumo_1
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.giovedi_elettrodomestici_costo_1
                                        name: Giovedì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.giovedi_elettrodomestici_cicli_1
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.giovedi_elettrodomestici_tempo_1
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.giovedi_elettrodomestici_consumo_1
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.venerdi_elettrodomestici_costo_1
                                        name: Venerdì
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.venerdi_elettrodomestici_cicli_1
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.venerdi_elettrodomestici_tempo_1
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.venerdi_elettrodomestici_consumo_1
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.sabato_elettrodomestici_costo_1
                                        name: Sabato
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.sabato_elettrodomestici_cicli_1
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.sabato_elettrodomestici_tempo_1
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.sabato_elettrodomestici_consumo_1
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - type: divider
                                      - entity: >-
                                          input_number.domenica_elettrodomestici_costo_1
                                        name: Domenica
                                        type: custom:multiple-entity-row
                                        state_header: EURO
                                        state_color: false
                                        icon: mdi:calendar
                                        tap_action:
                                          action: null
                                        entities:
                                          - entity: >-
                                              input_text.domenica_elettrodomestici_cicli_1
                                            name: CICLI
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_text.domenica_elettrodomestici_tempo_1
                                            name: TEMPO
                                            tap_action:
                                              action: null
                                          - entity: >-
                                              input_number.domenica_elettrodomestici_consumo_1
                                            name: CONSUMO
                                            tap_action:
                                              action: null
                                      - style:
                                          background: '#62717b'
                                          height: 1px
                                          margin-left: auto
                                          margin-right: auto
                                        type: divider
                      - type: vertical-stack
                        cards:
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_1
                            icon: mdi:power
                            state_color: false
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_1'].attributes.terminato;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Stato':
                              'Ultimo Avvio'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_1
                            state_color: false
                            icon: mdi:history
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_1'].attributes.tempo_ciclo_elettrodomestici_1;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Durata Ciclo':
                              'Durata Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_1
                            state_color: false
                            icon: mdi:counter
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_1'].attributes.consumo_ciclo_elettrodomestici_1;
                              ]]]
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Consumo ON':
                              'Consumo Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                          - type: custom:button-card
                            entity: binary_sensor.ac_elettrodomestici_1
                            state_color: false
                            show_name: false
                            show_icon: true
                            show_state: true
                            show_label: true
                            label: >
                              [[[ return
                              states['sensor.time_on_elettrodomestici_1'].attributes.costo_ciclo_elettrodomestici_1+('
                              €'); ]]]
                            icon: mdi:currency-eur
                            state_display: >
                              [[[ return entity.state === 'on' ? 'Costo
                              Attuale': 'Costo Ultimo'; ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i s " "i l"'
                                - grid-template-columns: 50px auto
                              icon:
                                - padding: 0px 0px
                                - color: var(--primary-text-color)
                                - height: 30px
                                - width: 30px
                              card:
                                - '--ha-card-background': rgba(0, 0, 0, 0.0)
                                - '--ha-card-box-shadow': none
                                - '--ha-card-border-width': 0px
                              label:
                                - padding: 0px 10px
                                - justify-self: start
                                - font-family: Roboto, sans-serif
                                - font-size: 15px
                              state:
                                - padding: 0px 10px
                                - justify-self: start
                                - color: var(--primary-text-color)
                  - type: custom:bar-card
                    show_icon: true
                    align: split
                    columns: 1
                    max: 2500
                    positions:
                      icon: inside
                      indicator: inside
                      name: inside
                      value: inside
                    unit_of_measurement: W
                    severity:
                      - color: green
                        from: 0
                        to: 100
                      - color: Orange
                        from: 101
                        to: 579
                      - color: red
                        from: 580
                        to: 3200
                    style: |
                      ha-card {
                        --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                        --ha-card-background: "rgba(0, 0, 0, 0.0)";
                        --paper-item-icon-color: 'var(--text-primary-color';
                        --ha-card-box-shadow: 'none';
                      }
                    entity: sensor.potenza_elettrodomestici_w_1
                    name: Consumo Istantaneo max 2500w
                    entity_row: true
                  - type: custom:paper-buttons-row
                    buttons:
                      - icon: hass:cog-outline
                        state: '{{ states(''group.notifiche_elettrodomestici_1'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Impostazioni
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.time
                                    name: Orologio
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: >-
                                      input_datetime.orario_fine_notifiche_elettrodomestici_1
                                    icon: mdi:timer
                                    name: Fascia Oraria Notifiche
                                    state_header: FINE
                                    entities:
                                      - entity: >-
                                          input_datetime.orario_inizio_notifiche_elettrodomestici_1
                                        name: INIZIO
                                  - entity: >-
                                      input_boolean.notify_push_elettrodomestici_1
                                    type: custom:multiple-entity-row
                                    name: Notifiche
                                    icon: mdi:cellphone-message
                                    state_header: PUSH
                                    toggle: true
                                    entities:
                                      - entity: >-
                                          input_boolean.notify_google_elettrodomestici_1
                                        name: GOOGLE
                                        toggle: true
                                      - entity: >-
                                          input_boolean.notify_alexa_elettrodomestici_1
                                        name: ALEXA
                                        toggle: true
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: binary_sensor.ac_elettrodomestici_1
                                    icon: mdi:flash
                                    name: Energia
                                    state_header: STATO
                                    state_color: false
                                    entities:
                                      - entity: input_boolean.switch_elettrodomestici_1
                                        name: SWITCH
                                        toggle: true
                                      - entity: >-
                                          input_number.soglia_lavoro_elettrodomestici_w_1
                                        name: SOGLIA
                                      - entity: >-
                                          input_number.tempo_innesco_elettrodomestici_m_1
                                        name: DELAY OFF
                                      - entity: >-
                                          input_number.avvio_ritardato_conteggio_elettrodomestici_s_1
                                        name: DELAY ON
                                  - type: divider
                                  - entity: >-
                                      automation.elettrodomestici_off_automatico_1
                                    type: custom:multiple-entity-row
                                    name: Switch Auto OFF
                                    state_header: OFF/ON
                                    toggle: true
                                    icon: mdi:toggle-switch
                                    entities:
                                      - entity: input_datetime.elettrodomestici_off_1
                                        name: SPENGIMENTO
                                  - type: divider
                                  - entity: input_text.messaggio_elettrodomestico_1
                                    type: custom:multiple-entity-row
                                    name: Nome
                                    state_header: MESSAGGIO
                                    toggle: false
                                    icon: mdi:rename
                                    entities:
                                      - entity: input_text.nome_elettrodomestico_1
                                        name: ELETTRODOMESTICO
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: >-
                                      input_text.data_reset_sensori_elettrodomestici_1
                                    name: Reset Contatori
                                    icon: mdi:restart
                                    state_header: ULTIMO RESET
                                    state_color: true
                                    entities:
                                      - type: button
                                        name: ESEGUI
                                        icon: mdi:button-pointer
                                        tap_action:
                                          action: call-service
                                          service: script.reset_sensori_elettrodomestici_1
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - type: custom:multiple-entity-row
                                    entity: input_number.costo_energia
                                    name: Costo Energia
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                      - icon: hass:chart-line
                        state: '{{ states(''xxx'') }}'
                        state_styles:
                          'on':
                            icon:
                              color: var(--paper-item-icon-active-color)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              title: Statistiche
                              style: >
                                --popup-background-color:
                                var(--secondary-background-color);

                                --dialog-backdrop-filter: blur(2em)
                                brightness(0.75);
                              content:
                                type: entities
                                entities:
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
                                  - entity: sensor.time_on_elettrodomestici_1
                                    attribute: costo_ciclo_elettrodomestici_1
                                    type: custom:multiple-entity-row
                                    icon: mdi:power-plug
                                    unit: €
                                    name: Elettrodomestico
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.time_on_elettrodomestici_1
                                        attribute: terminato
                                        name: STATO
                                      - type: attribute
                                        entity: sensor.time_on_elettrodomestici_1
                                        name: TEMPO
                                        attribute: tempo_ciclo_elettrodomestici_1
                                      - entity: sensor.time_on_elettrodomestici_1
                                        attribute: consumo_ciclo_elettrodomestici_1
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_1
                                    attribute: costo_consumo_ieri_elettrodomestici_1
                                    unit: €
                                    name: Ieri
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_oggi_elettrodomestici_1
                                        name: CICLI
                                        attribute: last_period
                                      - entity: sensor.time_on_elettrodomestici_1
                                        attribute: Ieri
                                        name: TEMPO
                                      - entity: sensor.energy_oggi_elettrodomestici_1
                                        attribute: last_period
                                        unit: kWh
                                        name: CONSUMO
                                  - type: divider
                                  - entity: sensor.time_on_elettrodomestici_1
                                    type: custom:multiple-entity-row
                                    attribute: >-
                                      costo_consumo_giornaliero_elettrodomestici_1
                                    unit: €
                                    name: Oggi
                                    state_header: EURO
                                    icon: mdi:calendar-blank
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_oggi_elettrodomestici_1
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_1
                                        attribute: Oggi
                                        name: TEMPO
                                      - entity: sensor.energy_oggi_elettrodomestici_1
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_1
                                    attribute: costo_consumo_mensile_elettrodomestici_1
                                    unit: €
                                    icon: mdi:calendar-today
                                    name: Mese
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_mese_elettrodomestici_1
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_1
                                        name: TEMPO
                                        attribute: Mese
                                      - entity: sensor.energy_mese_elettrodomestici_1
                                        name: CONSUMO
                                  - type: divider
                                  - type: custom:multiple-entity-row
                                    entity: sensor.time_on_elettrodomestici_1
                                    attribute: costo_consumo_annuale_elettrodomestici_1
                                    unit: €
                                    icon: mdi:calendar-month
                                    name: Anno
                                    state_header: EURO
                                    state_color: true
                                    entities:
                                      - entity: sensor.cicli_anno_elettrodomestici_1
                                        name: CICLI
                                      - entity: sensor.time_on_elettrodomestici_1
                                        name: TEMPO
                                        attribute: Anno
                                      - entity: sensor.energy_anno_elettrodomestici_1
                                        name: CONSUMO
                                  - style:
                                      background: '#62717b'
                                      height: 1px
                                      margin-left: auto
                                      margin-right: auto
                                    type: divider
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Ups Riello
            icon: mdi:power-plug-battery-outline
            state: null
            hash: '#ups'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--green)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 2
          - type: entities
            entities:
              - entity: sensor.riello_idg600_carico
                name: Carico
              - entity: sensor.riello_idg600_dati_di_stato
                name: Dati di stato
              - entity: sensor.riello_idg600_stato
                name: Stato
              - entity: sensor.riello_idg600_tensione_di_ingresso
                name: Tensione di ingresso
              - entity: sensor.riello_idg600_tensione_di_uscita
                name: Tensione di uscita
            title: Riello_Idg600
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: PANNELLO ALLARME
            icon: mdi:shield
            state: null
            hash: '#allarme'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--green)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 2
          - type: custom:alarmo-card
            entity: alarm_control_panel.alarmo
            name: ''
            keep_keypad_visible: true
            use_clear_icon: true
            button_scale_actions: 1.2
            button_scale_keypad: 1.2
            states:
              armed_away:
                hide: false
                button_label: FUORI
                state_label: ATTIVO
              armed_home:
                button_label: IN CASA
                state_label: ATTIVO IN CASA
              disarmed:
                hide: false
                button_label: DISATTIVA
                state_label: DISATTIVATO
            show_messages: true
            show_ready_indicator: true
            show_bypassed_sensors: true
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: PORTE E FINESTRE
            icon: mdi:door-closed
            state: null
            hash: '#portefinestre'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--green)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '20'
            shadow_opacity: '20'
            bg_opacity: '88'
          - type: custom:gap-card
            height: 2
          - type: custom:vertical-stack-in-card
            state_color: true
            cards:
              - type: entities
                entities:
                  - type: custom:multiple-entity-row
                    entity: binary_sensor.salone_ingresso_apertura
                    name: INGRESSO
                    show_state: false
                    entities:
                      - entity: sensor.salone_ingresso_batteria
                        name: BATTERIA
                        state_color: true
                        tap_action: none
                        icon: true
                        styles:
                          width: 70px
                          text-align: center
                      - entity: binary_sensor.salone_ingresso_apertura
                        name: STATO
                        state_color: true
                        tap_action: none
                        styles:
                          width: 70px
                          text-align: center
                  - type: divider
                  - type: custom:multiple-entity-row
                    entity: binary_sensor.cucina_finestra_apertura
                    name: CUCINA
                    show_state: false
                    entities:
                      - entity: sensor.cucina_finestra_batteria
                        name: BATTERIA
                        state_color: true
                        tap_action: none
                        icon: true
                        styles:
                          width: 70px
                          text-align: center
                      - entity: binary_sensor.cucina_finestra_apertura
                        name: STATO
                        state_color: true
                        tap_action: none
                        styles:
                          width: 70px
                          text-align: center
                  - type: divider
                  - type: custom:multiple-entity-row
                    entity: binary_sensor.salone_finestra_apertura
                    name: SALONE
                    show_state: false
                    entities:
                      - entity: sensor.salone_finestra_batteria
                        name: BATTERIA
                        state_color: true
                        tap_action: none
                        icon: true
                        styles:
                          width: 70px
                          text-align: center
                      - entity: binary_sensor.salone_finestra_apertura
                        name: STATO
                        state_color: true
                        tap_action: none
                        styles:
                          width: 70px
                          text-align: center
                  - type: divider
                  - type: custom:multiple-entity-row
                    entity: binary_sensor.bagno_finestra_apertura
                    name: BAGNO ROSA
                    show_state: false
                    entities:
                      - entity: sensor.bagno_finestra_batteria
                        name: BATTERIA
                        state_color: true
                        tap_action: none
                        icon: true
                        styles:
                          width: 70px
                          text-align: center
                      - entity: binary_sensor.bagno_finestra_apertura
                        name: STATO
                        state_color: true
                        tap_action: none
                        styles:
                          width: 70px
                          text-align: center
                  - type: divider
                  - type: custom:multiple-entity-row
                    entity: binary_sensor.camera_finestra_apertura
                    name: CAMERA DA LETTO
                    show_state: false
                    entities:
                      - entity: sensor.camera_finestra_batteria
                        name: BATTERIA
                        state_color: true
                        tap_action: none
                        icon: true
                        styles:
                          width: 70px
                          text-align: center
                      - entity: binary_sensor.camera_finestra_apertura
                        name: STATO
                        state_color: true
                        tap_action: none
                        styles:
                          width: 70px
                          text-align: center
                  - type: divider
                  - type: custom:multiple-entity-row
                    entity: binary_sensor.cameretta_finestra_apertura
                    name: CAMERETTA
                    show_state: false
                    entities:
                      - entity: sensor.cameretta_finestra_batteria
                        name: BATTERIA
                        state_color: true
                        tap_action: none
                        icon: true
                        styles:
                          width: 70px
                          text-align: center
                      - entity: binary_sensor.cameretta_finestra_apertura
                        name: STATO
                        state_color: true
                        tap_action: none
                        styles:
                          width: 70px
                  - type: divider
                  - type: custom:multiple-entity-row
                    entity: binary_sensor.basculante
                    name: GARAGE
                    icon: mdi:garage
                    show_state: false
                    entities:
                      - entity: binary_sensor.basculante
                        name: STATO
                        state_color: true
                        tap_action: none
                        styles:
                          width: 70px
    type: custom:grid-layout
    layout:
      grid-template-columns: 99%
      grid-template-rows: auto
      grid-template-areas: |
        "header"
        "left"
        "right"
        "footer"  
      mediaquery:
        '(min-width: 1024px)':
          grid-template-columns: 50% 50%
          justify-content: center
          grid-template-areas: |
            "header ."
            "left right"
            "footer footer" 
    theme: mysmarthome
    title: _
